"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584,214],{1584:function(t,i,e){e.r(i),e.d(i,{HLSProvider:function(){return u}});var s=e(9669),a=e(4915),h=e(6214),r=e(4924);e(2265),e(4887);let n=t=>(0,s.h)(t);class o{constructor(t){this.Ia=t,this.za=null,this.xj=null,this.mg={},this.H=new Set}get instance(){return this.za}setup(t,i){this.og=i;let e=(0,s.p)(i.$state.streamType).includes("live"),h=(0,s.p)(i.$state.streamType).includes("ll-");this.za=new t({lowLatencyMode:h,backBufferLength:h?4:e?8:void 0,renderTextTracksNatively:!1,...this.mg});let r=this.yj.bind(this);for(let i of Object.values(t.Events))this.za.on(i,r);for(let i of(this.za.on(t.Events.ERROR,this.sd.bind(this)),this.H))i(this.za);i.player.dispatch(new s.D("hls-instance",{detail:this.za})),this.za.attachMedia(this.Ia),this.za.on(t.Events.AUDIO_TRACK_SWITCHED,this.zj.bind(this)),this.za.on(t.Events.LEVEL_SWITCHED,this.Aj.bind(this)),this.za.on(t.Events.LEVEL_LOADED,this.Bj.bind(this)),this.za.on(t.Events.NON_NATIVE_TEXT_TRACKS_FOUND,this.Cj.bind(this)),this.za.on(t.Events.CUES_PARSED,this.Dj.bind(this)),i.qualities[a.Q.ub]=this.Ej.bind(this),(0,s.l)(i.qualities,"change",this._g.bind(this)),(0,s.l)(i.audioTracks,"change",this.Fj.bind(this)),this.xj=(0,s.e)(this.Gj.bind(this))}Gj(){if(!this.og.$state.live())return;let t=new r.R(this.Hj.bind(this));return t.nc(),t.oc.bind(t)}Hj(){this.og.$state.liveSyncPosition.set(this.za?.liveSyncPosition??1/0)}yj(t,i){this.og.player?.dispatch(new s.D(n(t),{detail:i}))}Cj(t,i){let e=new s.D(t,{detail:i}),h=-1;for(let t=0;t<i.tracks.length;t++){let s=i.tracks[t],r=s.subtitleTrack??s.closedCaptions,n=new a.b({id:`hls-${s.kind}${t}`,src:r?.url,label:s.label,language:r?.lang,kind:s.kind});n[a.c.Da]=2,n[a.c.eb]=()=>{"showing"===n.mode?(this.za.subtitleTrack=t,h=t):h===t&&(this.za.subtitleTrack=-1,h=-1)},s.default&&n.setMode("showing",e),this.og.textTracks.add(n,e)}}Dj(t,i){let e=this.og.textTracks.getById(`hls-${i.track}`);if(!e)return;let a=new s.D(t,{detail:i});for(let t of i.cues)t.positionAlign="auto",e.addCue(t,a)}zj(t,i){let e=this.og.audioTracks[i.id];e&&this.og.audioTracks[a.L.$](e,!0,new s.D(t,{detail:i}))}Aj(t,i){let e=this.og.qualities[i.level];e&&this.og.qualities[a.L.$](e,!0,new s.D(t,{detail:i}))}Bj(t,i){if(this.og.$state.canPlay())return;let{type:e,live:h,totalduration:r,targetduration:n}=i.details,o=new s.D(t,{detail:i});this.og.delegate.Pb("stream-type-change",h?"EVENT"===e&&Number.isFinite(r)&&n>=10?"live:dvr":"live":"on-demand",o),this.og.delegate.Pb("duration-change",r,o);let d=this.za.media;for(let t of(-1===this.za.currentLevel&&this.og.qualities[a.Q.tb](!0,o),this.za.audioTracks))this.og.audioTracks[a.L.h]({id:t.id+"",label:t.name,language:t.lang||"",kind:"main"},o);for(let t of this.za.levels)this.og.qualities[a.L.h]({id:(t.id??t.height+"p")+"",width:t.width,height:t.height,codec:t.codecSet,bitrate:t.bitrate},o);d.dispatchEvent(new s.D("canplay",{trigger:o}))}sd(t,i){if(i.fatal)switch(i.type){case"networkError":this.za?.startLoad();break;case"mediaError":this.za?.recoverMediaError();break;default:this.za?.destroy(),this.za=null}}Ej(){this.za&&(this.za.currentLevel=-1)}_g(){let{qualities:t}=this.og;this.za&&!t.auto&&(this.za[t.switch+"Level"]=t.selectedIndex,a.I&&(this.Ia.currentTime=this.Ia.currentTime))}Fj(){let{audioTracks:t}=this.og;this.za&&this.za.audioTrack!==t.selectedIndex&&(this.za.audioTrack=t.selectedIndex)}N(){this.og&&(this.og.qualities[a.Q.ub]=void 0),this.za?.destroy(),this.za=null,this.xj?.(),this.xj=null}}class d{constructor(t,i,e){this.If=t,this.og=i,this.xh=e,this.Ij()}async Ij(){let t={onLoadStart:this.Ef.bind(this),onLoaded:this.Zf.bind(this),onLoadError:this.Jj.bind(this)},i=await c(this.If,t);return((0,s.i)(i)&&!(0,s.b)(this.If)&&(i=await l(this.If,t)),i)?i.isSupported()?i:(this.og.player.dispatch(new s.D("hls-unsupported")),this.og.delegate.Pb("error",{message:"[vidstack]: `hls.js` is not supported in this environment",code:4}),null):null}Ef(){this.og.player.dispatch(new s.D("hls-lib-load-start"))}Zf(t){this.og.player.dispatch(new s.D("hls-lib-loaded",{detail:t})),this.xh(t)}Jj(t){let i=(0,a.d)(t);this.og.player.dispatch(new s.D("hls-lib-load-error",{detail:i})),this.og.delegate.Pb("error",{message:i.message,code:4})}}async function l(t,i={}){if(!(0,s.i)(t)){if(i.onLoadStart?.(),t.prototype&&t.prototype!==Function)return i.onLoaded?.(t),t;try{let e=(await t())?.default;if(e&&e.isSupported)i.onLoaded?.(e);else throw Error("");return e}catch(t){i.onLoadError?.(t)}}}async function c(t,i={}){if((0,s.b)(t)){i.onLoadStart?.();try{if(await (0,a.l)(t),!(0,s.j)(window.Hls))throw Error("");let e=window.Hls;return i.onLoaded?.(e),e}catch(t){i.onLoadError?.(t)}}}class u extends h.VideoProvider{constructor(){super(...arguments),this.$$PROVIDER_TYPE="HLS",this.lg=null,this.ef=new o(this.video),this.kg="https://cdn.jsdelivr.net/npm/hls.js@^1.0.0/dist/hls.min.js"}get ctor(){return this.lg}get instance(){return this.ef.instance}get type(){return"hls"}get canLiveSync(){return!0}get config(){return this.ef.mg}set config(t){this.ef.mg=t}get library(){return this.kg}set library(t){this.kg=t}preconnect(){(0,s.b)(this.kg)&&(0,a.p)(this.kg)}setup(t){super.setup(t),new d(this.kg,t,i=>{this.lg=i,this.ef.setup(i,t),t.delegate.Pb("provider-setup",this);let e=(0,s.p)(t.$state.source);e&&this.loadSource(e)})}async loadSource(t,i){(0,s.b)(t.src)&&(this.Ma.preload=i||"",this.ef.instance?.loadSource(t.src),this.ng=t)}onInstance(t){let i=this.ef.instance;return i&&t(i),this.ef.H.add(t),()=>this.ef.H.delete(t)}destroy(){this.ef.N()}}u.supported=(0,a.i)()},6214:function(t,i,e){e.r(i),e.d(i,{VideoProvider:function(){return c}});var s=e(9669),a=e(4915),h=e(688);e(2265),e(4887);class r{constructor(t,i){this.Ia=t,this.og=i,t.textTracks.onaddtrack=this.Oa.bind(this),(0,s.o)(this.qj.bind(this))}Oa(t){let i=t.track;if(!i||Array.from(this.Ia.children).find(t=>t.track===i))return;let e=new a.b({id:i.id,kind:i.kind,label:i.label,language:i.language,type:"vtt"});e[a.c._a]={track:i},e[a.c.Da]=2,e[a.c.Sa]=!0;let s=0,h=t=>{if(i.cues)for(let a=s;a<i.cues.length;a++)e.addCue(i.cues[a],t),s++};h(t),i.oncuechange=h,this.og.textTracks.add(e,t),e.setMode(i.mode,t)}qj(){for(let t of(this.Ia.textTracks.onaddtrack=null,this.og.textTracks)){let i=t[a.c._a]?.track;i?.oncuechange&&(i.oncuechange=null)}}}class n{constructor(t,i){this.Ia=t,this.Ma=i,this.ma=(t,i)=>{this.Ma.delegate.Pb("picture-in-picture-change",t,i)},(0,s.l)(this.Ia,"enterpictureinpicture",this.rj.bind(this)),(0,s.l)(this.Ia,"leavepictureinpicture",this.sj.bind(this))}get active(){return document.pictureInPictureElement===this.Ia}get supported(){return(0,a.j)(this.Ia)}async enter(){return this.Ia.requestPictureInPicture()}exit(){return document.exitPictureInPicture()}rj(t){this.ma(!0,t)}sj(t){this.ma(!1,t)}}class o{constructor(t,i){this.Ia=t,this.Ma=i,this.Wa="inline",(0,s.l)(this.Ia,"webkitpresentationmodechanged",this.eb.bind(this))}get wj(){return(0,a.k)(this.Ia)}async vj(t){this.Wa!==t&&this.Ia.webkitSetPresentationMode(t)}eb(t){let i=this.Wa;this.Wa=this.Ia.webkitPresentationMode,this.Ma.player?.dispatch(new s.D("video-presentation-change",{detail:this.Wa,trigger:t})),["fullscreen","picture-in-picture"].forEach(e=>{(this.Wa===e||i===e)&&this.Ma.delegate.Pb(`${e}-change`,this.Wa===e,t)})}}class d{constructor(t){this.uj=t}get active(){return"fullscreen"===this.uj.Wa}get supported(){return this.uj.wj}async enter(){this.uj.vj("fullscreen")}async exit(){this.uj.vj("inline")}}class l{constructor(t){this.uj=t}get active(){return"picture-in-picture"===this.uj.Wa}get supported(){return this.uj.wj}async enter(){this.uj.vj("picture-in-picture")}async exit(){this.uj.vj("inline")}}class c extends h.H{constructor(t,i){super(t),this.$$PROVIDER_TYPE="VIDEO",(0,s.n)(()=>{if((0,a.k)(t)){let e=new o(t,i);this.fullscreen=new d(e),this.pictureInPicture=new l(e)}else(0,a.j)(t)&&(this.pictureInPicture=new n(t,i))},this.scope)}get type(){return"video"}setup(t){super.setup(t),(0,a.m)(this.video)&&new r(this.video,t),t.textRenderers.Ra(this.video),(0,s.o)(()=>{t.textRenderers.Ra(null)}),"video"===this.type&&t.delegate.Pb("provider-setup",this)}get video(){return this.Ma}}},4924:function(t,i,e){e.d(i,{R:function(){return a}});var s=e(9669);class a{constructor(t){this.xh=t}nc(){(0,s.i)(this.Ac)&&this.Nj()}oc(){(0,s.a)(this.Ac)&&window.cancelAnimationFrame(this.Ac),this.Ac=void 0}Nj(){this.Ac=window.requestAnimationFrame(()=>{(0,s.i)(this.Ac)||(this.xh(),this.Nj())})}}},688:function(t,i,e){e.d(i,{H:function(){return o}});var s=e(9669),a=e(4915),h=e(4924);class r{constructor(t,i){this.Qb=t,this.og=i,this.oj=(0,s.u)(),this.Wj=!1,this.Xj=!1,this.Yj=!1,this.Zg=new h.R(this.ah.bind(this)),this.$j=void 0,this.ok=void 0,this.ak(),(0,s.e)(this.bk.bind(this)),(0,s.o)(this.qj.bind(this))}get Ma(){return this.Qb.media}get Pb(){return this.og.delegate.Pb}qj(){this.Xj=!1,this.Yj=!1,this.Zg.oc(),this.oj.empty()}ah(){let t=this.Ma.currentTime;this.og.$state.currentTime()!==t&&this.Vj(t)}ak(){this.Uj("loadstart",this.Ef),this.Uj("abort",this._j),this.Uj("emptied",this.ck),this.Uj("error",this.sd)}dk(){this.Xj||(this.oj.add(this.Uj("loadeddata",this.ek),this.Uj("loadedmetadata",this.fk),this.Uj("canplay",this.ld),this.Uj("canplaythrough",this.gk),this.Uj("durationchange",this.hk),this.Uj("play",this.pa),this.Uj("progress",this.yg),this.Uj("stalled",this.ik),this.Uj("suspend",this.jk)),this.Xj=!0)}kk(){this.Yj||(this.oj.add(this.Uj("pause",this.qa),this.Uj("playing",this.lk),this.Uj("ratechange",this.mk),this.Uj("seeked",this.zg),this.Uj("seeking",this.nk),this.Uj("ended",this.Kg),this.Uj("volumechange",this.zd),this.Uj("waiting",this.lh)),this.Yj=!0)}Uj(t,i){return(0,s.l)(this.Ma,t,i.bind(this))}pk(t){}Vj(t,i){let e={currentTime:Math.min(t,this.og.$state.seekableEnd()),played:this.Ma.played};this.Pb("time-update",e,i)}Ef(t){if(3===this.Ma.networkState){this._j(t);return}this.dk(),this.Pb("load-start",void 0,t)}_j(t){this.Pb("abort",void 0,t)}ck(){this.Pb("emptied",void 0,event)}ek(t){this.Pb("loaded-data",void 0,t)}fk(t){this.kk(),this.Pb("volume-change",{volume:this.Ma.volume,muted:this.Ma.muted},t),this.Pb("loaded-metadata",void 0,t),a.e&&(0,a.f)(this.og.$state.source())&&this.og.delegate.Og(this.Zj(),t)}Zj(){return{provider:(0,s.p)(this.og.$provider),duration:this.Ma.duration,buffered:this.Ma.buffered,seekable:this.Ma.seekable}}pa(t){this.og.$state.canPlay&&this.Pb("play",void 0,t)}qa(t){(1!==this.Ma.readyState||this.Wj)&&(this.Wj=!1,this.Zg.oc(),this.Pb("pause",void 0,t))}ld(t){this.og.delegate.Og(this.Zj(),t)}gk(t){this.og.$state.started()||this.Pb("can-play-through",this.Zj(),t)}lk(t){this.Wj=!1,this.Pb("playing",void 0,t),this.Zg.nc()}ik(t){this.Pb("stalled",void 0,t),this.Ma.readyState<3&&(this.Wj=!0,this.Pb("waiting",void 0,t))}lh(t){this.Ma.readyState<3&&(this.Wj=!0,this.Pb("waiting",void 0,t))}Kg(t){if(this.Zg.oc(),this.Vj(this.Ma.duration,t),this.Pb("end",void 0,t),this.og.$state.loop()){let t=(0,s.k)(this.Ma.controls);t&&(this.Ma.controls=!1)}}bk(){this.og.$state.paused()&&(0,s.l)(this.Ma,"timeupdate",this.Ig.bind(this))}Ig(t){this.Vj(this.Ma.currentTime,t)}hk(t){this.og.$state.ended()&&this.Vj(this.Ma.duration,t),this.Pb("duration-change",this.Ma.duration,t)}zd(t){let i={volume:this.Ma.volume,muted:this.Ma.muted};this.Pb("volume-change",i,t)}zg(t){this.Vj(this.Ma.currentTime,t),this.Pb("seeked",this.Ma.currentTime,t),Math.trunc(this.Ma.currentTime)===Math.trunc(this.Ma.duration)&&(0,a.g)(this.Ma.duration)>(0,a.g)(this.Ma.currentTime)&&(this.Vj(this.Ma.duration,t),this.Ma.ended||this.og.player.dispatch(new s.D("media-play-request",{trigger:t})))}nk(t){this.Pb("seeking",this.Ma.currentTime,t)}yg(t){let i={buffered:this.Ma.buffered,seekable:this.Ma.seekable};this.Pb("progress",i,t)}jk(t){this.Pb("suspend",void 0,t)}mk(t){this.Pb("rate-change",this.Ma.playbackRate,t)}sd(t){let i=this.Ma.error;if(!i)return;let e={message:i.message,code:i.code,mediaError:i};this.Pb("error",e,t)}}class n{constructor(t,i){this.Qb=t,this.og=i,this.Oj.onaddtrack=this.Qj.bind(this),this.Oj.onremovetrack=this.Rj.bind(this),this.Oj.onchange=this.Sj.bind(this),(0,s.l)(this.og.audioTracks,"change",this.Tj.bind(this))}get Oj(){return this.Qb.media.audioTracks}Qj(t){let i=t.track;if(""===i.label)return;let e={id:i.id+"",label:i.label,language:i.language,kind:i.kind,selected:!1};this.og.audioTracks[a.L.h](e,t),i.enabled&&(e.selected=!0)}Rj(t){let i=this.og.audioTracks.getById(t.track.id);i&&this.og.audioTracks[a.L.f](i,t)}Sj(t){let i=this.Pj();if(!i)return;let e=this.og.audioTracks.getById(i.id);e&&this.og.audioTracks[a.L.$](e,!0,t)}Pj(){return Array.from(this.Oj).find(t=>t.enabled)}Tj(t){let{current:i}=t.detail;if(!i)return;let e=this.Oj.getTrackById(i.id);if(e){let t=this.Pj();t&&(t.enabled=!1),e.enabled=!0}}}class o{constructor(t){this.Ma=t,this.scope=(0,s.c)(),this.ng=null}setup(t){new r(this,t),"audioTracks"in this.media&&new n(this,t),(0,s.o)(()=>{this.Ma.setAttribute("src",""),this.Ma.load()})}get type(){return""}get media(){return this.Ma}get currentSrc(){return this.ng}setPlaybackRate(t){this.Ma.playbackRate=t}async play(){return this.Ma.play()}async pause(){return this.Ma.pause()}setMuted(t){this.Ma.muted=t}setVolume(t){this.Ma.volume=t}setCurrentTime(t){this.Ma.currentTime=t}setPlaysinline(t){(0,s.m)(this.Ma,"playsinline",t)}async loadSource({src:t,type:i},e){this.Ma.preload=e||"",(0,a.h)(t)?this.Ma.srcObject=t:(this.Ma.srcObject=null,this.Ma.src=(0,s.b)(t)?t:window.URL.createObjectURL(t)),this.Ma.load(),this.ng={src:t,type:i}}}}}]);