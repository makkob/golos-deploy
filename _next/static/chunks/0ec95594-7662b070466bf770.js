"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[868],{4915:function(t,e,i){i.d(e,{$:function(){return si},A:function(){return r3},B:function(){return ni},C:function(){return nr},D:function(){return na},E:function(){return nu},F:function(){return nl},G:function(){return p},H:function(){return nd},I:function(){return L},J:function(){return nm},K:function(){return nE},L:function(){return x},M:function(){return rb},N:function(){return nO},O:function(){return nZ},P:function(){return r0},Q:function(){return e$},R:function(){return n1},S:function(){return nf},T:function(){return G},U:function(){return aa},V:function(){return ao},W:function(){return ac},X:function(){return ap},Y:function(){return ab},Z:function(){return nq},_:function(){return aw},a:function(){return ts},a$:function(){return s3},a0:function(){return ss},a1:function(){return W},a2:function(){return V},a3:function(){return z},a4:function(){return T},a5:function(){return O},a6:function(){return C},a7:function(){return B},a8:function(){return en},a9:function(){return ej},aA:function(){return eC},aB:function(){return iY},aC:function(){return rh},aD:function(){return ro},aE:function(){return rc},aF:function(){return rp},aG:function(){return rd},aH:function(){return rf},aI:function(){return iS},aJ:function(){return iR},aK:function(){return iq},aL:function(){return iJ},aM:function(){return i4},aN:function(){return i9},aO:function(){return sa},aP:function(){return sh},aQ:function(){return sf},aR:function(){return sE},aS:function(){return sP},aT:function(){return sS},aU:function(){return sA},aV:function(){return sO},aW:function(){return sI},aX:function(){return s_},aY:function(){return sK},aZ:function(){return sX},a_:function(){return s1},aa:function(){return eN},ab:function(){return tt},ac:function(){return Z},ad:function(){return X},ae:function(){return eh},af:function(){return tw},ag:function(){return t$},ah:function(){return TextTrackList},ai:function(){return eu},aj:function(){return tg},ak:function(){return ty},al:function(){return ey},am:function(){return eM},an:function(){return eU},ao:function(){return eK},ap:function(){return eB},aq:function(){return eZ},ar:function(){return eX},as:function(){return ex},at:function(){return eT},au:function(){return ek},av:function(){return eE},aw:function(){return eP},ax:function(){return eS},ay:function(){return eA},az:function(){return eO},b:function(){return TextTrack},b$:function(){return r2},b0:function(){return rg},b1:function(){return ry},b2:function(){return rw},b3:function(){return r$},b4:function(){return rM},b5:function(){return rx},b6:function(){return rT},b7:function(){return rk},b8:function(){return rE},b9:function(){return rP},bA:function(){return aT},bB:function(){return aE},bC:function(){return aP},bD:function(){return aj},bE:function(){return r8},bF:function(){return r9},bG:function(){return ne},bH:function(){return nS},bI:function(){return n$},bJ:function(){return nM},bK:function(){return nw},bL:function(){return nT},bM:function(){return nA},bN:function(){return nN},bO:function(){return nI},bP:function(){return n_},bQ:function(){return nU},bR:function(){return nz},bS:function(){return nQ},bT:function(){return as},bU:function(){return nY},bV:function(){return n0},bW:function(){return nj},bX:function(){return nR},bY:function(){return n7},bZ:function(){return at},b_:function(){return ae},ba:function(){return rS},bb:function(){return rA},bc:function(){return rO},bd:function(){return rC},be:function(){return rj},bf:function(){return rR},bg:function(){return rq},bh:function(){return rD},bi:function(){return rF},bj:function(){return rN},bk:function(){return rL},bl:function(){return rI},bm:function(){return rV},bn:function(){return rz},bo:function(){return rQ},bp:function(){return r_},bq:function(){return rH},br:function(){return rW},bs:function(){return rU},bt:function(){return rB},bu:function(){return rG},bv:function(){return a$},bw:function(){return n4},bx:function(){return ah},by:function(){return al},bz:function(){return aM},c:function(){return tb},c0:function(){return r6},c1:function(){return ag},c2:function(){return ay},c3:function(){return av},d:function(){return e5},e:function(){return I},f:function(){return eH},g:function(){return ir},h:function(){return eW},i:function(){return U},j:function(){return _},k:function(){return H},l:function(){return ta},m:function(){return Q},n:function(){return rm},o:function(){return Y},p:function(){return tr},q:function(){return te},r:function(){return rv},s:function(){return rK},t:function(){return tM},u:function(){return n3},v:function(){return tm},w:function(){return i6},x:function(){return q},y:function(){return iK},z:function(){return sl}});var s,r,n,a,h,l=i(2265),o=i(9669),u=i(4887);let c=Symbol(0),d=class t{constructor(t,e,i,r,n){this.logger=t,this.level=e,this.title=i,this.root=r,this.parent=n,this[s]=!0,this.logs=[]}log(...t){return this.logs.push({data:t}),this}labelledLog(t,...e){return this.logs.push({label:t,data:e}),this}groupStart(e){return new t(this.logger,this.level,e,this.root??this,this)}groupEnd(){return this.parent?.logs.push(this),this.parent??this}dispatch(){return this.logger.dispatch(this.level,this.root??this)}};s=c;let p=d,f=Symbol(0),b=Symbol(0),m=Symbol(0),g=Symbol(0),y=Symbol(0),v=Symbol(0),w=Symbol(0),$=Symbol(0),M=Symbol(0),x={h:f,f:b,j:m,$:g,e:y,g:v,k:w,i:$,ca:M};class T extends o.H{constructor(){super(...arguments),this.d=[],this[r]=!1}get length(){return this.d.length}get readonly(){return this[x.e]}toArray(){return[...this.d]}[(r=x.e,Symbol.iterator)](){return this.d.values()}[x.h](t,e){let i=this.d.length;""+i in this||Object.defineProperty(this,i,{get(){return this.d[i]}}),this.d.includes(t)||(this.d.push(t),this.dispatchEvent(new o.D("add",{detail:t,trigger:e})))}[x.f](t,e){let i=this.d.indexOf(t);i>=0&&(this[x.i]?.(t,e),this.d.splice(i,1),this.dispatchEvent(new o.D("remove",{detail:t,trigger:e})))}[x.j](t){for(let e of[...this.d])this[x.f](e,t);this.d=[],this[x.g](!1,t),this[x.k]?.()}[x.g](t,e){this[x.e]!==t&&(this[x.e]=t,this.dispatchEvent(new o.D("readonly-change",{detail:t,trigger:e})))}}var k={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},E="undefined"!=typeof window&&void 0!==window.document?window.document:{},P="fullscreenEnabled"in E&&Object.keys(k)||"webkitFullscreenEnabled"in E&&["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]||"mozFullScreenEnabled"in E&&["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"]||"msFullscreenEnabled"in E&&["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]||[],S={requestFullscreen:function(t){return t[P[k.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[P[k.requestFullscreen]]},get exitFullscreen(){return E[P[k.exitFullscreen]].bind(E)},get fullscreenPseudoClass(){return":"+P[k.fullscreen]},addEventListener:function(t,e,i){return E.addEventListener(P[k[t]],e,i)},removeEventListener:function(t,e,i){return E.removeEventListener(P[k[t]],e,i)},get fullscreenEnabled(){return!!E[P[k.fullscreenEnabled]]},set fullscreenEnabled(val){},get fullscreenElement(){return E[P[k.fullscreenElement]]},set fullscreenElement(val){},get onfullscreenchange(){return E[("on"+P[k.fullscreenchange]).toLowerCase()]},set onfullscreenchange(handler){return E[("on"+P[k.fullscreenchange]).toLowerCase()]=handler},get onfullscreenerror(){return E[("on"+P[k.fullscreenerror]).toLowerCase()]},set onfullscreenerror(handler){return E[("on"+P[k.fullscreenerror]).toLowerCase()]=handler}};let A=S.fullscreenEnabled;class O extends o.V{constructor(){super(...arguments),this.l=!1,this.m=!1}get active(){return this.m}get supported(){return A}onConnect(){(0,o.l)(S,"fullscreenchange",this.n.bind(this)),(0,o.l)(S,"fullscreenerror",this.o.bind(this)),(0,o.o)(this.c.bind(this))}async c(){A&&await this.exit()}n(t){let e=j(this.el);e!==this.m&&(e||(this.l=!1),this.m=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}o(t){this.l&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.l=!1)}async enter(){try{if(this.l=!0,!this.el||j(this.el))return;return R(),S.requestFullscreen(this.el)}catch(t){throw this.l=!1,t}}async exit(){if(this.el&&j(this.el))return R(),S.exitFullscreen()}}function C(){return A}function j(t){if(S.fullscreenElement===t)return!0;try{return t.matches(S.fullscreenPseudoClass)}catch(t){return!1}}function R(){if(!A)throw Error("[vidstack] no fullscreen API")}let q="undefined"==typeof document,D=q?"":navigator?.userAgent.toLowerCase()||"",F=!q&&/iphone|ipad|ipod|ios|crios|fxios/i.test(D),N=!q&&/(iphone|ipod)/gi.test(navigator?.platform||""),L=!q&&!!window.chrome,I=!q&&(!!window.safari||F);function V(){return z()&&(0,o.j)(screen.orientation.unlock)}function z(){return!q&&!(0,o.i)(window.screen.orientation)&&!(0,o.i)(window.screen.orientation.lock)}function Q(t){return!q&&(t||(t=document.createElement("video")),t.canPlayType("application/vnd.apple.mpegurl").length>0)}function _(t){return!q&&!!document.pictureInPictureEnabled&&!t.disablePictureInPicture}function H(t){return!q&&(0,o.j)(t?.webkitSupportsPresentationMode)&&(0,o.j)(t?.webkitSetPresentationMode)}async function W(){let t=document.createElement("video");return t.volume=.5,await (0,o.I)(0),.5===t.volume}function U(){if(q)return!1;let MediaSource=q?void 0:window?.MediaSource??window?.WebKitMediaSource;if((0,o.i)(MediaSource))return!1;let t=MediaSource&&(0,o.j)(MediaSource.isTypeSupported)&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),SourceBuffer=q?void 0:window?.SourceBuffer??window?.WebKitSourceBuffer,e=(0,o.i)(SourceBuffer)||!(0,o.i)(SourceBuffer.prototype)&&(0,o.j)(SourceBuffer.prototype.appendBuffer)&&(0,o.j)(SourceBuffer.prototype.remove);return!!t&&!!e}let K=class t extends o.V{constructor(){super(...arguments),this.q=(0,o.s)(this.s()),this.p=(0,o.s)(!1)}get type(){return this.q()}get locked(){return this.p()}get portrait(){return this.q().startsWith("portrait")}get landscape(){return this.q().startsWith("landscape")}get supported(){return t.supported}onConnect(){if(this.supported)(0,o.l)(screen.orientation,"change",this.t.bind(this));else{let t=window.matchMedia("(orientation: landscape)");t.onchange=this.t.bind(this),(0,o.o)(()=>t.onchange=null)}(0,o.o)(this.c.bind(this))}async c(){this.supported&&this.p()&&await this.unlock()}t(t){this.q.set(this.s()),this.dispatch("orientation-change",{detail:{orientation:(0,o.p)(this.q),lock:this.r},trigger:t})}async lock(t){(0,o.p)(this.p)||this.r===t||(this.u(),await screen.orientation.lock(t),this.p.set(!0),this.r=t)}async unlock(){(0,o.p)(this.p)&&(this.u(),this.r=void 0,await screen.orientation.unlock(),this.p.set(!1))}u(){if(!this.supported)throw Error("[vidstack] no orientation API")}s(){return q?"portrait-primary":this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};K.supported=V();let B=K;class G{get length(){return this.da.length}constructor(t,e){(0,o.J)(t)?this.da=t:(0,o.i)(t)||(0,o.i)(e)?this.da=[]:this.da=[[t,e]]}start(t){return this.da[t][0]??1/0}end(t){return this.da[t][1]??1/0}}function Z(t){if(!t.length)return null;let e=t.start(0);for(let i=1;i<t.length;i++){let s=t.start(i);s<e&&(e=s)}return e}function X(t){if(!t.length)return null;let e=t.end(0);for(let i=1;i<t.length;i++){let s=t.end(i);s>e&&(e=s)}return e}let Y=new o.S({audioTracks:[],audioTrack:null,autoplay:!1,autoplayError:null,buffered:new G,duration:0,canLoad:!1,canFullscreen:!1,canOrientScreen:V(),canPictureInPicture:!1,canPlay:!1,controls:!1,controlsVisible:!1,crossorigin:null,currentTime:0,ended:!1,error:null,fullscreen:!1,loop:!1,logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new G,playing:!1,playsinline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,seekable:new G,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,volume:1,waiting:!1,get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return"unknown"!==this.providedViewType?this.providedViewType:this.inferredViewType},get streamType(){return"unknown"!==this.providedStreamType?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){return Z(this.buffered)??0},get bufferedEnd(){return X(this.buffered)??0},get seekableStart(){return Z(this.seekable)??0},get seekableEnd(){return this.canPlay?X(this.seekable)??1/0:0},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoplaying:!1,providedTitle:"",inferredTitle:"",providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null}),J=new Set(["autoplay","canFullscreen","canLoad","canPictureInPicture","canSetVolume","controls","crossorigin","fullscreen","height","inferredViewType","logLevel","loop","mediaHeight","mediaType","mediaWidth","muted","orientation","pictureInPicture","playsinline","pointer","preload","providedPoster","providedStreamType","providedTitle","providedViewType","source","sources","textTrack","textTracks","volume","width"]);function tt(t){Y.reset(t,t=>!J.has(t)),(0,o.K)()}let te=(0,o.L)();function ti(){return(0,o.M)(te)}function ts(t,e){let i=new URLSearchParams;for(let t of Object.keys(e))i.set(t,e[t]+"");return t+"?"+i.toString()}function tr(t,e="preconnect"){if(q)return!1;let i=document.querySelector(`link[href="${t}"]`);if(!(0,o.N)(i))return!0;let s=document.createElement("link");return s.rel=e,s.href=t,s.crossOrigin="true",document.head.append(s),!0}let tn={};function ta(t){if(tn[t])return tn[t].promise;let e=(0,o.g)(),i=document.querySelector(`script[src="${t}"]`);if(!(0,o.N)(i))return e.resolve(),e.promise;let s=document.createElement("script");return s.src=t,s.onload=()=>{e.resolve(),delete tn[t]},s.onerror=()=>{e.reject(),delete tn[t]},setTimeout(()=>document.head.append(s),0),e.promise}function th(t){return"use-credentials"===t?"include":(0,o.b)(t)?"same-origin":void 0}let tl=Symbol(0),to=Symbol(0),tu=Symbol(0),tc=Symbol(0),td=Symbol(0),tp=Symbol(0),tf=Symbol(0),tb={fb:tl,Da:to,Ya:tu,Za:tc,eb:td,_a:tp,Sa:tf};function tm(t,e){for(let i=0,s=t.length;i<s;i++)if(tg(t[i],e))return t[i];return null}function tg(t,e){return e>=t.startTime&&e<t.endTime}function ty(t,e,i){let s=null;function r(){let r=(0,o.b)(e)?[e]:e,n=t.toArray().find(t=>r.includes(t.kind)&&"showing"===t.mode);if(n!==s){if(!n){i(null),s=null;return}2==n.readyState?i(n):(i(null),n.addEventListener("load",()=>i(n),{once:!0})),s=n}}return r(),(0,o.l)(t,"mode-change",r)}class TextTrack extends o.H{constructor(t){for(let e of(super(),this.id="",this.label="",this.language="",this.default=!1,this.Za=!1,this.Ua=0,this.Wa="disabled",this.$a={},this.Xa=[],this.Ta=[],this.Va=[],this[n]=0,this[a]=null,this[h]=null,Object.keys(t)))this[e]=t[e];this.type||(this.type="vtt"),!q&&t.content?i.e(562).then(i.bind(i,6562)).then(({parseText:e,VTTCue,VTTRegion:i})=>{"json"===t.type?this.ab(t.content,VTTCue,i):e(t.content,{type:t.type}).then(({cues:t,regions:e})=>{this.Ta=t,this.Xa=e,this.Da()})}):t.src||(this[tb.Da]=2)}static createId(t){return`id::${t.type}-${t.kind}-${t.src??t.label}`}get metadata(){return this.$a}get regions(){return this.Xa}get cues(){return this.Ta}get activeCues(){return this.Va}get readyState(){return this[tb.Da]}get mode(){return this.Wa}set mode(t){this.setMode(t)}addCue(t,e){let i=0,s=this.Ta.length;for(i=0;i<s&&!(t.endTime<=this.Ta[i].startTime);i++);i===s?this.Ta.push(t):this.Ta.splice(i,0,t),e?.type!=="cuechange"&&this[tb._a]?.track.addCue(t),this.dispatchEvent(new o.D("add-cue",{detail:t,trigger:e})),tg(t,this.Ua)&&this[tb.Ya](this.Ua,e)}removeCue(t,e){let i=this.Ta.indexOf(t);if(i>=0){let s=this.Va.includes(t);this.Ta.splice(i,1),this[tb._a]?.track.removeCue(t),this.dispatchEvent(new o.D("remove-cue",{detail:t,trigger:e})),s&&this[tb.Ya](this.Ua,e)}}setMode(t,e){this.Wa!==t&&(this.Wa=t,"disabled"===t?(this.Va=[],this.bb()):2===this.readyState?this[tb.Ya](this.Ua,e):this.cb(),this.dispatchEvent(new o.D("mode-change",{detail:this,trigger:e})),this[tb.eb]?.())}[(n=tb.Da,a=tb.eb,h=tb._a,tb.Ya)](t,e){if(this.Ua=t,"disabled"===this.mode||!this.Ta.length)return;let i=[];for(let e=0,s=this.Ta.length;e<s;e++){let s=this.Ta[e];tg(s,t)&&i.push(s)}let s=i.length!==this.Va.length;if(!s){for(let t=0;t<i.length;t++)if(!this.Va.includes(i[t])){s=!0;break}}this.Va=i,s&&this.bb(e)}[tb.Za](){this.Za=!0,"disabled"!==this.Wa&&this.cb()}async cb(){if(this.Za&&this.src&&!(this[tb.Da]>0)){this[tb.Da]=1,this.dispatchEvent(new o.D("load-start"));try{let{parseResponse:t,VTTCue,VTTRegion:e}=await i.e(562).then(i.bind(i,6562)),s=this[tb.fb]?.(),r=fetch(this.src,{headers:"json"===this.type?{"Content-Type":"application/json"}:void 0,credentials:th(s)});if("json"===this.type)this.ab(await (await r).text(),VTTCue,e);else{let{errors:e,metadata:i,regions:s,cues:n}=await t(r,{type:this.type,encoding:this.encoding});if(e[0]?.code===0)throw e[0];this.$a=i,this.Xa=s,this.Ta=n}this.Da()}catch(t){this.db(t)}}}Da(){if(this[tb.Da]=2,!this.src||"vtt"!==this.type){let t=this[tb._a]?.track;if(t)for(let e of this.Ta)t.addCue(e)}let t=new o.D("load");this[tb.Ya](this.Ua,t),this.dispatchEvent(t)}db(t){this[tb.Da]=3,this.dispatchEvent(new o.D("error",{detail:t}))}ab(t,VTTCue,e){try{let{regions:i,cues:s}=t$(t,VTTCue,e);this.Xa=i,this.Ta=s}catch(t){this.db(t)}}bb(t){this.dispatchEvent(new o.D("cue-change",{trigger:t}))}}let tv=/captions|subtitles/;function tw(t){return tv.test(t.kind)}function t$(t,e,i){let s=JSON.parse(t),r=[],n=[];return s.regions&&i&&(r=s.regions.map(t=>Object.assign(new i,t))),(s.cues||(0,o.J)(s))&&(n=((0,o.J)(s)?s:s.cues).filter(t=>(0,o.a)(t.startTime)&&(0,o.a)(t.endTime)).map(t=>Object.assign(new e(0,0,""),t))),{regions:r,cues:n}}class tM{constructor(t){this.a=t,this.b=null,this.ua=null,this.va=-1}setTarget(t){this.b=t}getPlayer(t){return this.ua||(t??this.b)?.dispatchEvent(new o.D("find-media-player",{detail:t=>void(this.ua=t),bubbles:!0,composed:!0})),this.ua}setPlayer(t){this.ua=t}startLoading(t){this.ta("media-start-loading",t)}play(t){this.ta("media-play-request",t)}pause(t){this.ta("media-pause-request",t)}mute(t){this.ta("media-mute-request",t)}unmute(t){this.ta("media-unmute-request",t)}enterFullscreen(t,e){this.ta("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.ta("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.ta("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.ta("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.ta("media-enter-pip-request",t)}exitPictureInPicture(t){this.ta("media-exit-pip-request",t)}seeking(t,e){this.ta("media-seeking-request",e,t)}seek(t,e){this.ta("media-seek-request",e,t)}seekToLiveEdge(t){this.ta("media-live-edge-request",t)}changeVolume(t,e){this.ta("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.ta("media-audio-track-change-request",e,t)}changeQuality(t,e){this.ta("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,i){this.ta("media-text-track-change-request",i,{index:t,mode:e})}changePlaybackRate(t,e){this.ta("media-rate-change-request",e,t)}resumeControls(t){this.ta("media-resume-controls-request",t)}pauseControls(t){this.ta("media-pause-controls-request",t)}togglePaused(t){let e=this.getPlayer(t?.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){let e=this.getPlayer(t?.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){let e=this.getPlayer(t?.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){let i=this.getPlayer(e?.target);i&&(i.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){let e=this.getPlayer(t?.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}disableCaptions(t){let e=this.getPlayer(t?.target);if(!e)return;let i=e.state.textTracks,s=e.state.textTrack;if(s){let e=i.indexOf(s);this.changeTextTrackMode(e,"disabled",t)}}toggleCaptions(t){let e=this.getPlayer(t?.target);if(!e)return;let i=e.state.textTracks,s=e.state.textTrack;if(s){let e=i.indexOf(s);this.changeTextTrackMode(e,"disabled",t),this.va=e}else{let e=this.va;i[e]&&tw(i[e])||(e=-1),-1===e&&(e=i.findIndex(t=>tw(t)&&t.default)),-1===e&&(e=i.findIndex(t=>tw(t))),e>=0&&this.changeTextTrackMode(e,"showing",t),this.va=-1}}ta(t,e,i){let s=new o.D(t,{bubbles:!0,composed:!0,detail:i,trigger:e}),r=e?.target||null;r&&r instanceof o.O&&(r=r.el);let n=!r||r===document||r===window||r===document.body||this.ua?.el&&r instanceof Node&&!this.ua.el.contains(r);r=n?this.b??this.getPlayer()?.el:r??this.b,this.ua?this.ua.canPlayQueue.xa(t,()=>r?.dispatchEvent(s)):r?.dispatchEvent(s)}wa(t){}}let tx=Math.min,tT=Math.max,tk=Math.round,tE=Math.floor,tP=t=>({x:t,y:t});function tS(t){return t.split("-")[0]}function tA(t){return["top","bottom"].includes(tS(t))?"y":"x"}function tO(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function tC(t,e,i){let s,{reference:r,floating:n}=t,a=tA(e),h="x"===tA(e)?"y":"x",l="y"===h?"height":"width",o=tS(e),u="y"===a,c=r.x+r.width/2-n.width/2,d=r.y+r.height/2-n.height/2,p=r[l]/2-n[l]/2;switch(o){case"top":s={x:c,y:r.y-n.height};break;case"bottom":s={x:c,y:r.y+r.height};break;case"right":s={x:r.x+r.width,y:d};break;case"left":s={x:r.x-n.width,y:d};break;default:s={x:r.x,y:r.y}}switch(e.split("-")[1]){case"start":s[h]-=p*(i&&u?-1:1);break;case"end":s[h]+=p*(i&&u?-1:1)}return s}let tj=async(t,e,i)=>{let{placement:s="bottom",strategy:r="absolute",middleware:n=[],platform:a}=i,h=n.filter(Boolean),l=await (null==a.isRTL?void 0:a.isRTL(e)),o=await a.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:c}=tC(o,s,l),d=s,p={},f=0;for(let i=0;i<h.length;i++){let{name:n,fn:b}=h[i],{x:m,y:g,data:y,reset:v}=await b({x:u,y:c,initialPlacement:s,placement:d,strategy:r,middlewareData:p,rects:o,platform:a,elements:{reference:t,floating:e}});if(u=null!=m?m:u,c=null!=g?g:c,p={...p,[n]:{...p[n],...y}},v&&f<=50){f++,"object"==typeof v&&(v.placement&&(d=v.placement),v.rects&&(o=!0===v.rects?await a.getElementRects({reference:t,floating:e,strategy:r}):v.rects),{x:u,y:c}=tC(o,d,l)),i=-1;continue}}return{x:u,y:c,placement:d,strategy:r,middlewareData:p}};function tR(t){return tF(t)?(t.nodeName||"").toLowerCase():"#document"}function tq(t){var e;return(null==t?void 0:null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function tD(t){var e;return null==(e=(tF(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function tF(t){return t instanceof Node||t instanceof tq(t).Node}function tN(t){return t instanceof Element||t instanceof tq(t).Element}function tL(t){return t instanceof HTMLElement||t instanceof tq(t).HTMLElement}function tI(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof tq(t).ShadowRoot)}function tV(t){let{overflow:e,overflowX:i,overflowY:s,display:r}=tH(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+i)&&!["inline","contents"].includes(r)}function tz(t){let e=tQ(),i=tH(t);return"none"!==i.transform||"none"!==i.perspective||!!i.containerType&&"normal"!==i.containerType||!e&&!!i.backdropFilter&&"none"!==i.backdropFilter||!e&&!!i.filter&&"none"!==i.filter||["transform","perspective","filter"].some(t=>(i.willChange||"").includes(t))||["paint","layout","strict","content"].some(t=>(i.contain||"").includes(t))}function tQ(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function t_(t){return["html","body","#document"].includes(tR(t))}function tH(t){return tq(t).getComputedStyle(t)}function tW(t){return tN(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function tU(t){if("html"===tR(t))return t;let e=t.assignedSlot||t.parentNode||tI(t)&&t.host||tD(t);return tI(e)?e.host:e}function tK(t,e,i){var s;void 0===e&&(e=[]),void 0===i&&(i=!0);let r=function t(e){let i=tU(e);return t_(i)?e.ownerDocument?e.ownerDocument.body:e.body:tL(i)&&tV(i)?i:t(i)}(t),n=r===(null==(s=t.ownerDocument)?void 0:s.body),a=tq(r);return n?e.concat(a,a.visualViewport||[],tV(r)?r:[],a.frameElement&&i?tK(a.frameElement):[]):e.concat(r,tK(r,[],i))}function tB(t){let e=tH(t),i=parseFloat(e.width)||0,s=parseFloat(e.height)||0,r=tL(t),n=r?t.offsetWidth:i,a=r?t.offsetHeight:s,h=tk(i)!==n||tk(s)!==a;return h&&(i=n,s=a),{width:i,height:s,$:h}}function tG(t){return tN(t)?t:t.contextElement}function tZ(t){let e=tG(t);if(!tL(e))return tP(1);let i=e.getBoundingClientRect(),{width:s,height:r,$:n}=tB(e),a=(n?tk(i.width):i.width)/s,h=(n?tk(i.height):i.height)/r;return a&&Number.isFinite(a)||(a=1),h&&Number.isFinite(h)||(h=1),{x:a,y:h}}let tX=tP(0);function tY(t){let e=tq(t);return tQ()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:tX}function tJ(t,e,i,s){var r;void 0===e&&(e=!1),void 0===i&&(i=!1);let n=t.getBoundingClientRect(),a=tG(t),h=tP(1);e&&(s?tN(s)&&(h=tZ(s)):h=tZ(t));let l=(void 0===(r=i)&&(r=!1),s&&(!r||s===tq(a))&&r)?tY(a):tP(0),o=(n.left+l.x)/h.x,u=(n.top+l.y)/h.y,c=n.width/h.x,d=n.height/h.y;if(a){let t=tq(a),e=s&&tN(s)?tq(s):s,i=t.frameElement;for(;i&&s&&e!==t;){let t=tZ(i),e=i.getBoundingClientRect(),s=tH(i),r=e.left+(i.clientLeft+parseFloat(s.paddingLeft))*t.x,n=e.top+(i.clientTop+parseFloat(s.paddingTop))*t.y;o*=t.x,u*=t.y,c*=t.x,d*=t.y,o+=r,u+=n,i=tq(i).frameElement}}return tO({width:c,height:d,x:o,y:u})}function t0(t){return tJ(tD(t)).left+tW(t).scrollLeft}function t1(t,e,i){let s;if("viewport"===e)s=function(t,e){let i=tq(t),s=tD(t),r=i.visualViewport,n=s.clientWidth,a=s.clientHeight,h=0,l=0;if(r){n=r.width,a=r.height;let t=tQ();(!t||t&&"fixed"===e)&&(h=r.offsetLeft,l=r.offsetTop)}return{width:n,height:a,x:h,y:l}}(t,i);else if("document"===e)s=function(t){let e=tD(t),i=tW(t),s=t.ownerDocument.body,r=tT(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),n=tT(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight),a=-i.scrollLeft+t0(t),h=-i.scrollTop;return"rtl"===tH(s).direction&&(a+=tT(e.clientWidth,s.clientWidth)-r),{width:r,height:n,x:a,y:h}}(tD(t));else if(tN(e))s=function(t,e){let i=tJ(t,!0,"fixed"===e),s=i.top+t.clientTop,r=i.left+t.clientLeft,n=tL(t)?tZ(t):tP(1),a=t.clientWidth*n.x,h=t.clientHeight*n.y,l=r*n.x,o=s*n.y;return{width:a,height:h,x:l,y:o}}(e,i);else{let i=tY(t);s={...e,x:e.x-i.x,y:e.y-i.y}}return tO(s)}function t2(t,e){return tL(t)&&"fixed"!==tH(t).position?e?e(t):t.offsetParent:null}function t5(t,e){let i=tq(t);if(!tL(t))return i;let s=t2(t,e);for(;s&&["table","td","th"].includes(tR(s))&&"static"===tH(s).position;)s=t2(s,e);return s&&("html"===tR(s)||"body"===tR(s)&&"static"===tH(s).position&&!tz(s))?i:s||function(t){let e=tU(t);for(;tL(e)&&!t_(e);){if(tz(e))return e;e=tU(e)}return null}(t)||i}let t6=async function(t){let{reference:e,floating:i,strategy:s}=t,r=this.getOffsetParent||t5,n=this.getDimensions;return{reference:function(t,e,i){let s=tL(e),r=tD(e),n="fixed"===i,a=tJ(t,!0,n,e),h={scrollLeft:0,scrollTop:0},l=tP(0);if(s||!s&&!n){if(("body"!==tR(e)||tV(r))&&(h=tW(e)),s){let t=tJ(e,!0,n,e);l.x=t.x+e.clientLeft,l.y=t.y+e.clientTop}else r&&(l.x=t0(r))}return{x:a.left+h.scrollLeft-l.x,y:a.top+h.scrollTop-l.y,width:a.width,height:a.height}}(e,await r(i),s),floating:{x:0,y:0,...await n(i)}}},t3={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:i,strategy:s}=t,r=tL(i),n=tD(i);if(i===n)return e;let a={scrollLeft:0,scrollTop:0},h=tP(1),l=tP(0);if((r||!r&&"fixed"!==s)&&(("body"!==tR(i)||tV(n))&&(a=tW(i)),tL(i))){let t=tJ(i);h=tZ(i),l.x=t.x+i.clientLeft,l.y=t.y+i.clientTop}return{width:e.width*h.x,height:e.height*h.y,x:e.x*h.x-a.scrollLeft*h.x+l.x,y:e.y*h.y-a.scrollTop*h.y+l.y}},getDocumentElement:tD,getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:s,strategy:r}=t,n="clippingAncestors"===i?function(t,e){let i=e.get(t);if(i)return i;let s=tK(t,[],!1).filter(t=>tN(t)&&"body"!==tR(t)),r=null,n="fixed"===tH(t).position,a=n?tU(t):t;for(;tN(a)&&!t_(a);){let e=tH(a),i=tz(a);i||"fixed"!==e.position||(r=null);let h=n?!i&&!r:!i&&"static"===e.position&&!!r&&["absolute","fixed"].includes(r.position)||tV(a)&&!i&&function t(e,i){let s=tU(e);return!(s===i||!tN(s)||t_(s))&&("fixed"===tH(s).position||t(s,i))}(t,a);h?s=s.filter(t=>t!==a):r=e,a=tU(a)}return e.set(t,s),s}(e,this.tj):[].concat(i),a=[...n,s],h=a[0],l=a.reduce((t,i)=>{let s=t1(e,i,r);return t.top=tT(s.top,t.top),t.right=tx(s.right,t.right),t.bottom=tx(s.bottom,t.bottom),t.left=tT(s.left,t.left),t},t1(e,h,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:t5,getElementRects:t6,getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return tB(t)},getScale:tZ,isElement:tN,isRTL:function(t){return"rtl"===tH(t).direction}},t4=(t,e,i)=>{let s=new Map,r={platform:t3,...i},n={...r.platform,tj:s};return tj(t,e,{...r,platform:n})};function t8(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}function t7(t,e){t.hasAttribute("aria-label")||(q?i():(0,o.e)(i));function i(){(0,o.m)(t,"aria-label",e())}}function t9(t,e,i){for(;e;){if(e===t)return!0;if(i?.(e))break;e=e.parentElement}return!1}function et(t,e){(0,o.l)(t,"pointerup",t=>{0===t.button&&e(t)}),(0,o.l)(t,"keydown",t=>{(0,o.F)(t)&&e(t)})}function ee(t){return(0,o.P)(t)&&(t.touches.length>1||t.changedTouches.length>1)}function ei(t){if(q)return t();let e=(0,o.R)(),i=window.requestAnimationFrame(()=>{(0,o.n)(t,e),i=-1});return()=>void window.cancelAnimationFrame(i)}function es(t,e,i,{offsetVarName:s,xOffset:r,yOffset:n,...a}){if(!t)return;let h=i.replace(" ","-").replace("-center","");if((0,o.Q)(t,"visibility",e?null:"hidden"),!e)return;let l=t=>i.includes("top")?`calc(-1 * ${t})`:t;return function(t,e,i,s){let r;void 0===s&&(s={});let{ancestorScroll:n=!0,ancestorResize:a=!0,elementResize:h="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:o=!1}=s,u=tG(t),c=n||a?[...u?tK(u):[],...tK(e)]:[];c.forEach(t=>{n&&t.addEventListener("scroll",i,{passive:!0}),a&&t.addEventListener("resize",i)});let d=u&&l?function(t,e){let i,s=null,r=tD(t);function n(){clearTimeout(i),s&&s.disconnect(),s=null}return!function a(h,l){void 0===h&&(h=!1),void 0===l&&(l=1),n();let{left:o,top:u,width:c,height:d}=t.getBoundingClientRect();if(h||e(),!c||!d)return;let p=tE(u),f=tE(r.clientWidth-(o+c)),b=tE(r.clientHeight-(u+d)),m=tE(o),g={rootMargin:-p+"px "+-f+"px "+-b+"px "+-m+"px",threshold:tT(0,tx(1,l))||1},y=!0;function v(t){let e=t[0].intersectionRatio;if(e!==l){if(!y)return a();e?a(!1,e):i=setTimeout(()=>{a(!1,1e-7)},100)}y=!1}try{s=new IntersectionObserver(v,{...g,root:r.ownerDocument})}catch(t){s=new IntersectionObserver(v,g)}s.observe(t)}(!0),n}(u,i):null,p=-1,f=null;h&&(f=new ResizeObserver(t=>{let[s]=t;s&&s.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{f&&f.observe(e)})),i()}),u&&!o&&f.observe(u),f.observe(e));let b=o?tJ(t):null;return o&&function e(){let s=tJ(t);b&&(s.x!==b.x||s.y!==b.y||s.width!==b.width||s.height!==b.height)&&i(),b=s,r=requestAnimationFrame(e)}(),i(),()=>{c.forEach(t=>{n&&t.removeEventListener("scroll",i),a&&t.removeEventListener("resize",i)}),d&&d(),f&&f.disconnect(),f=null,o&&cancelAnimationFrame(r)}}(e,t,()=>{t4(e,t,{placement:h,...a}).then(({x:e,y:i})=>{Object.assign(t.style,{top:`calc(${i+"px"} + ${l(n?n+"px":`var(--${s}-y-offset, 0px)`)})`,left:`calc(${e+"px"} + ${r?r+"px":`var(--${s}-x-offset, 0px)`})`})})})}class er extends o.V{}class en extends er{constructor(){super(...arguments),this.ha=-2,this.ea=!1,this.ka=(0,o.s)(!1),this.ia=(0,o.s)(!1),this.fa=null,this.defaultDelay=2e3}get hideOnMouseLeave(){let{hideControlsOnMouseLeave:t}=this.$props;return this.ka()||t()}set hideOnMouseLeave(t){this.ka.set(t)}get showing(){return this.$state.controlsVisible()}show(t=0,e){this.ja(),this.ea||this.ga(!0,t,e)}hide(t=this.defaultDelay,e){this.ja(),this.ea||this.ga(!1,t,e)}pause(t){this.ea=!0,this.ja(),this.ga(!0,0,t)}resume(t){this.ea=!1,this.$state.paused()||this.ga(!1,this.defaultDelay,t)}onConnect(){(0,o.e)(this.na.bind(this)),(0,o.e)(this.oa.bind(this));let t=this.pa.bind(this),e=this.qa.bind(this);this.listen("can-play",t=>this.show(0,t)),this.listen("play",t),this.listen("pause",e),this.listen("autoplay-fail",e)}na(){let{started:t,pointer:e,paused:i}=this.$state;if(!t()||"fine"!==e())return;let s=this.hideOnMouseLeave;s&&this.ia()||(0,o.e)(()=>{i()||this.listen("pointermove",this.la.bind(this))}),s&&(this.listen("mouseenter",this.ra.bind(this)),this.listen("mouseleave",this.sa.bind(this)))}oa(){let{paused:t,started:e,autoplayError:i}=this.$state;if(t()||i()&&!e())return;let s=this.la.bind(this);(0,o.e)(()=>{let t=this.$state.pointer();for(let e of["coarse"===t?"touchend":"pointerup","keydown"])this.listen(e,s,{passive:!1})})}pa(t){this.show(0,t),this.hide(void 0,t)}qa(t){this.show(0,t)}ra(t){this.ia.set(!1),this.show(0,t),this.hide(void 0,t)}sa(t){this.ia.set(!0),this.hide(0,t)}ja(){window.clearTimeout(this.ha),this.ha=-1}la(t){t.MEDIA_GESTURE||this.ea||ee(t)||((0,o.G)(t)&&("Escape"===t.key?(this.el?.focus(),this.fa=null):this.fa&&(t.preventDefault(),requestAnimationFrame(()=>{this.fa?.focus(),this.fa=null}))),this.show(0,t),this.hide(this.defaultDelay,t))}ga(t,e,i){if(0===e){this.ma(t,i);return}this.ha=window.setTimeout(()=>{this.scope&&this.ma(t&&!this.ea,i)},e)}ma(t,e){this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.fa=document.activeElement,requestAnimationFrame(()=>this.el?.focus())),this.dispatch("controls-change",{detail:t,trigger:e}))}}class ea{constructor(){this.priority=0,this.gg=!0,this.Ia=null,this.ya=null,this.fg=new Set}canRender(){return!0}attach(t){this.Ia=t,t.textTracks.onchange=this.ma.bind(this)}addTrack(t){this.fg.add(t),this.ig(t)}removeTrack(t){t[tb._a]?.remove?.(),t[tb._a]=null,this.fg.delete(t)}changeTrack(t){let e=t?.[tb._a];e&&"showing"!==e.track.mode&&(e.track.mode="showing"),this.ya=t}setDisplay(t){this.gg=t,this.ma()}detach(){for(let t of(this.Ia&&(this.Ia.textTracks.onchange=null),this.fg))this.removeTrack(t);this.fg.clear(),this.Ia=null,this.ya=null}ig(t){if(!this.Ia)return;let e=t[tb._a]??=this.jg(t);e instanceof HTMLElement&&(this.Ia.append(e),e.track.mode=e.default?"showing":"hidden")}jg(t){let e=document.createElement("track"),i=t.default||"showing"===t.mode,s=t.src&&"vtt"===t.type;return e.id=t.id,e.src=s?t.src:"https://cdn.jsdelivr.net/npm/vidstack@next/empty.vtt",e.label=t.label,e.kind=t.kind,e.default=i,t.language&&(e.srclang=t.language),i&&!s&&this.hg(t,e.track),e}hg(t,e){if(!(t.src&&"vtt"===t.type||e.cues?.length))for(let i of t.cues)e.addCue(i)}ma(t){for(let e of this.fg){let i=e[tb._a]?.track;if(!i)continue;if(!this.gg){i.mode="disabled";continue}let s="showing"===i.mode;s&&this.hg(e,i),e.setMode(s?"showing":"disabled",t)}}}class eh{constructor(t){this.Ma=t,this.Ia=null,this.Ha=[],this.Ja=!1,this.Ea=null,this.Fa=null;let e=t.textTracks;this.Ka=e,(0,o.e)(this.Na.bind(this)),(0,o.o)(this.P.bind(this)),(0,o.l)(e,"add",this.Oa.bind(this)),(0,o.l)(e,"remove",this.Pa.bind(this)),(0,o.l)(e,"mode-change",this.Ga.bind(this))}Na(){let{$state:t,$iosControls:e}=this.Ma;this.Ja=t.controls()||e(),this.Ga()}add(t){this.Ha.push(t),this.Ga()}remove(t){t.detach(),this.Ha.splice(this.Ha.indexOf(t),1),this.Ga()}Ra(t){requestAnimationFrame(()=>{if(this.Ia=t,t)for(let e of(this.Ea=new ea,this.Ea.attach(t),this.Ka))this.La(e);this.Ga()})}La(t){tw(t)&&this.Ea?.addTrack(t)}Qa(t){tw(t)&&this.Ea?.removeTrack(t)}Oa(t){this.La(t.detail)}Pa(t){this.Qa(t.detail)}Ga(){if(!this.Ia){this.P();return}let t=this.Ka.selected;if(this.Ja||t?.[tb.Sa]){this.Fa?.changeTrack(null),this.Ea?.setDisplay(!0),this.Ea?.changeTrack(t);return}if(this.Ea?.setDisplay(!1),this.Ea?.changeTrack(null),!t){this.Fa?.changeTrack(null);return}let e=this.Ha.sort((t,e)=>t.priority-e.priority).find(e=>e.canRender(t));this.Fa!==e&&(this.Fa?.detach(),e?.attach(this.Ia),this.Fa=e??null),e?.changeTrack(t)}P(){this.Ea?.detach(),this.Ea=null,this.Fa?.detach(),this.Fa=null}}class TextTrackList extends T{constructor(){super(...arguments),this.Za=!1,this.gb={},this.hb=this.ib.bind(this)}get selected(){let t=this.d.find(t=>"showing"===t.mode&&tw(t));return t??null}add(t,e){let i=t instanceof TextTrack,s=i?t:new TextTrack(t);return this.gb[t.kind]&&t.default&&delete t.default,s.addEventListener("mode-change",this.hb),this[x.h](s,e),s[tb.fb]=this[tb.fb],this.Za&&s[tb.Za](),t.default&&(this.gb[t.kind]=s,s.mode="showing"),this}remove(t,e){if(this.d.includes(t))return t===this.gb[t.kind]&&delete this.gb[t.kind],t.mode="disabled",t[tb.eb]=null,t.removeEventListener("mode-change",this.hb),this[x.f](t,e),this}clear(t){for(let e of[...this.d])this.remove(e,t);return this}getById(t){return this.d.find(e=>e.id===t)??null}getByKind(t){let e=Array.isArray(t)?t:[t];return this.d.filter(t=>e.includes(t.kind))}[tb.Za](){if(!this.Za){for(let t of this.d)t[tb.Za]();this.Za=!0}}ib(t){let e=t.detail;if("showing"===e.mode){let t=tw(e)?["captions","subtitles"]:[e.kind];for(let i of this.d)"showing"===i.mode&&i!=e&&t.includes(i.kind)&&(i.mode="disabled")}this.dispatchEvent(new o.D("mode-change",{detail:t.detail,trigger:t}))}}let el=Symbol(0);class eo extends T{get selected(){return this.d.find(t=>t.selected)??null}get selectedIndex(){return this.d.findIndex(t=>t.selected)}[x.i](t,e){this[x.$](t,!1,e)}[x.h](t,e){t[el]=!1,Object.defineProperty(t,"selected",{get(){return this[el]},set:e=>{this.readonly||(this[x.ca]?.(),this[x.$](t,e))}}),super[x.h](t,e)}[x.$](t,e,i){if(e===t?.[el])return;let s=this.selected;t&&(t[el]=e);let r=e?s!==t:s===t;r&&(s&&(s[el]=!1),this.dispatchEvent(new o.D("change",{detail:{prev:s,current:this.selected},trigger:i})))}}class eu extends eo{getById(t){return""===t?null:this.d.find(e=>e.id===t)??null}}let ec=eval,ed=/:\s+'?"?(.*?)'?"?\)/g,ep=/\s+not\s+/g,ef=/\s+and\s+/g,eb=/\s+or\s+/g,em=/(\d)px/g,eg=class extends o.H{constructor(t,e){super(),this.jb=(0,o.s)("true"),this.kb=new Set,this.lb=(0,o.s)(!0),this.$matches=(0,o.T)(()=>{let t=this.jb();if("never"===t)return!1;for(let e of this.kb){let i=this.mb[e](),s=(0,o.b)(i)?`'${i}'`:i+"";t=t.replace((0,o.h)(e),s)}return ec(`!!(${t})`)&&this.lb()}),this.nb=e,this.mb=t,(0,o.U)(t=>{(0,o.e)(this.ob.bind(this)),(0,o.e)(this.pb.bind(this)),this.qb=t})}get query(){return(0,o.W)(this.nb)}get matches(){return this.$matches()}ob(){let t=this.query;if(""===t)return;if("never"===t){this.jb.set(t);return}let e=t.trim().split(/\s*,\s*/g),i=e.filter(t=>t.startsWith("@media")).join(","),s=e.filter(t=>!t.startsWith("@media"));if(i.length){let t=window.matchMedia(i.replace(/@media\s/g,"")),e=()=>void this.lb.set(t.matches);e(),(0,o.l)(t,"change",e)}if(s.length){let t=this.rb(s),e=Object.keys(Y.record);for(let i of t.matchAll(/\(([-a-zA-Z]+)\s/g)){let t=(0,o.X)(i[1]);e.includes(t)&&this.kb.add(t)}this.jb.set(t)}return()=>{this.kb.clear(),this.jb.set("true"),this.lb.set(!0)}}pb(){this.$matches(),this.dispatchEvent(new Event("change"))}rb(t){return t.map(t=>"("+t.replace(ed,' == "$1")').replace(ep,"!").replace(ef," && ").replace(eb," || ").replace(em,"$1").trim()+")").join(" || ")}destroy(){this.qb()}};eg.create=t=>{let e=ti();return new eg(e.$state,t)};let ey=eg,ev=Symbol(0),ew=Symbol(0),e$={tb:ev,ub:ew};class eM extends eo{constructor(){super(...arguments),this.sb=!1,this.switch="current"}get auto(){return this.sb||this.readonly}[x.ca](){this[e$.tb](!1)}[x.k](t){this[e$.tb](!1,t)}autoSelect(t){this.readonly||this.sb||!this[e$.ub]||(this[e$.ub]?.(),this[e$.tb](!0,t))}[e$.tb](t,e){this.sb!==t&&(this.sb=t,this.dispatchEvent(new o.D("auto-change",{detail:t,trigger:e})))}}function ex(t){return t?.$$PROVIDER_TYPE==="AUDIO"}function eT(t){return t?.$$PROVIDER_TYPE==="VIDEO"}function ek(t){return t?.$$PROVIDER_TYPE==="HLS"}function eE(t){return t?.$$PROVIDER_TYPE==="YOUTUBE"}function eP(t){return t?.$$PROVIDER_TYPE==="VIMEO"}function eS(t){return!q&&t instanceof HTMLAudioElement}function eA(t){return!q&&t instanceof HTMLVideoElement}function eO(t){return eS(t)||eA(t)}function eC(t){return!q&&t instanceof HTMLIFrameElement}let ej={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},eR=new Set(["Shift","Alt","Meta","Control"]),eq='input, textarea, select, [contenteditable], [role^="menuitem"]';class eD extends er{constructor(t){super(),this.Ma=t,this.wb=null}onConnect(){(0,o.e)(this.Ab.bind(this))}Ab(){let{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;let i="player"===e()?this.el:document,s=(0,o.s)(!1);i===this.el?(this.listen("focusin",()=>s.set(!0)),this.listen("focusout",t=>{this.el.contains(t.target)||s.set(!1)})):((0,o.p)(s)||s.set(document.querySelector("[data-media-player]")===this.el),(0,o.l)(document,"focusin",t=>{let e=t.composedPath().find(t=>t instanceof Element&&"media-player"===t.localName);void 0!==e&&s.set(this.el===e)})),(0,o.e)(()=>{s()&&((0,o.l)(i,"keyup",this.Bb.bind(this)),(0,o.l)(i,"keydown",this.Cb.bind(this)),(0,o.l)(i,"keydown",this.Db.bind(this),{capture:!0}))})}Bb(t){let e=document.activeElement;if(!t.key||!this.$state.canSeek()||e?.matches(eq))return;let{method:i,value:s}=this.xb(t);if(!(0,o.b)(s)&&!(0,o.J)(s)){s?.callback(t);return}if(i?.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this.wb?(this.zb(t,"seekForward"===i),this.wb=null):(this.Ma.remote.seek(this.yb,t),this.yb=void 0)),i?.startsWith("volume")){let e=this.el.querySelector("[data-media-volume-slider]");e?.dispatchEvent(new KeyboardEvent("keyup",{key:"volumeUp"===i?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}}Cb(t){if(!t.key||eR.has(t.key))return;let e=document.activeElement;if(e?.matches(eq)||(0,o.F)(t)&&e?.matches('button, [role="button"]'))return;let{method:i,value:s}=this.xb(t);if(!(0,o.b)(s)&&!(0,o.J)(s)){s?.callback(t);return}if(!i&&!t.metaKey&&/[0-9]/.test(t.key)){t.preventDefault(),t.stopPropagation(),this.Ma.remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(i)switch(t.preventDefault(),t.stopPropagation(),i){case"seekForward":case"seekBackward":this.Eb(t,i,"seekForward"===i);break;case"volumeUp":case"volumeDown":let r=this.el.querySelector("[data-media-volume-slider]");if(r)r.dispatchEvent(new KeyboardEvent("keydown",{key:"volumeUp"===i?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{let e=t.shiftKey?.1:.05;this.Ma.remote.changeVolume(this.$state.volume()+("volumeUp"===i?+e:-e),t)}break;case"toggleFullscreen":this.Ma.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":let n=this.$state.playbackRate();this.Ma.remote.changePlaybackRate(Math.max(.25,Math.min(2,n+("speedUp"===i?.25:-.25))),t);break;default:this.Ma.remote[i]?.(t)}}Db(t){eO(t.target)&&this.xb(t).method&&t.preventDefault()}xb(t){let e={...this.$props.keyShortcuts(),...this.Ma.ariaKeys},i=Object.keys(e).find(i=>{let s=e[i],r=(0,o.J)(s)?s.join(" "):(0,o.b)(s)?s:s?.keys;return(o.J(r)?r:r?.split(" "))?.some(e=>e.replace(/Shift\+(\d)/g,(t,e)=>eF[e-1]).replace(/Control/g,"Ctrl").split("+").every(e=>eR.has(e)?t[e.toLowerCase()+"Key"]:t.key===e.replace("Space"," ")))});return{method:i,value:i?e[i]:null}}Fb(t,e){let i=t.shiftKey?10:5;return this.yb=Math.max(0,Math.min((this.yb??this.$state.currentTime())+("seekForward"===e?+i:-i),this.$state.duration()))}zb(t,e){this.wb?.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}Eb(t,e,i){this.$state.canSeek()&&(this.wb||(this.wb=this.el.querySelector("[data-media-time-slider]")),this.wb?this.zb(t,i):this.Ma.remote.seeking(this.Fb(t,e),t))}}let eF=["!","@","#","$","%","^","&","*","(",")"];class eN extends o.V{constructor(t){super(),this.vb=t}onAttach(t){let{$props:e,ariaKeys:i}=ti(),s=t.getAttribute("aria-keyshortcuts");if(s){i[this.vb]=s,q||(0,o.o)(()=>{delete i[this.vb]});return}let r=e.keyShortcuts()[this.vb];if(r){let e=(0,o.J)(r)?r.join(" "):(0,o.b)(r)?r:r?.keys;t.setAttribute("aria-keyshortcuts",(0,o.J)(e)?e.join(" "):e)}}}let eL=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,eI=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp4","audio/webm","audio/flac"]),eV=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,ez=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),eQ=/\.(m3u8)($|\?)/i,e_=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]);function eH({src:t,type:e}){return(0,o.b)(t)&&eQ.test(t)||e_.has(e)}function eW(t){return!q&&void 0!==window.MediaStream&&t instanceof window.MediaStream}class eU{canPlay({src:t,type:e}){return(0,o.b)(t)?eL.test(t)||eI.has(e)||t.startsWith("blob:")&&"audio/object"===e:"audio/object"===e}mediaType(){return"audio"}async load(){if(q)throw Error("[vidstack] can not load audio provider server-side");return new(await i.e(879).then(i.bind(i,7879))).AudioProvider(this.target)}}class eK{canPlay(t){return(0,o.b)(t.src)?eV.test(t.src)||ez.has(t.type)||t.src.startsWith("blob:")&&"video/object"===t.type||eH(t)&&(q||Q()):"video/object"===t.type}mediaType(){return"video"}async load(t){if(q)throw Error("[vidstack] can not load video provider server-side");return new(await i.e(214).then(i.bind(i,6214))).VideoProvider(this.target,t)}}class eB{canPlay(t){return(0,o.b)(t.src)&&"video/youtube"===t.type}mediaType(){return"video"}async load(t){if(q)throw Error("[vidstack] can not load youtube provider server-side");return new(await i.e(586).then(i.bind(i,3586))).YouTubeProvider(this.target)}}let eG=class t extends eK{canPlay(e){return t.supported&&eH(e)}async load(t){if(q)throw Error("[vidstack] can not load hls provider server-side");return new(await i.e(584).then(i.bind(i,1584))).HLSProvider(this.target,t)}};eG.supported=U();let eZ=eG;class eX{canPlay(t){return(0,o.b)(t.src)&&"video/vimeo"===t.type}mediaType(){return"video"}async load(t){if(q)throw Error("[vidstack] can not load vimeo provider server-side");return new(await i.e(319).then(i.bind(i,8319))).VimeoProvider(this.target)}}let eY=Symbol(0),eJ=["autoplay","canFullscreen","canPictureInPicture","canLoad","canPlay","canSeek","ended","fullscreen","loop","live","liveEdge","mediaType","muted","paused","pictureInPicture","playing","playsinline","seeking","started","streamType","viewType","waiting"];class e0 extends er{constructor(t){super(),this.xh=t}async onAttach(t){if(q)return;let e=this.$props.load();if("eager"===e)requestAnimationFrame(this.xh);else if("idle"===e)(0,o.Y)(this.xh);else if("visible"===e){let e=new IntersectionObserver(t=>{this.scope&&t[0].isIntersecting&&(e.disconnect(),this.xh())});return e.observe(t),e.disconnect.bind(e)}}}class e1{constructor(t,e){this.mc=t,this.Ma=e,this.Pb=(t,...e)=>{q||this.mc(new o.D(t,{detail:e?.[0],trigger:e?.[1]}))}}async Og(t,e){if(q)return;let{$state:i,logger:s}=this.Ma;if((0,o.p)(i.canPlay))return;let r={duration:t?.duration??(0,o.p)(i.duration),seekable:t?.seekable??(0,o.p)(i.seekable),buffered:t?.buffered??(0,o.p)(i.buffered),provider:(0,o.p)(this.Ma.$provider)};this.Pb("can-play",r,e),(0,o.K)(),i.canPlay()&&i.autoplay()&&!i.started()&&await this.yh(e)}async yh(t){let{player:e,$state:i}=this.Ma;i.autoplaying.set(!0);let s=new o.D("autoplay-attempt",{trigger:t});try{await e.play(s)}catch(t){}}}class e2{constructor(){this.Ah=new Map}xa(t,e){this.Ah.has(t)||this.Ah.set(t,new Set),this.Ah.get(t).add(e)}yi(t,e){let i=this.Ah.get(t);if(i)for(let t of i)e(t);this.Ah.delete(t)}Dh(t){this.Ah.delete(t)}Di(t){return this.Ah.get(t)?.size??0}j(){this.Ah.clear()}}function e5(t){return t instanceof Error?t:Error(JSON.stringify(t))}class e6 extends er{constructor(t,e,i){super(),this.Tb=t,this.zh=e,this.Ma=i,this.Bh=!1,this.Qb=i.$provider,this.pc=new en,this.Ch=new O,this.fd=new B}onAttach(){this.listen("fullscreen-change",this.n.bind(this))}onConnect(){let t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),e=this.Jh.bind(this);for(let i of t)i.startsWith("media-")&&this.listen(i,e);(0,o.e)(this.Kh.bind(this)),(0,o.e)(this.Lh.bind(this)),(0,o.e)(this.Mh.bind(this))}Jh(t){t.stopPropagation(),(0,o.p)(this.Qb)&&this[t.type]?.(t)}async kc(t){if(q)return;let{canPlay:e,paused:i,ended:s,autoplaying:r,seekableStart:n}=this.$state;if((0,o.p)(i)){t?.type==="media-play-request"&&this.zh.Ah.xa("play",t);try{let t=(0,o.p)(this.Qb);return e3(t,(0,o.p)(e)),(0,o.p)(s)&&t.setCurrentTime(n()+.1),await t.play()}catch(i){let e=this.createEvent("play-fail",{detail:e5(i),trigger:t});throw e.autoplay=r(),this.Tb.mc(e),i}}}async jc(t){if(q)return;let{canPlay:e,paused:i}=this.$state;if((0,o.p)(i))return;t?.type==="media-pause-request"&&this.zh.Ah.xa("pause",t);let s=(0,o.p)(this.Qb);return e3(s,(0,o.p)(e)),s.pause()}uc(t){if(q)return;let{canPlay:e,live:i,liveEdge:s,canSeek:r,liveSyncPosition:n,seekableEnd:a,userBehindLiveEdge:h}=this.$state;if(h.set(!1),(0,o.p)(()=>!i()||s()||!r()))return;let l=(0,o.p)(this.Qb);e3(l,(0,o.p)(e)),l.setCurrentTime(n()??a()-2)}async qc(t="prefer-media",e){if(q)return;let i=this.Fh(t);if(e4(t,i),!i.active)return(0,o.p)(this.$state.pictureInPicture)&&(this.Bh=!0,await this.tc(e)),e?.type==="media-enter-fullscreen-request"&&this.zh.Ah.xa("fullscreen",e),i.enter()}async rc(t="prefer-media",e){if(q)return;let i=this.Fh(t);if(e4(t,i),i.active){e?.type==="media-exit-fullscreen-request"&&this.zh.Ah.xa("fullscreen",e);try{let t=await i.exit();return this.Bh&&(0,o.p)(this.$state.canPictureInPicture)&&await this.sc(),t}finally{this.Bh=!1}}}Fh(t){let e=(0,o.p)(this.Qb);return"prefer-media"===t&&this.Ch.supported||"media"===t?this.Ch:e?.fullscreen}async sc(t){if(!q&&(this.Gh(),!this.$state.pictureInPicture()))return t?.type==="media-enter-pip-request"&&this.zh.Ah.xa("pip",t),await this.Qb().pictureInPicture.enter()}async tc(t){if(!q&&(this.Gh(),this.$state.pictureInPicture()))return t?.type==="media-exit-pip-request"&&this.zh.Ah.xa("pip",t),await this.Qb().pictureInPicture.exit()}Gh(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}Kh(){this.pc.defaultDelay=this.$props.controlsDelay()}Lh(){let{canLoad:t,canFullscreen:e}=this.$state,i=this.Ch.supported||this.Qb()?.fullscreen?.supported||!1;t()&&(0,o.p)(e)===i||e.set(i)}Mh(){let{canLoad:t,canPictureInPicture:e}=this.$state,i=this.Qb()?.pictureInPicture?.supported||!1;t()&&(0,o.p)(e)===i||e.set(i)}"media-audio-track-change-request"(t){if(this.Ma.audioTracks.readonly)return;let e=t.detail,i=this.Ma.audioTracks[e];i&&(this.zh.Ah.xa("audioTrack",t),i.selected=!0)}async "media-enter-fullscreen-request"(t){try{await this.qc(t.detail,t)}catch(e){this.o(e,t)}}async "media-exit-fullscreen-request"(t){try{await this.rc(t.detail,t)}catch(e){this.o(e,t)}}async n(t){let e=(0,o.p)(this.$props.fullscreenOrientation),i=t.detail;if(!(0,o.i)(e)&&this.fd.supported){if(i){if(this.fd.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.fd.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}}o(t,e){this.Tb.mc(this.createEvent("fullscreen-error",{detail:e5(t)}))}async "media-orientation-lock-request"(t){try{this.zh.Ah.xa("orientation",t),await this.fd.lock(t.detail)}catch(t){this.zh.Ah.Dh("orientation")}}async "media-orientation-unlock-request"(t){try{this.zh.Ah.xa("orientation",t),await this.fd.unlock()}catch(t){this.zh.Ah.Dh("orientation")}}async "media-enter-pip-request"(t){try{await this.sc(t)}catch(e){this.Hh(e,t)}}async "media-exit-pip-request"(t){try{await this.tc(t)}catch(e){this.Hh(e,t)}}Hh(t,e){this.Tb.mc(this.createEvent("picture-in-picture-error",{detail:e5(t)}))}"media-live-edge-request"(t){let{live:e,liveEdge:i,canSeek:s}=this.$state;if(!(!e()||i())&&s()){this.zh.Ah.xa("seeked",t);try{this.uc()}catch(t){}}}async "media-loop-request"(t){try{this.zh.Ih=!0,this.zh.Eh=!0,await this.kc(t)}catch(t){this.zh.Ih=!1,this.zh.Eh=!1}}async "media-pause-request"(t){if(!this.$state.paused())try{await this.jc(t)}catch(t){this.zh.Ah.Dh("pause")}}async "media-play-request"(t){if(this.$state.paused())try{await this.kc(t)}catch(t){}}"media-rate-change-request"(t){let{playbackRate:e,canSetPlaybackRate:i}=this.$state;if(e()===t.detail||!i())return;let s=this.Qb();s?.setPlaybackRate&&(this.zh.Ah.xa("rate",t),s.setPlaybackRate(t.detail))}"media-quality-change-request"(t){if(this.Ma.qualities.readonly)return;this.zh.Ah.xa("quality",t);let e=t.detail;if(e<0)this.Ma.qualities.autoSelect(t);else{let t=this.Ma.qualities[e];t&&(t.selected=!0)}}"media-pause-controls-request"(t){this.zh.Ah.xa("controls",t),this.pc.pause(t)}"media-resume-controls-request"(t){this.zh.Ah.xa("controls",t),this.pc.resume(t)}"media-seek-request"(t){let{seekableStart:e,seekableEnd:i,ended:s,canSeek:r,live:n,userBehindLiveEdge:a}=this.$state;s()&&(this.zh.Eh=!0),this.zh.Eb=!1,this.zh.Ah.Dh("seeking");let h=Math.min(Math.max(e()+.1,t.detail),i()-.1);Number.isFinite(h)&&r()&&(this.zh.Ah.xa("seeked",t),this.Qb().setCurrentTime(h),n()&&t.isOriginTrusted&&Math.abs(i()-h)>=2&&a.set(!0))}"media-seeking-request"(t){this.zh.Ah.xa("seeking",t),this.$state.seeking.set(!0),this.zh.Eb=!0}"media-start-loading"(t){this.$state.canLoad()||(this.zh.Ah.xa("load",t),this.Tb.mc(this.createEvent("can-load")))}"media-text-track-change-request"(t){let{index:e,mode:i}=t.detail,s=this.Ma.textTracks[e];s&&(this.zh.Ah.xa("textTrack",t),s.setMode(i,t))}"media-mute-request"(t){this.$state.muted()||(this.zh.Ah.xa("volume",t),this.Qb().setMuted(!0))}"media-unmute-request"(t){let{muted:e,volume:i}=this.$state;e()&&(this.zh.Ah.xa("volume",t),this.Ma.$provider().setMuted(!1),0===i()&&(this.zh.Ah.xa("volume",t),this.Qb().setVolume(.25)))}"media-volume-change-request"(t){let{muted:e,volume:i}=this.$state,s=t.detail;i()!==s&&(this.zh.Ah.xa("volume",t),this.Qb().setVolume(s),s>0&&e()&&(this.zh.Ah.xa("volume",t),this.Qb().setMuted(!1)))}}function e3(t,e){if(!t||!e)throw Error("[vidstack] media not ready")}function e4(t,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}class e8{constructor(){this.Eb=!1,this.Ih=!1,this.Eh=!1,this.Ah=new e2}}var e7=function(t,e,i){var s=null,r=null,n=function(){s&&(clearTimeout(s),r=null,s=null)},a=function(){if(!e)return t.apply(this,arguments);var a=this,h=arguments,l=i&&!s;if(n(),r=function(){t.apply(a,h)},s=setTimeout(function(){if(s=null,!l){var t=r;return r=null,t()}},e),l)return r()};return a.cancel=n,a.flush=function(){var t=r;n(),t&&t()},a},e9=function(t,e,i){var s=null,r=null,n=i&&i.leading,a=i&&i.trailing;null==n&&(n=!0),null==a&&(a=!n),!0==n&&(a=!1);var h=function(){s&&(clearTimeout(s),s=null)},l=function(){var i=n&&!s,h=this,l=arguments;if(r=function(){return t.apply(h,l)},s||(s=setTimeout(function(){if(s=null,a)return r()},e)),i)return i=!1,r()};return l.cancel=h,l.flush=function(){var t=r;h(),t&&t()},l};let it=new Set(["autoplay","autoplay-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class ie extends er{constructor(t,e){super(),this.zh=t,this.Ma=e,this.di=new Map,this.ii=!1,this.gi=!1,this.seeking=e9(t=>{let{seeking:e,currentTime:i,paused:s}=this.$state;e.set(!0),i.set(t.detail),this.ei("seeking",t),s()&&(this.hi=t,this.ji())},150,{leading:!0}),this.ji=e7(()=>{if(!this.hi)return;this.ii=!0;let{waiting:t,playing:e}=this.$state;t.set(!0),e.set(!1);let i=this.createEvent("waiting",{trigger:this.hi});this.di.set("waiting",i),this.dispatch(i),this.hi=void 0,this.ii=!1},300)}onAttach(t){t.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(t){this.qi(),this.ri(),this.si(),this.ti(),(0,o.o)(this.ui.bind(this))}mc(t){if(!this.scope)return;let e=t.type;this[t.type]?.(t),q||(it.has(e)&&this.di.set(e,t),this.dispatch(t))}ti(){this.gi&&(this.Ma.$provider()?.paused&&requestAnimationFrame(()=>{this.scope&&this.Ma.remote.play(new o.D("dom-connect"))}),this.gi=!1)}ui(){this.gi||(this.gi=!this.Ma.$state.paused(),this.Ma.$provider()?.pause())}fi(){this.li(),this.zh.Eh=!1,this.zh.Ih=!1,this.ii=!1,this.hi=void 0,this.di.clear()}ei(t,e){this.zh.Ah.yi(t,t=>{e.request=t,e.triggers.add(t)})}qi(){this.ki(),this.mi();let t=this.Ma.textTracks;(0,o.l)(t,"add",this.ki.bind(this)),(0,o.l)(t,"remove",this.ki.bind(this)),(0,o.l)(t,"mode-change",this.mi.bind(this))}ri(){let t=this.Ma.qualities;(0,o.l)(t,"add",this.fh.bind(this)),(0,o.l)(t,"remove",this.fh.bind(this)),(0,o.l)(t,"change",this._g.bind(this)),(0,o.l)(t,"auto-change",this.vi.bind(this)),(0,o.l)(t,"readonly-change",this.wi.bind(this))}si(){let t=this.Ma.audioTracks;(0,o.l)(t,"add",this.ni.bind(this)),(0,o.l)(t,"remove",this.ni.bind(this)),(0,o.l)(t,"change",this.xi.bind(this))}ki(t){let{textTracks:e}=this.$state;e.set(this.Ma.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}mi(t){t&&this.ei("textTrack",t);let e=this.Ma.textTracks.selected,{textTrack:i}=this.$state;i()!==e&&(i.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}ni(t){let{audioTracks:e}=this.$state;e.set(this.Ma.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}xi(t){let{audioTrack:e}=this.$state;e.set(this.Ma.audioTracks.selected),this.ei("audioTrack",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}fh(t){let{qualities:e}=this.$state;e.set(this.Ma.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}_g(t){let{quality:e}=this.$state;e.set(this.Ma.qualities.selected),this.ei("quality",t),this.dispatch("quality-change",{detail:e(),trigger:t})}vi(){this.$state.autoQuality.set(this.Ma.qualities.auto)}wi(){this.$state.canSetQuality.set(!this.Ma.qualities.readonly)}"provider-change"(t){let e=this.Ma.$provider(),i=t.detail;e?.type!==i?.type&&(e?.destroy?.(),e?.scope?.dispose(),this.Ma.$provider.set(t.detail),e&&null===t.detail&&this.oi(t))}"provider-loader-change"(t){}autoplay(t){this.$state.autoplayError.set(null)}"autoplay-fail"(t){this.$state.autoplayError.set(t.detail),this.fi()}"can-load"(t){this.$state.canLoad.set(!0),this.di.set("can-load",t),this.ei("load",t),this.Ma.textTracks[tb.Za]()}"media-type-change"(t){let e=this.di.get("source-change");e&&t.triggers.add(e);let i=this.$state.viewType();this.$state.mediaType.set(t.detail);let s=this.$state.providedViewType(),r="unknown"===s?t.detail:s;i!==r&&(q?this.$state.inferredViewType.set(r):setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:r,trigger:t}))})},0))}"stream-type-change"(t){let e=this.di.get("source-change");e&&t.triggers.add(e);let{streamType:i,inferredStreamType:s}=this.$state;s.set(t.detail),t.detail=i()}"rate-change"(t){this.$state.playbackRate.set(t.detail),this.ei("rate",t)}"sources-change"(t){this.$state.sources.set(t.detail)}"source-change"(t){let e=this.di.get("sources-change");e&&t.triggers.add(e),this.oi(t),this.di.set(t.type,t),this.$state.source.set(t.detail),this.el?.setAttribute("aria-busy","true")}oi(t){this.Ma.audioTracks[x.j](t),this.Ma.qualities[x.j](t),this.fi(),tt(this.Ma.$state)}abort(t){let e=this.di.get("source-change");e&&t.triggers.add(e);let i=this.di.get("can-load");i&&!t.triggers.hasType("can-load")&&t.triggers.add(i)}"load-start"(t){let e=this.di.get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);let e=this.di.get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){let e=this.di.get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){let e=this.di.get("load-start");e&&t.triggers.add(e)}"can-play"(t){let e=this.di.get("loaded-metadata");e&&t.triggers.add(e),this.pi(t.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(t){this.pi(t.detail);let e=this.di.get("can-play");e&&t.triggers.add(e)}pi(t){let{seekable:e,seekableEnd:i,buffered:s,duration:r,canPlay:n}=this.$state;n.set(!0),s.set(t.buffered),e.set(t.seekable),r.set(i())}"duration-change"(t){let{live:e,duration:i}=this.$state,s=t.detail;e()||i.set(Number.isNaN(s)?0:s)}progress(t){let{buffered:e,seekable:i,live:s,duration:r,seekableEnd:n}=this.$state,a=t.detail;e.set(a.buffered),i.set(a.seekable),s()&&(r.set(n),this.dispatch("duration-change",{detail:n(),trigger:t}))}play(t){let{paused:e,autoplayError:i,ended:s,autoplaying:r,playsinline:n,pointer:a,muted:h,viewType:l}=this.$state;if(t.autoplay=r(),this.zh.Ih||!e()){t.stopImmediatePropagation();return}let o=this.di.get("waiting");o&&t.triggers.add(o),this.ei("play",t),this.di.set("play",t),e.set(!1),i.set(null),t.autoplay&&(this.mc(this.createEvent("autoplay",{detail:{muted:h()},trigger:t})),r.set(!1)),(s()||this.zh.Eh)&&(this.zh.Eh=!1,s.set(!1),this.mc(this.createEvent("replay",{trigger:t}))),n()||"video"!==l()||"coarse"!==a()||this.Ma.remote.enterFullscreen("prefer-media",t)}"play-fail"(t){let{muted:e,autoplaying:i}=this.$state,s=this.di.get("play");s&&t.triggers.add(s),this.ei("play",t);let{paused:r,playing:n}=this.$state;r.set(!0),n.set(!1),this.fi(),this.di.set("play-fail",t),t.autoplay&&(this.mc(this.createEvent("autoplay-fail",{detail:{muted:e(),error:t.detail},trigger:t})),i.set(!1))}playing(t){let e=this.di.get("play"),i=this.di.get("seeked");e?t.triggers.add(e):i&&t.triggers.add(i),setTimeout(()=>this.fi(),0);let{paused:s,playing:r,live:n,liveSyncPosition:a,seekableEnd:h,started:l,currentTime:o,seeking:u,ended:c}=this.$state;if(s.set(!1),r.set(!0),u.set(!1),c.set(!1),this.zh.Ih){t.stopImmediatePropagation(),this.zh.Ih=!1;return}if(n()&&!l()&&0===o()){let t=a()??h()-2;Number.isFinite(t)&&this.Ma.$provider().setCurrentTime(t)}this.started(t)}started(t){let{started:e}=this.$state;e()||(e.set(!0),this.mc(this.createEvent("started",{trigger:t})))}pause(t){if(this.el?.isConnected||(this.gi=!0),this.zh.Ih){t.stopImmediatePropagation();return}let e=this.di.get("seeked");e&&t.triggers.add(e),this.ei("pause",t);let{paused:i,playing:s}=this.$state;i.set(!0),s.set(!1),this.fi()}"time-update"(t){let{currentTime:e,played:i,waiting:s}=this.$state,r=t.detail;for(let n of(e.set(r.currentTime),i.set(r.played),s.set(!1),this.Ma.textTracks))n[tb.Ya](r.currentTime,t)}"volume-change"(t){let{volume:e,muted:i}=this.$state,s=t.detail;e.set(s.volume),i.set(s.muted||0===s.volume),this.ei("volume",t)}seeked(t){let{seeking:e,currentTime:i,paused:s,duration:r,ended:n}=this.$state;if(this.zh.Eb)e.set(!0),t.stopImmediatePropagation();else if(e()){let a=this.di.get("waiting");a&&t.triggers.add(a);let h=this.di.get("seeking");h&&!t.triggers.hasType("seeking")&&t.triggers.add(h),s()&&this.li(),e.set(!1),t.detail!==r()&&n.set(!1),i.set(t.detail),this.ei("seeked",t);let l=h?.originEvent;l?.isTrusted&&!/seek/.test(l.type)&&this.started(t)}}waiting(t){this.ii||this.zh.Eb||(t.stopImmediatePropagation(),this.hi=t,this.ji())}end(t){let{loop:e}=this.$state;if(e()){setTimeout(()=>{requestAnimationFrame(()=>{this.dispatch("media-loop-request",{trigger:t})})},0);return}this.Kg(t)}Kg(t){let{paused:e,seeking:i,ended:s,duration:r}=this.$state;e()||this.dispatch("pause",{trigger:t}),i()&&this.dispatch("seeked",{detail:r(),trigger:t}),s.set(!0),this.fi(),this.dispatch("ended",{trigger:t})}li(){this.ji.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){this.$state.fullscreen.set(t.detail),this.ei("fullscreen",t)}"fullscreen-error"(t){this.ei("fullscreen",t)}"orientation-change"(t){this.ei("orientation",t)}"picture-in-picture-change"(t){this.$state.pictureInPicture.set(t.detail),this.ei("pip",t)}"picture-in-picture-error"(t){this.ei("pip",t)}"title-change"(t){t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail)}"poster-change"(t){t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail)}}class ii extends er{onSetup(){this.Nh(),q||((0,o.e)(this.Oh.bind(this)),(0,o.e)(this.Ub.bind(this)),(0,o.e)(this.Ph.bind(this)),(0,o.e)(this.Bg.bind(this)),(0,o.e)(this.Qh.bind(this)),(0,o.e)(this.Na.bind(this)),(0,o.e)(this.Rh.bind(this)),(0,o.e)(this.gc.bind(this)),(0,o.e)(this.Sh.bind(this)),(0,o.e)(this.Th.bind(this)),(0,o.e)(this.Uh.bind(this)))}Nh(){let t={poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"};for(let e of Object.keys(this.$props))this.$state[t[e]??e]?.set(this.$props[e]());this.$state.muted.set(this.$props.muted()||0===this.$props.volume())}Oh(){let{viewType:t,streamType:e,title:i,poster:s}=this.$props;this.$state.providedPoster.set(s()),this.$state.providedStreamType.set(e()),this.$state.providedViewType.set(t()),this.$state.providedTitle.set(i())}Vh(){}Ub(){let{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}Ph(){let t=this.$props.autoplay();this.$state.autoplay.set(t),this.dispatch("autoplay-change",{detail:t})}Qh(){let t=this.$props.loop();this.$state.loop.set(t),this.dispatch("loop-change",{detail:t})}Na(){let t=this.$props.controls();this.$state.controls.set(t)}Bg(){let{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}Rh(){let t=this.$props.crossorigin();this.$state.crossorigin.set(!0===t?"":t)}gc(){let t=this.$props.playsinline();this.$state.playsinline.set(t),this.dispatch("playsinline-change",{detail:t})}Th(){this.dispatch("live-change",{detail:this.$state.live()})}Sh(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}Uh(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}function is(t,e=2){return Number(t.toFixed(e))}function ir(t){return String(t).split(".")[1]?.length??0}function ia(t,e,i){return Math.max(t,Math.min(i,e))}let ih=(0,o.s)(!1);q||((0,o.l)(document,"pointerdown",()=>{ih.set(!1)}),(0,o.l)(document,"keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||ih.set(!0)}));class il extends o.V{constructor(){super(...arguments),this.Wh=(0,o.s)(!1)}onConnect(t){(0,o.e)(()=>{if(!ih()){this.Wh.set(!1),io(t,!1),this.listen("pointerenter",this.Xh.bind(this)),this.listen("pointerleave",this.Yh.bind(this));return}let e=document.activeElement===t;this.Wh.set(e),io(t,e),this.listen("focus",this.Zh.bind(this)),this.listen("blur",this._h.bind(this))})}focused(){return this.Wh()}Zh(){this.Wh.set(!0),io(this.el,!0)}_h(){this.Wh.set(!1),io(this.el,!1)}Xh(){iu(this.el,!0)}Yh(){iu(this.el,!1)}}function io(t,e){(0,o.m)(t,"data-focus",e),(0,o.m)(t,"data-hocus",e)}function iu(t,e){(0,o.m)(t,"data-hocus",e),(0,o.m)(t,"data-hover",e)}class ic{constructor(){this.zi=!1,this.Ai=(0,o.g)(),this.Ah=new Map}get Di(){return this.Ah.size}get Ei(){return this.zi}async Fi(){this.zi||await this.Ai.promise}xa(t,e){if(this.zi){e();return}this.Ah.delete(t),this.Ah.set(t,e)}yi(t){this.Ah.get(t)?.(),this.Ah.delete(t)}nc(){this.Bi(),this.zi=!0,this.Ah.size>0&&this.Bi()}oc(){this.zi=!1}j(){this.oc(),this.Ah.clear(),this.Ci()}Bi(){for(let t of this.Ah.keys())this.yi(t);this.Ci()}Ci(){this.Ai.resolve(),this.Ai=(0,o.g)()}}var id=Object.defineProperty,ip=Object.getOwnPropertyDescriptor,ib=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?ip(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&id(e,i,n),n};let im=class t extends o.O{constructor(){super(),this.canPlayQueue=new ic,this.Sb=!1,new ii;let t={player:this,scope:(0,o.R)(),qualities:new eM,audioTracks:new eu,$provider:(0,o.s)(null),$props:this.$props,$state:this.$state};t.remote=new tM(void 0),t.remote.setPlayer(this),t.$iosControls=(0,o.T)(this.ac.bind(this)),t.textTracks=new TextTrackList,t.textTracks[tb.fb]=this.$state.crossorigin,t.textRenderers=new eh(t),t.ariaKeys={},this.Ma=t,(0,o.Z)(te,t),this.orientation=new B,new il,new eD(t);let e=new e8;this.Tb=new ie(e,t),this.Rb=new e6(this.Tb,e,t),t.delegate=new e1(this.Tb.mc.bind(this.Tb),t),new e0(this.startLoading.bind(this))}get Qb(){return this.Ma.$provider()}onSetup(){this.bc(),(0,o.e)(this.cc.bind(this)),(0,o.e)(this.dc.bind(this)),(0,o.e)(this.oa.bind(this)),(0,o.e)(this.ec.bind(this)),(0,o.e)(this.fc.bind(this)),(0,o.e)(this.gc.bind(this)),(0,o.e)(this.hc.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),t8(t,"tabindex","0"),t8(t,"role","region"),q?this.Ub():(0,o.e)(this.Ub.bind(this)),q?this.Vb():(0,o.e)(this.Vb.bind(this)),(0,o.l)(t,"find-media-player",this.ic.bind(this))}onConnect(t){N&&(0,o.m)(t,"data-iphone",""),W().then(this.$state.canSetVolume.set);let e=window.matchMedia("(pointer: coarse)");this.Wb(e),e.onchange=this.Wb.bind(this);let i=new ResizeObserver((0,o._)(this.Kb.bind(this)));i.observe(t),(0,o.e)(this.Kb.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),(0,o.o)(()=>{i.disconnect(),e.onchange=null})}onDestroy(){this.Ma.player=null,this.canPlayQueue.j()}Ub(){if(this.Sb){this.Sb=!1;return}let{title:t,live:e,viewType:i}=this.$state,s=e(),r=(0,o.$)(i()),n="Unknown"!==r?`${s?"Live ":""}${r}`:s?"Live":"Media",a=t();(0,o.m)(this.el,"aria-label",a?`${n} - ${a}`:n+" Player"),!q&&this.el&&customElements.get(this.el.localName)&&(this.Sb=!0),this.el?.removeAttribute("title")}Vb(){let t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),(0,o.m)(this.el,"data-orientation",t),this.Kb()}cc(){this.$state.canPlay()&&this.Qb?this.canPlayQueue.nc():this.canPlayQueue.oc()}bc(){if(t[eY]){this.setAttributes(t[eY]);return}let e={"data-captions":function(){let t=this.$state.textTrack();return!!t&&tw(t)},"data-ios-controls":function(){return this.Ma.$iosControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canPlay:t,waiting:e}=this.$state;return!t()||e()},"data-error":function(){let{error:t}=this.$state;return!!t()},"data-autoplay-error":function(){let{autoplayError:t}=this.$state;return!!t()}},i={canPictureInPicture:"can-pip",pictureInPicture:"pip"};for(let t of eJ){let s="data-"+(i[t]??(0,o.h)(t));e[s]=function(){return this.$state[t]()}}delete e.title,t[eY]=e,this.setAttributes(e)}ic(t){t.detail(this)}Kb(){if(q||!this.el)return;let t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),(0,o.Q)(this.el,"--player-width",t+"px"),(0,o.Q)(this.el,"--player-height",e+"px")}Wb(t){if(q)return;let e=t.matches?"coarse":"fine";(0,o.m)(this.el,"data-pointer",e),this.$state.pointer.set(e),this.Kb()}ac(){let{playsinline:t,fullscreen:e}=this.$state;return N&&!A&&"video"===this.$state.mediaType()&&(!t()||e())}get provider(){return this.Qb}get controls(){return this.Rb.pc}get title(){return(0,o.p)(this.$state.providedTitle)}set title(t){this.Sb||this.$state.providedTitle.set(t)}get qualities(){return this.Ma.qualities}get audioTracks(){return this.Ma.audioTracks}get textTracks(){return this.Ma.textTracks}get textRenderers(){return this.Ma.textRenderers}get paused(){return(0,o.p)(this.$state.paused)}set paused(t){this.Xb(t)}oa(){this.Xb(this.$props.paused())}Xb(t){t?this.canPlayQueue.xa("paused",()=>this.Rb.jc()):this.canPlayQueue.xa("paused",()=>this.Rb.kc())}get muted(){return(0,o.p)(this.$state.muted)}set muted(t){this.Yb(t)}dc(){this.Yb(this.$props.muted())}Yb(t){this.canPlayQueue.xa("muted",()=>{this.Qb&&this.Qb.setMuted(t)})}get currentTime(){return(0,o.p)(this.$state.currentTime)}set currentTime(t){this.Zb(t)}fc(){this.Zb(this.$props.currentTime())}Zb(t){this.canPlayQueue.xa("currentTime",()=>{t!==(0,o.p)(this.$state.currentTime)&&(0,o.p)(()=>{if(!this.Qb)return;let e=Math.min(Math.max(this.$state.seekableStart()+.1,t),this.$state.seekableEnd()-.1);Number.isFinite(e)&&this.Qb.setCurrentTime(e)})})}get volume(){return(0,o.p)(this.$state.volume)}set volume(t){this._b(t)}ec(){this._b(this.$props.volume())}_b(t){let e=ia(0,t,1);this.canPlayQueue.xa("volume",()=>{this.Qb&&this.Qb.setVolume(e)})}get playbackRate(){return(0,o.p)(this.$state.playbackRate)}set playbackRate(t){this.$b(t)}hc(){this.$b(this.$props.playbackRate())}$b(t){this.canPlayQueue.xa("rate",()=>{this.Qb&&this.Qb.setPlaybackRate?.(t)})}gc(){this.lc(this.$props.playsinline())}lc(t){this.canPlayQueue.xa("playsinline",()=>{this.Qb&&this.Qb.setPlaysinline?.(t)})}async play(t){return this.Rb.kc(t)}async pause(t){return this.Rb.jc(t)}async enterFullscreen(t,e){return this.Rb.qc(t,e)}async exitFullscreen(t,e){return this.Rb.rc(t,e)}enterPictureInPicture(t){return this.Rb.sc(t)}exitPictureInPicture(t){return this.Rb.tc(t)}seekToLiveEdge(t){this.Rb.uc(t)}startLoading(t){this.Ma.delegate.Pb("can-load",void 0,t)}matchQuery(t){return(0,o.n)(()=>ey.create(t),this.scope)}destroy(){this.Ma.remote.setPlayer(null),this.dispatch("destroy")}};im.props={autoplay:!1,controls:!1,currentTime:0,crossorigin:null,fullscreenOrientation:"landscape",load:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:ej},im.state=Y,ib([o.a0],im.prototype,"canPlayQueue",2),ib([o.a0],im.prototype,"provider",1),ib([o.a0],im.prototype,"controls",1),ib([o.a0],im.prototype,"orientation",2),ib([o.a0],im.prototype,"title",1),ib([o.a0],im.prototype,"qualities",1),ib([o.a0],im.prototype,"audioTracks",1),ib([o.a0],im.prototype,"textTracks",1),ib([o.a0],im.prototype,"textRenderers",1),ib([o.a0],im.prototype,"paused",1),ib([o.a0],im.prototype,"muted",1),ib([o.a0],im.prototype,"currentTime",1),ib([o.a0],im.prototype,"volume",1),ib([o.a0],im.prototype,"playbackRate",1),ib([o.a1],im.prototype,"play",1),ib([o.a1],im.prototype,"pause",1),ib([o.a1],im.prototype,"enterFullscreen",1),ib([o.a1],im.prototype,"exitFullscreen",1),ib([o.a1],im.prototype,"enterPictureInPicture",1),ib([o.a1],im.prototype,"exitPictureInPicture",1),ib([o.a1],im.prototype,"seekToLiveEdge",1),ib([o.a1],im.prototype,"startLoading",1),ib([o.a1],im.prototype,"matchQuery",1);let ig=im,iy=Symbol(0),iv=new Map;class iw{constructor(t,e,i){this.Ib=t,this.Ma=e,this.Gb=i,this.nh=!1;let s=new eZ,r=new eK,n=new eU,a=new eB,h=new eX,l=[a,h];this.oh=(0,o.T)(()=>e.$props.preferNativeHLS()?[r,n,s,...l]:[s,r,n,...l]);let{$state:u}=e;for(let t of(u.sources.set(i$(e.$props.src())),u.sources())){let e=this.oh().find(e=>e.canPlay(t));if(!e)continue;let i=e.mediaType(t);this.Ma.$state.source.set(t),this.Ma.$state.mediaType.set(i),this.Ma.$state.inferredViewType.set(i),this.Gb.set(e),this.nh=!0}}get Pb(){return this.Ma.delegate.Pb}connect(){let t=this.Gb();this.nh&&(this.ph(this.Ma.$state.source(),t),this.qh(t),this.nh=!1),(0,o.e)(this.sh.bind(this)),(0,o.e)(this.th.bind(this)),(0,o.e)(this.uh.bind(this)),(0,o.e)(this.vh.bind(this))}sh(){this.Pb("sources-change",[...i$(this.Ma.$props.src()),...this.Ib()])}th(){let{$state:t}=this.Ma,e=t.sources(),i=(0,o.p)(t.source),s=this.rh(i,e),r=e[0]?.src&&!s.src&&!s.type;if(r){let{crossorigin:i}=t,s=th(i()),r=new AbortController;return Promise.all(e.map(t=>(0,o.b)(t.src)&&"?"===t.type?fetch(t.src,{method:"HEAD",credentials:s,signal:r.signal}).then(e=>(t.type=e.headers.get("content-type")||"??",iv.set(t.src,t.type),t)).catch(()=>t):t)).then(e=>{r.signal.aborted||(this.rh((0,o.p)(t.source),e),(0,o.K)())}),()=>r.abort()}(0,o.K)()}rh(t,e){let i={src:"",type:""},s=null;for(let t of e){let e=(0,o.p)(this.oh).find(e=>e.canPlay(t));e&&(i=t,s=e)}return iM(t,i)||this.ph(i,s),s!==(0,o.p)(this.Gb)&&this.qh(s),i}ph(t,e){this.Pb("source-change",t),this.Pb("media-type-change",e?.mediaType(t)||"unknown")}qh(t){this.Pb("provider-change",null),t&&(0,o.p)(()=>t.preconnect?.(this.Ma)),this.Gb.set(t),this.Pb("provider-loader-change",t)}uh(){let t=this.Ma.$provider();if(t&&!t[iy]){if(this.Ma.$state.canLoad()){(0,o.n)(()=>t.setup(this.Ma),t.scope),t[iy]=!0;return}(0,o.p)(()=>t.preconnect?.(this.Ma))}}vh(){let t=this.Ma.$provider(),e=this.Ma.$state.source(),i=(0,o.p)(this.Ma.$state.crossorigin);if(!iM(t?.currentSrc,e)){if(this.Ma.$state.canLoad()){let s=new AbortController;return eH(e)?U()||(function t(e,i){return fetch(e,i).then(t=>t.text()).then(s=>{let r=function(t){let e=t.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split("\n")[1].trim():null}(s);if(r)return t(/^https?:/.test(r)?r:new URL(r,e).href,i);let n=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(s)?"on-demand":"live";return"live"===n&&function(t){let e=t.split("\n");for(let t of e)if(t.startsWith("#EXT-X-TARGETDURATION")){let e=parseFloat(t.split(":")[1]);if(!isNaN(e))return e}return -1}(s)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(s)||s.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":n})})(e.src,{credentials:th(i),signal:s.signal}).then(t=>{this.Pb("stream-type-change",t)}).catch(o.a2):this.Pb("stream-type-change","on-demand"),(0,o.p)(()=>t?.loadSource(e,o.p(this.Ma.$state.preload))),()=>s.abort()}try{(0,o.b)(e.src)&&tr(new URL(e.src).origin,"preconnect")}catch(t){}}}}function i$(t){return((0,o.J)(t)?t:[!(0,o.b)(t)&&"src"in t?t:{src:t}]).map(({src:t,type:e})=>({src:t,type:e??((0,o.b)(t)?iv.get(t):null)??(!(0,o.b)(t)||t.startsWith("blob:")?"video/object":t.includes("youtube")?"video/youtube":t.includes("vimeo")?"video/vimeo":"?")}))}function iM(t,e){return t?.src===e?.src&&t?.type===e?.type}class ix{constructor(t,e){this.Jb=t,this.Ma=e,this.Tg=[],(0,o.e)(this.Ug.bind(this))}Ug(){let t=this.Jb();for(let e of this.Tg)if(!t.some(t=>t.id===e.id)){let t=e.id&&this.Ma.textTracks.getById(e.id);t&&this.Ma.textTracks.remove(t)}for(let e of t){let t=e.id||TextTrack.createId(e);this.Ma.textTracks.getById(t)||(e.id=t,this.Ma.textTracks.add(e))}this.Tg=t}}var iT=Object.defineProperty,ik=Object.getOwnPropertyDescriptor;class iE extends o.O{constructor(){super(...arguments),this.Ib=(0,o.s)([]),this.Jb=(0,o.s)([]),this.Gb=null,this.Hb=-1}onSetup(){this.Ma=ti(),this.Nb=new iw(this.Ib,this.Ma,this.$state.loader)}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.Nb.connect(),new ix(this.Jb,this.Ma);let e=new ResizeObserver((0,o._)(this.Kb.bind(this)));e.observe(t);let i=new MutationObserver(this.Lb.bind(this));i.observe(t,{attributes:!0,childList:!0}),this.Kb(),this.Lb(),(0,o.o)(()=>{e.disconnect(),i.disconnect()})}load(t){window.cancelAnimationFrame(this.Hb),this.Hb=requestAnimationFrame(()=>this.Ob(t)),(0,o.o)(()=>{window.cancelAnimationFrame(this.Hb)})}Ob(t){if(!this.scope)return;let e=this.$state.loader(),{$provider:i}=this.Ma;!(this.Gb===e&&e?.target===t&&(0,o.p)(i))&&(this.Mb(),this.Gb=e,e&&(e.target=t||null),e&&t&&e.load(this.Ma).then(t=>{this.scope&&(0,o.p)(this.$state.loader)===e&&(t&&(0,o.p)(()=>{let{muted:e,volume:i,playsinline:s}=this.Ma.$state;t.setMuted(e()),t.setVolume(i()),t.setPlaysinline?.(s())}),this.Ma.delegate.Pb("provider-change",t))}))}onDestroy(){this.Gb=null,this.Mb()}Mb(){this.Ma.delegate.Pb("provider-change",null)}Kb(){if(!this.el)return;let t=this.Ma.player,e=this.el.offsetWidth,i=this.el.offsetHeight;t&&(t.$state.mediaWidth.set(e),t.$state.mediaHeight.set(i),t.el&&((0,o.Q)(t.el,"--media-width",e+"px"),(0,o.Q)(t.el,"--media-height",i+"px")))}Lb(){let t=[],e=[],i=this.el.children;for(let s of i)s instanceof HTMLSourceElement?t.push({src:s.src,type:s.type}):s instanceof HTMLTrackElement&&e.push({id:s.id,src:s.src,kind:s.track.kind,language:s.srclang,label:s.label,default:s.default,type:s.getAttribute("data-type")});this.Ib.set(t),this.Jb.set(e),(0,o.K)()}}iE.state=new o.S({loader:null}),((t,e,i,s)=>{for(var r,n=s>1?void 0:s?ik(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&iT(e,i,n)})([o.a1],iE.prototype,"load",1);class iP extends o.O{onSetup(){this.Ma=ti(),(0,o.e)(this.wc.bind(this))}onAttach(t){let{pictureInPicture:e,fullscreen:i}=this.Ma.$state;(0,o.Q)(t,"pointer-events","none"),t8(t,"role","group"),this.setAttributes({"data-visible":this.vc.bind(this),"data-fullscreen":i,"data-pip":e}),(0,o.e)(()=>{this.dispatch("change",{detail:this.vc()})}),(0,o.e)(this.xc.bind(this)),(0,o.e)(()=>{let e=i();for(let i of["top","right","bottom","left"])(0,o.Q)(t,`padding-${i}`,e&&`env(safe-area-inset-${i})`)})}xc(){if(!this.el)return;let{$iosControls:t}=this.Ma,{controls:e}=this.Ma.$state,i=e()||t();(0,o.m)(this.el,"aria-hidden",i?"true":null),(0,o.Q)(this.el,"display",i?"none":null)}wc(){let{controls:t}=this.Ma.player,{hideDelay:e,hideOnMouseLeave:i}=this.$props;t.defaultDelay=2e3===e()?this.Ma.$props.controlsDelay():e(),t.hideOnMouseLeave=i()}vc(){let{controlsVisible:t}=this.Ma.$state;return t()}}iP.props={hideDelay:2e3,hideOnMouseLeave:!1};class iS extends o.O{onAttach(t){(0,o.Q)(t,"pointer-events","auto")}}class iA extends o.V{constructor(t){super(),this.$c=t,this.Hi=-1,this.Ii=-1,this.Gi=null,(0,o.e)(this.Ji.bind(this))}onDestroy(){this.Gi?.(),this.Gi=null}Ji(){let t=this.$c.yc();if(!t){this.hide();return}let e=this.show.bind(this),i=this.hide.bind(this);this.$c.Hc(t,e,i)}show(t){window.cancelAnimationFrame(this.Ii),this.Ii=-1,this.Gi?.(),this.Gi=null,this.Hi=window.setTimeout(()=>{this.Hi=-1;let e=this.$c.zc();e&&e.style.removeProperty("display"),(0,o.p)(()=>this.$c.ma(!0,t))},this.$c.Gc?.()??0)}hide(t){window.clearTimeout(this.Hi),this.Hi=-1,(0,o.p)(()=>this.$c.ma(!1,t)),this.Ii=requestAnimationFrame(()=>{this.Ii=-1;let t=this.$c.zc();if(t){let e=function(t){let e=getComputedStyle(t);return"none"!==e.animationName}(t),i=()=>{t.style.display="none",this.Gi=null};if(e){this.Gi?.();let e=(0,o.l)(t,"animationend",i,{once:!0});this.Gi=e}else i()}})}}let iO=(0,o.L)(),iC=0;class ij extends o.O{constructor(){super(),this.Ac=`media-tooltip-${++iC}`,this.yc=(0,o.s)(null),this.zc=(0,o.s)(null),new il;let{showDelay:t}=this.$props;new iA({yc:this.yc,zc:this.zc,Gc:t,Hc(t,e,i){(0,o.l)(t,"touchstart",t=>t.preventDefault(),{passive:!1}),(0,o.l)(t,"focus",e),(0,o.l)(t,"blur",i),(0,o.l)(t,"mouseenter",e),(0,o.l)(t,"mouseleave",i)},ma:this.Fc.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onSetup(){(0,o.Z)(iO,{yc:this.yc,zc:this.zc,Bc:this.Bc.bind(this),Cc:this.Cc.bind(this),Dc:this.Dc.bind(this),Ec:this.Ec.bind(this)})}Bc(t){this.yc.set(t);let e=t.getAttribute("data-media-tooltip");e&&this.el?.setAttribute(`data-media-${e}-tooltip`,""),(0,o.m)(t,"data-describedby",this.Ac)}Cc(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.yc.set(null)}Dc(t){t.setAttribute("id",this.Ac),t.style.display="none",t8(t,"role","tooltip"),this.zc.set(t)}Ec(t){t.removeAttribute("id"),t.removeAttribute("role"),this.zc.set(null)}Fc(t){let e=this.yc(),i=this.zc();for(let s of(e&&(0,o.m)(e,"aria-describedby",t?this.Ac:null),[this.el,e,i]))s&&(0,o.m)(s,"data-visible",t)}}ij.props={showDelay:500};class iR extends o.O{constructor(){super(),new il}onConnect(t){(0,o.o)(ei(()=>{if(!this.connectScope)return;this.O();let t=(0,o.M)(iO);(0,o.o)(()=>{let e=this.Ic();e&&t.Cc(e)})}))}O(){let t=this.Ic(),e=(0,o.M)(iO);t&&e.Bc(t)}Ic(){let t=this.el.firstElementChild;return t?.localName==="button"||t?.getAttribute("role")==="button"?t:this.el}}class iq extends o.O{constructor(){super(),new il;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){this.O(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.O(t);let e=(0,o.M)(iO);(0,o.o)(()=>e.Ec(t)),(0,o.o)(ei(()=>{this.connectScope&&(0,o.e)(this.Jc.bind(this))}))}O(t){let e=(0,o.M)(iO);e.Dc(t)}Jc(){let{placement:t,offset:e,alignOffset:i}=this.$props;return es(this.el,this.Kc(),t(),{offsetVarName:"media-tooltip",xOffset:i(),yOffset:e()})}Kc(){return(0,o.M)(iO).yc()}}iq.props={placement:"top center",offset:0,alignOffset:0};class iD extends o.V{constructor(t){super(),this.$c=t,new il,t.Pc&&new eN(t.Pc)}onSetup(){let{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.$c.Mc,"aria-pressed":this.Ki.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){t8(t,"tabindex","0"),t8(t,"role","button"),t8(t,"type","button")}onConnect(t){for(let e of(et(t,this.Li.bind(this)),["click","touchstart"]))this.listen(e,this.Mi.bind(this))}Ki(){return(0,o.a3)(this.$c.Mc())}Ni(t){(0,o.a4)(this.$c.Mc)&&this.$c.Mc.set(t=>!t)}Li(t){let e=this.$props.disabled()||this.el.hasAttribute("data-disabled");if(e){t.preventDefault(),t.stopImmediatePropagation();return}t.preventDefault(),(this.$c.Nc??this.Ni).call(this,t)}Mi(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}}iD.props={disabled:!1};var iF=Object.defineProperty,iN=Object.getOwnPropertyDescriptor;class iL extends o.O{constructor(){super(),this.Lc=(0,o.s)(!1),new iD({Mc:this.Lc})}get pressed(){return this.Lc()}}iL.props={disabled:!1,defaultPressed:!1},((t,e,i,s)=>{for(var r,n=s>1?void 0:s?iN(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&iF(e,i,n)})([o.a0],iL.prototype,"pressed",1);let iI=class extends o.O{constructor(){super(),new iD({Mc:this.Mc.bind(this),Pc:"togglePaused",Nc:this.Nc.bind(this)})}onSetup(){this.Ma=ti();let{paused:t,ended:e}=this.Ma.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),t7(t,this.Oc.bind(this))}Nc(t){let e=this.Ma.remote;this.Mc()?e.pause(t):e.play(t)}Mc(){let{paused:t}=this.Ma.$state;return!t()}Oc(){let{paused:t}=this.Ma.$state;return t()?"Play":"Pause"}};function iV(t){return()=>t()?"true":"false"}iI.props=iD.props;let iz=class extends o.O{constructor(){super(),new iD({Mc:this.Mc.bind(this),Pc:"toggleCaptions",Nc:this.Nc.bind(this)})}onSetup(){this.Ma=ti(),this.setAttributes({"data-active":this.Mc.bind(this),"data-supported":()=>!this.Qc(),"aria-hidden":iV(this.Qc.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),t7(t,this.Oc.bind(this))}Nc(t){this.Ma.remote.toggleCaptions(t)}Mc(){let{textTrack:t}=this.Ma.$state,e=t();return!!e&&tw(e)}Qc(){let{textTracks:t}=this.Ma.$state;return 0==t().filter(tw).length}Oc(){let{textTrack:t}=this.Ma.$state;return t()?"Closed-Captions Off":"Closed-Captions On"}};iz.props=iD.props;let iQ=class extends o.O{constructor(){super(),new iD({Mc:this.Mc.bind(this),Pc:"toggleFullscreen",Nc:this.Nc.bind(this)})}onSetup(){this.Ma=ti();let{fullscreen:t}=this.Ma.$state,e=this.Rc.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":iV(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),t7(t,this.Oc.bind(this))}Nc(t){let e=this.Ma.remote,i=this.$props.target();this.Mc()?e.exitFullscreen(i,t):e.enterFullscreen(i,t)}Mc(){let{fullscreen:t}=this.Ma.$state;return t()}Rc(){let{canFullscreen:t}=this.Ma.$state;return t()}Oc(){let{fullscreen:t}=this.Ma.$state;return t()?"Exit Fullscreen":"Enter Fullscreen"}};iQ.props={...iD.props,target:"prefer-media"};let i_=class extends o.O{constructor(){super(),new iD({Mc:this.Mc.bind(this),Pc:"toggleMuted",Nc:this.Nc.bind(this)})}onSetup(){this.Ma=ti(),this.setAttributes({"data-muted":this.Mc.bind(this),"data-state":this.Sc.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),t7(t,this.Oc.bind(this))}Nc(t){let e=this.Ma.remote;this.Mc()?e.unmute(t):e.mute(t)}Mc(){let{muted:t,volume:e}=this.Ma.$state;return t()||0===e()}Oc(){return this.Mc()?"Unmute":"Mute"}Sc(){let{muted:t,volume:e}=this.Ma.$state,i=e();return t()||0===i?"muted":i>=.5?"high":i<.5?"low":void 0}};i_.props=iD.props;let iH=class extends o.O{constructor(){super(),new iD({Mc:this.Mc.bind(this),Pc:"togglePictureInPicture",Nc:this.Nc.bind(this)})}onSetup(){this.Ma=ti();let{pictureInPicture:t}=this.Ma.$state,e=this.Rc.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":iV(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),t7(t,this.Oc.bind(this))}Nc(t){let e=this.Ma.remote;this.Mc()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}Mc(){let{pictureInPicture:t}=this.Ma.$state;return t()}Rc(){let{canPictureInPicture:t}=this.Ma.$state;return t()}Oc(){let{pictureInPicture:t}=this.Ma.$state;return t()?"Exit Picture In Picture":"Enter Picture In Picture"}};iH.props=iD.props;let iW=class extends o.O{constructor(){super(),new il}onSetup(){this.Ma=ti();let{seeking:t}=this.Ma.$state,{seconds:e}=this.$props,i=this.Rc.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":i,"aria-hidden":iV(()=>!i())})}onAttach(t){t8(t,"tabindex","0"),t8(t,"role","button"),t8(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),t7(t,this.Oc.bind(this))}onConnect(t){et(t,this.Nc.bind(this))}Rc(){let{canSeek:t}=this.Ma.$state;return t()}Oc(){let{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}Nc(t){let{seconds:e,disabled:i}=this.$props;if(i())return;let{currentTime:s}=this.Ma.$state,r=s()+e();this.Ma.remote.seek(r,t)}};iW.props={disabled:!1,seconds:30};let iU=class extends o.O{constructor(){super(),new il}onSetup(){this.Ma=ti();let{disabled:t}=this.$props,{live:e,liveEdge:i}=this.Ma.$state,s=()=>!e();this.setAttributes({"data-edge":i,"data-hidden":s,"aria-disabled":iV(()=>t()||i()),"aria-hidden":iV(s)})}onAttach(t){t8(t,"tabindex","0"),t8(t,"role","button"),t8(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){et(t,this.Nc.bind(this))}Nc(t){let{disabled:e}=this.$props,{liveEdge:i}=this.Ma.$state;e()||i()||this.Ma.remote.seekToLiveEdge(t)}};iU.props={disabled:!1};let iK=new o.S({min:0,max:100,value:0,pointerValue:0,focused:!1,dragging:!1,pointing:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return iB(this.min,this.max,this.value)},get fillPercent(){return 100*this.fillRate},get pointerRate(){return iB(this.min,this.max,this.pointerValue)},get pointerPercent(){return 100*this.pointerRate}});function iB(t,e,i){let s=e-t;return s>0?(i-t)/s:0}let iG={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class iZ extends o.V{constructor(t,e){super(),this.$c=t,this.Ma=e,this.Qb=null,this.Oi=null,this.Qi=null,this.Xi=e9(t=>{this.Pi(this.Ri(t),t)},20,{leading:!0})}onConnect(){if((0,o.e)(this.Yi.bind(this)),(0,o.e)(this.Zi.bind(this)),this.$c.Od){let t=this.Ma.player.el?.querySelector("media-provider,[data-media-provider]");t&&(this.Qb=t,(0,o.l)(t,"touchstart",this._i.bind(this),{passive:!0}),(0,o.l)(t,"touchmove",this.$i.bind(this),{passive:!1}))}}_i(t){this.Oi=t.touches[0]}$i(t){if((0,o.N)(this.Oi)||ee(t))return;let e=t.touches[0],i=e.clientX-this.Oi.clientX,s=e.clientY-this.Oi.clientY,r=this.$state.dragging();!(!r&&Math.abs(s)>20)&&!r&&Math.abs(i)>20&&(this.Oi=e,this.Qi=this.$state.value(),this.Si(this.Qi,t))}Yi(){this.$c._c()||(this.listen("focus",this.Zh.bind(this)),this.listen("pointerenter",this.Xh.bind(this)),this.listen("pointermove",this.aj.bind(this)),this.listen("pointerleave",this.Yh.bind(this)),this.listen("pointerdown",this.bj.bind(this)),this.listen("keydown",this.Cb.bind(this)),this.listen("keyup",this.Bb.bind(this)))}Zi(){!this.$c._c()&&this.$state.dragging()&&((0,o.l)(document,"pointerup",this.cj.bind(this)),(0,o.l)(document,"pointermove",this.Xi.bind(this)),I&&(0,o.l)(document,"touchmove",this.dj.bind(this),{passive:!1}))}Zh(){this.Pi(this.$state.value())}Ti(t,e){let{value:i,min:s,max:r,dragging:n}=this.$state,a=Math.max(s(),Math.min(t,r()));i.set(a);let h=this.createEvent("value-change",{detail:a,trigger:e});if(this.dispatch(h),this.$c.yd?.(h),n()){let t=this.createEvent("drag-value-change",{detail:a,trigger:e});this.dispatch(t),this.$c.xd?.(t)}}Pi(t,e){let{pointerValue:i,dragging:s}=this.$state;i.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),s()&&this.Ti(t,e)}Ri(t){let e,i=this.el.getBoundingClientRect(),{min:s,max:r}=this.$state;if("vertical"===this.$props.orientation()){let{bottom:s,height:r}=i;e=(s-t.clientY)/r}else if(this.Oi&&(0,o.a)(this.Qi)){let{width:i}=this.Qb.getBoundingClientRect(),n=(t.clientX-this.Oi.clientX)/i,a=r()-s(),h=a*Math.abs(n);e=(n<0?this.Qi-h:this.Qi+h)/a}else{let{left:s,width:r}=i;e=(t.clientX-s)/r}return Math.max(s(),Math.min(r(),this.$c.Zc(function(t,e,i,s){let r=ia(0,i,1);return t+s*((e-t)*r/s)}(s(),r(),e,this.$c.Xc()))))}Xh(t){this.$state.pointing.set(!0)}aj(t){let{dragging:e}=this.$state;e()||this.Pi(this.Ri(t),t)}Yh(t){this.$state.pointing.set(!1)}bj(t){if(0!==t.button)return;let e=this.Ri(t);this.Si(e,t),this.Pi(e,t)}Si(t,e){let{dragging:i}=this.$state;if(i())return;i.set(!0),this.Ma.remote.pauseControls(e);let s=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(s),this.$c.Ed?.(s)}Ui(t,e){let{dragging:i}=this.$state;if(!i())return;i.set(!1),this.Ma.remote.resumeControls(e);let s=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(s),this.$c.Cd?.(s),this.Oi=null,this.Qi=null}Cb(t){let e;let{key:i}=t,{min:s,max:r}=this.$state;if("Home"===i||"PageUp"===i?e=s():"End"===i||"PageDown"===i?e=r():!t.metaKey&&/[0-9]/.test(i)&&(e=(r()-s())/10*Number(i)),!(0,o.i)(e)){this.Pi(e,t),this.Ti(e,t);return}let n=this.Vi(t);if((0,o.i)(n))return;let a=i===this.Wi;!this.$state.dragging()&&a&&this.Si(n,t),this.Pi(n,t),a||this.Ti(n,t),this.Wi=i}Bb(t){this.Wi="";let{dragging:e,value:i}=this.$state;if(!e())return;let s=this.Vi(t)??i();this.Pi(s),this.Ui(s,t)}Vi(t){let{key:e,shiftKey:i}=t,s=Object.keys(iG).includes(e);if(!s)return;t.preventDefault(),t.stopPropagation();let{shiftKeyMultiplier:r}=this.$props,{value:n,min:a,max:h}=this.$state,l=this.$c.Xc(),o=this.$c.Yc(),u=i?o*r():o,c=Number(iG[e]),d=(n()+u*c)/l;return Math.max(a(),Math.min(h(),Number((l*d).toFixed(3))))}cj(t){if(0!==t.button)return;let e=this.Ri(t);this.Pi(e,t),this.Ui(e,t)}dj(t){t.preventDefault()}}let iX=(0,o.L)(()=>({})),iY=(0,o.L)();class iJ extends o.V{constructor(t){super(),this.$c=t,this.bd=(0,o._)((t,e)=>{this.el?.style.setProperty("--slider-fill",t+"%"),this.el?.style.setProperty("--slider-pointer",e+"%")})}onSetup(){this.Ma=ti();let t=new il;t.attach(this),this.$state.focused=t.focused.bind(t),(0,o.a5)(iX)||(0,o.Z)(iX,{default:"value"}),(0,o.Z)(iY,{fd:this.$props.orientation,gd:this.$c._c,hd:(0,o.s)(null)}),(0,o.e)(this.Vc.bind(this)),(0,o.e)(this.cd.bind(this)),this.dd(),new iZ(this.$c,this.Ma).attach(this)}onAttach(t){t8(t,"role","slider"),t8(t,"tabindex","0"),t8(t,"autocomplete","off"),q?this.ad():(0,o.e)(this.ad.bind(this))}Vc(){let{dragging:t,value:e,min:i,max:s}=this.$state;if(!(0,o.p)(t)){var r,n;e.set((r=i(),n=s(),ia(r,is(e(),ir(this.$c.Xc())),n)))}}cd(){if(!this.$c._c())return;let{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}ed(){return(0,o.a3)(this.$c._c())}dd(){let{orientation:t}=this.$props,{dragging:e,active:i,pointing:s}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":s,"data-active":i,"aria-disabled":this.ed.bind(this),"aria-valuemin":this.$state.min,"aria-valuemax":this.$state.max,"aria-valuenow":this.$c.Tc,"aria-valuetext":this.$c.Uc,"aria-orientation":t})}ad(){let{fillPercent:t,pointerPercent:e}=this.$state;this.bd(is(t(),3),is(e(),3))}}iJ.props={disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};class i0 extends o.O{constructor(){super(),new iJ({Xc:this.$props.step,Yc:this.$props.keyStep,Zc:Math.round,_c:this.$props.disabled,Tc:this.Tc.bind(this),Uc:this.Uc.bind(this)})}onSetup(){(0,o.e)(this.Vc.bind(this)),(0,o.e)(this.Wc.bind(this))}Tc(){let{value:t}=this.$state;return Math.round(t())}Uc(){let{value:t,max:e}=this.$state;return is(t()/e()*100,2)+"%"}Vc(){let{value:t}=this.$props;this.$state.value.set(t())}Wc(){let{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}}i0.props={...iJ.props,min:0,max:100,value:0},i0.state=iK;let i1=new Map,i2=new Set,i5=new Set;class i6{constructor(t,e){this.$src=t,this.Ma=e,this.$cues=(0,o.s)([]),(0,o.e)(this.cg.bind(this)),i5.add(this),(0,o.o)(()=>i5.delete(this))}static create(t){let e=ti();return new i6(t,e)}cg(){let{canLoad:t}=this.Ma.$state;if(!t())return;let e=new AbortController,{crossorigin:s}=this.Ma.$state,r=this.$src();if(r){if(i1.has(r)){let t=i1.get(r);if(i1.delete(r),i1.set(r,t),i1.size>30){let t=i1.keys().next().value;i1.delete(t)}this.$cues.set(i1.get(r))}else i2.has(r)||(i2.add(r),i.e(562).then(i.bind(i,6562)).then(async({parseResponse:t})=>{try{let i=await fetch(r,{signal:e.signal,credentials:th(s())}),n="application/json"===i.headers.get("content-type");if(n){try{let{cues:t}=t$(await i.text(),window.VTTCue);this.bg(r,t)}catch(t){}return}let{cues:a}=await t(i);this.bg(r,a)}catch(t){}}));return()=>{e.abort(),this.$cues.set([])}}}bg(t,e){for(let i of(this.$cues.set(e),i5))(0,o.p)(i.$src)===t&&i.$cues.set(e);i1.set(t,e),i2.delete(t)}}let i3=class extends o.O{constructor(){super(...arguments),this.Tf=[],this.Uf=(0,o._)(this.Wf.bind(this))}onSetup(){this.Ma=ti(),this.Vf=i6.create(this.$props.src),this.setAttributes({"data-loading":this.md.bind(this),"data-error":this.kd.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":iV(this.$state.hidden)})}onConnect(t){(0,o.e)(this.Df.bind(this)),(0,o.e)(this.pd.bind(this)),(0,o.e)(this.Ef.bind(this)),(0,o.e)(this.Xf.bind(this)),(0,o.e)(this.Yf.bind(this))}Df(){let t=this.$state.img();t&&((0,o.l)(t,"load",this.Zf.bind(this)),(0,o.l)(t,"error",this.sd.bind(this)))}Ef(){let{src:t,loading:e,error:i}=this.$state;t(),e.set(!0),i.set(null)}Zf(){let{loading:t,error:e}=this.$state;t.set(!1),e.set(null),this.Uf()}sd(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}md(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}kd(){let{error:t}=this.$state;return!(0,o.N)(t())}pd(){let{hidden:t}=this.$state,{duration:e}=this.Ma.$state,i=this.Vf.$cues();t.set(this.kd()||!Number.isFinite(e())||0===i.length)}jd(){return this.$props.time()}Xf(){let t=this.jd(),{activeCue:e}=this.$state,{duration:i}=this.Ma.$state,s=this.Vf.$cues();if(!s||!Number.isFinite(i())){e.set(null);return}e.set(tm(s,t))}Yf(){let{activeCue:t}=this.$state,e=t(),i=(0,o.p)(this.$props.src);if(/^https?:/.test(i)||(i=location.href),!i||!e){this.$state.src.set(""),this._f();return}let[s,r=""]=(e.text||"").split("#");this.$state.coords.set(this.$f(r)),this.$state.src.set(this.ag(s,i)),this.Uf()}ag(t,e){return/^https?:/.test(t)?t:new URL(t,e).href}$f(t){let[e,i]=t.split("="),s={},r=i?.split(",");if(!e||!i)return null;for(let t=0;t<e.length;t++)s[e[t]]=+r[t];return s}Wf(){if(!this.scope)return;let t=this.$state.img(),e=this.$state.coords();if(!t||!this.el)return;let i=e?.w??t.naturalWidth,s=e?.h??t.naturalHeight,{maxWidth:r,maxHeight:n,minWidth:a,minHeight:h}=getComputedStyle(this.el),l=Math.max(parseInt(a)/i,parseInt(h)/s),o=Math.min(parseInt(r)/i,parseInt(n)/s),u=o<1?o:l>1?l:1;this.Sf(this.el,"--thumbnail-width",`${i*u}px`),this.Sf(this.el,"--thumbnail-height",`${s*u}px`),this.Sf(t,"width",`${t.naturalWidth*u}px`),this.Sf(t,"height",`${t.naturalHeight*u}px`),this.Sf(t,"transform",e?`translate(-${e.x*u}px, -${e.y*u}px)`:""),this.Sf(t,"max-width","none")}Sf(t,e,i){t.style.setProperty(e,i),this.Tf.push(()=>t.style.removeProperty(e))}_f(){for(let t of this.Tf)t();this.Tf=[]}};i3.props={src:"",time:0},i3.state=new o.S({src:"",img:null,coords:null,activeCue:null,loading:!1,error:null,hidden:!1});class i4 extends i3{onAttach(t){this.id=(0,o.a6)(i0.state)}jd(){let{duration:t}=this.Ma.$state;return this.id.pointerRate()*t()}}var i8=Object.defineProperty,i7=Object.getOwnPropertyDescriptor;class i9 extends o.O{get video(){return this.$state.video()}onSetup(){this.Ma=ti(),this.id=(0,o.a6)(i0.state),this.setAttributes({"data-loading":this.md.bind(this),"data-hidden":this.$state.hidden,"data-error":this.kd.bind(this),"aria-hidden":iV(this.$state.hidden)})}onAttach(t){(0,o.e)(this.nd.bind(this)),(0,o.e)(this.od.bind(this)),(0,o.e)(this.pd.bind(this)),(0,o.e)(this.qd.bind(this)),(0,o.e)(this.rd.bind(this))}nd(){let t=this.$state.video();t&&(t.readyState>=2&&this.ld(),(0,o.l)(t,"canplay",this.ld.bind(this)),(0,o.l)(t,"error",this.sd.bind(this)))}od(){let{src:t}=this.$state,{canLoad:e}=this.Ma.$state;t.set(e()?this.$props.src():null)}md(){let{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}kd(){let{error:t}=this.$state;return!(0,o.N)(t)}pd(){let{src:t,hidden:e}=this.$state,{canLoad:i,duration:s}=this.Ma.$state;e.set(i()&&(!t()||this.kd()||!Number.isFinite(s())))}qd(){let{src:t,canPlay:e,error:i}=this.$state;t(),e.set(!1),i.set(null)}ld(t){let{canPlay:e,error:i}=this.$state;e.set(!0),i.set(null),this.dispatch("can-play",{trigger:t})}sd(t){let{canPlay:e,error:i}=this.$state;e.set(!1),i.set(t),this.dispatch("error",{trigger:t})}rd(){let{video:t,canPlay:e}=this.$state,{duration:i}=this.Ma.$state,{pointerRate:s}=this.id,r=t(),n=e()&&r&&Number.isFinite(i())&&Number.isFinite(s());n&&(r.currentTime=s()*i())}}function st(t,e){let i=String(t),s=i.length;if(s<e){let i="0".repeat(e-s);return`${i}${t}`}return i}function se(t){let e=Number((t-Math.trunc(t)).toPrecision(3));return{hours:Math.trunc(t/3600),minutes:Math.trunc(t%3600/60),seconds:Math.trunc(t%60),fraction:e}}function si(t,e=null,i=null,s=!1){let{hours:r,minutes:n,seconds:a}=se(t),h=e?st(r,2):r,l=i||(0,o.N)(i)&&t>=3600?st(n,2):n,u=st(a,2);return r>0||s?`${h}:${l}:${u}`:`${l}:${u}`}function ss(t){let e=[],{hours:i,minutes:s,seconds:r}=se(t);return i>0&&e.push(`${i} hour`),s>0&&e.push(`${s} min`),(r>0||0===e.length)&&e.push(`${r} sec`),e.join(" ")}i9.props={src:null},i9.state=new o.S({video:null,src:null,canPlay:!1,error:null,hidden:!1}),((t,e,i,s)=>{for(var r,n=s>1?void 0:s?i7(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&i8(e,i,n)})([o.a0],i9.prototype,"video",1);var sr=Object.defineProperty,sn=Object.getOwnPropertyDescriptor;class sa extends o.O{onSetup(){this.id=(0,o.a6)(i0.state),this.td=(0,o.M)(iX),this.ud=(0,o.T)(this.getValueText.bind(this))}getValueText(){let{type:t,format:e,decimalPlaces:i,padHours:s,padMinutes:r,showHours:n}=this.$props,{value:a,pointerValue:h,min:l,max:o}=this.id,u=e()??this.td.default,c="current"===t()?a():h();if("percent"===u){let t=o()-l();return(this.td.percent??is)(c/t*100,i())+""}return"time"===u?(this.td.time??si)(c,s(),r(),n()):this.td.value?.(c)??c.toFixed(2)}}sa.props={type:"pointer",format:null,showHours:!1,padHours:null,padMinutes:null,decimalPlaces:2},((t,e,i,s)=>{for(var r,n=s>1?void 0:s?sn(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sr(e,i,n)})([o.a1],sa.prototype,"getValueText",1);class sh extends o.O{onSetup(){this.id=(0,o.M)(iY);let{active:t}=(0,o.a6)(i0.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){let{hd:e}=this.id;e.set(t),(0,o.o)(()=>e.set(null)),(0,o.e)(this.vd.bind(this));let i=new ResizeObserver(this.vd.bind(this));i.observe(t),(0,o.o)(()=>i.disconnect())}vd(){let{gd:t,fd:e}=this.id;if(t())return;let i=this.el,{offset:s,noClamp:r}=this.$props;sl(i,{clamp:!r(),offset:s(),orientation:e()})}}function sl(t,{clamp:e,offset:i,orientation:s}){let{width:r,height:n}=t.getBoundingClientRect(),a={top:null,right:null,bottom:null,left:null};if(a["horizontal"===s?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${i}px))`,"horizontal"===s){let t=r/2;if(e){let e=`max(0px, calc(var(--slider-pointer) - ${t}px))`,i=`calc(100% - ${r}px)`;a.left=`min(${e}, ${i})`}else a.left=`calc(var(--slider-pointer) - ${t}px)`}else{let t=n/2;if(e){let e=`max(${t}px, calc(var(--slider-pointer) - ${t}px))`,i=`calc(100% - ${n}px)`;a.bottom=`min(${e}, ${i})`}else a.bottom=`calc(var(--slider-pointer) - ${t}px)`}Object.assign(t.style,a)}sh.props={offset:0,noClamp:!1};class so extends o.O{constructor(){super(...arguments),this.wd=e9(this.zd.bind(this),25)}onSetup(){this.Ma=ti(),(0,o.Z)(iX,{default:"percent"}),new iJ({Xc:this.$props.step,Yc:this.$props.keyStep,_c:this.$props.disabled,Zc:Math.round,Tc:this.Tc.bind(this),Uc:this.Uc.bind(this),xd:this.xd.bind(this),yd:this.yd.bind(this)}).attach(this),(0,o.e)(this.ec.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),t8(t,"aria-label","Volume");let{canSetVolume:e}=this.Ma.$state;this.setAttributes({"data-supported":e,"aria-hidden":iV(()=>!e())})}Tc(){let{value:t}=this.$state;return Math.round(t())}Uc(){let{value:t,max:e}=this.$state;return is(t()/e()*100,2)+"%"}ec(){let{muted:t,volume:e}=this.Ma.$state,i=t()?0:100*e();this.$state.value.set(i),this.dispatch("value-change",{detail:i})}zd(t){if(!t.trigger)return;let e=is(t.detail/100,3);this.Ma.remote.changeVolume(e,t)}yd(t){this.wd(t)}xd(t){this.wd(t)}}so.props={...iJ.props,keyStep:5,shiftKeyMultiplier:2},so.state=iK;class su extends o.O{constructor(){super(),this.Dd=(0,o.s)(null),this.Bd=!1,new iJ({Od:!0,Xc:this.Xc.bind(this),Yc:this.Yc.bind(this),_c:this._c.bind(this),Zc:this.Zc,Tc:this.Tc.bind(this),Uc:this.Uc.bind(this),Ed:this.Ed.bind(this),xd:this.xd.bind(this),Cd:this.Cd.bind(this),yd:this.yd.bind(this)})}onSetup(){this.Ma=ti(),(0,o.Z)(iX,{default:"time",value:this.Gd.bind(this),time:this.Hd.bind(this)}),this.setAttributes({"data-chapters":this.Id.bind(this)}),this.setStyles({"--slider-progress":this.Jd.bind(this)}),(0,o.e)(this.fc.bind(this)),(0,o.e)(this.Kd.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),t8(t,"aria-label","Seek")}onConnect(t){(0,o.e)(this.Ld.bind(this)),ty(this.Ma.textTracks,"chapters",this.Dd.set)}Jd(){let{bufferedEnd:t,duration:e}=this.Ma.$state;return is(100*Math.min(t()/Math.max(e(),1),1),3)+"%"}Id(){let{duration:t}=this.Ma.$state;return this.Dd()?.cues.length&&Number.isFinite(t())&&t()>0}Kd(){this.Fd=e9(this.Eb.bind(this),this.$props.seekingRequestThrottle())}fc(){let{currentTime:t}=this.Ma.$state,{value:e,dragging:i}=this.$state,s=this.Md(t());(0,o.p)(i)||(e.set(s),this.dispatch("value-change",{detail:s}))}Ld(){let t=this.Ma.player.el,{hd:e}=(0,o.M)(iY);t&&e()&&(0,o.m)(t,"data-preview",this.$state.active())}Eb(t,e){this.Ma.remote.seeking(t,e)}Nd(t,e,i){this.Fd.cancel();let{live:s}=this.Ma.$state;if(s()&&e>=99){this.Ma.remote.seekToLiveEdge(i);return}this.Ma.remote.seek(t,i)}Ed(t){let{pauseWhileDragging:e}=this.$props;if(e()){let{paused:e}=this.Ma.$state;this.Bd=!e(),this.Ma.remote.pause(t)}}xd(t){this.Fd(this.Ad(t.detail),t)}Cd(t){let e=t.detail;this.Nd(this.Ad(e),e,t);let{pauseWhileDragging:i}=this.$props;i()&&this.Bd&&(this.Ma.remote.play(t),this.Bd=!1)}yd(t){let{dragging:e}=this.$state;!e()&&t.trigger&&this.Cd(t)}Xc(){let t=this.$props.step()/this.Ma.$state.duration()*100;return Number.isFinite(t)?t:1}Yc(){let t=this.$props.keyStep()/this.Ma.$state.duration()*100;return Number.isFinite(t)?t:1}Zc(t){return is(t,3)}_c(){let{canSeek:t}=this.Ma.$state;return this.$props.disabled()||!t()}Tc(){let{value:t}=this.$state;return Math.round(t())}Uc(){let t=this.Ad(this.$state.value()),{duration:e}=this.Ma.$state;return Number.isFinite(t)?`${ss(t)} out of ${ss(e())}`:"live"}Ad(t){let{duration:e}=this.Ma.$state;return Math.round(t/100*e())}Md(t){let{liveEdge:e,duration:i}=this.Ma.$state,s=Math.max(0,Math.min(1,e()?1:Math.min(t,i())/i()));return Number.isNaN(s)?0:Number.isFinite(s)?100*s:100}Gd(t){let e=this.Ad(t),{live:i,duration:s}=this.Ma.$state;return Number.isFinite(e)?(i()?e-s():e).toFixed(0):"LIVE"}Hd(t,e,i,s){let r=this.Ad(t),{live:n,duration:a}=this.Ma.$state,h=n()?r-a():r;return Number.isFinite(r)?`${h<0?"-":""}${si(Math.abs(h),e,i,s)}`:"LIVE"}}su.props={...iJ.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,seekingRequestThrottle:100},su.state=iK;var sc=Object.defineProperty,sd=Object.getOwnPropertyDescriptor,sp=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sd(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sc(e,i,n),n};class sf extends o.O{constructor(){super(...arguments),this.Rd=null,this.Pd=[],this.Td=(0,o.s)(null),this.Qd=(0,o.s)([]),this.Sd=(0,o.s)(-1),this.Ud=(0,o.s)(-1),this.Vd=0,this.be=(0,o._)(t=>{let e,i=this.Qd();for(let s=this.Vd;s<this.Pd.length;s++)if(e=this.Wd(i[s],t),this.Pd[s]?.style.setProperty("--chapter-progress",e+"%"),e<100){this.Vd=s;break}}),this.ce=(0,o.T)(this.de.bind(this)),this.ee=e7(()=>{let t=(0,o.p)(this.Td);this.scope&&t&&t.cues.length&&(this.Qd.set(this.fe(t.cues)),this.Sd.set(0))},150,!0)}get cues(){return this.Qd()}get activeCue(){return this.Qd()[this.Sd()]||null}get activePointerCue(){return this.Qd()[this.Ud()]||null}onSetup(){this.Ma=ti(),this.Yd=(0,o.a6)(su.state)}onAttach(t){ty(this.Ma.textTracks,"chapters",this.Zd.bind(this)),(0,o.e)(this.ge.bind(this))}onConnect(){(0,o.o)(()=>this.j.bind(this))}onDestroy(){this.Zd(null)}setRefs(t){if(this.Pd=t,this._d?.dispose(),1===this.Pd.length){let t=this.Pd[0];t.style.width="100%",t.style.setProperty("--chapter-fill","var(--slider-fill)"),t.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.Pd.length>0&&(0,o.n)(()=>this.he(),this._d=(0,o.c)())}Zd(t){(0,o.p)(this.Td)!==t&&(this.j(),this.Td.set(t))}j(){this.Pd=[],this.Qd.set([]),this.Sd.set(-1),this.Ud.set(-1),this.Vd=0,this._d?.dispose()}he(){this.Pd.length&&((0,o.e)(this.ie.bind(this)),(0,o.e)(this.je.bind(this)),(0,o.e)(this.ke.bind(this)),(0,o.e)(this.le.bind(this)))}ie(){let t,e=this.Qd(),i=e[e.length-1].endTime;for(let s=0;s<e.length;s++)t=e[s],this.Pd[s]&&(this.Pd[s].style.width=is((t.endTime-t.startTime)/i*100,3)+"%")}je(){let{liveEdge:t,ended:e}=this.Ma.$state,{fillPercent:i,value:s}=this.Yd,r=this.Qd(),n=t(),a=(0,o.p)(this.Sd),h=r[a],l=n?this.Qd.length-1:this.$d(h&&h.startTime<=(0,o.p)(s)?a:0,i());n||e()||!h?this.Xd(0,r.length,"100%"):l>a?this.Xd(a,l,"100%"):l<a&&this.Xd(l+1,a+1,"0%");let u=n?"100%":this.Wd(r[l],i())+"%";this.ae(this.Pd[l],u),this.Sd.set(l)}ke(){let{pointing:t,pointerPercent:e}=this.Yd;if(!t()){this.Ud.set(-1);return}let i=this.$d(0,e());this.Ud.set(i)}Xd(t,e,i){for(let s=t;s<e;s++)this.ae(this.Pd[s],i)}ae(t,e){t&&t.style.setProperty("--chapter-fill",e)}$d(t,e){let i=0,s=this.Qd();for(let r=t;r<s.length;r++)if((i=this.Wd(s[r],e))>=0&&i<100)return r;return 0}le(){this.be(this.ce())}de(){let{bufferedEnd:t,duration:e}=this.Ma.$state;return 100*is(Math.min(t()/Math.max(e(),1),1),3)}Wd(t,e){let i=this.Qd();if(0===i.length)return 0;let s=i[i.length-1],r=t.startTime/s.endTime*100,n=t.endTime/s.endTime*100;return Math.max(0,is(e>=n?100:(e-r)/(n-r)*100,3))}fe(t){let e=[];0!==t[0].startTime&&e.push(new window.VTTCue(0,t[0].startTime,""));for(let i=0;i<t.length-1;i++){let s=t[i],r=t[i+1];if(e.push(s),r){let t=r.startTime-s.endTime;t>0&&e.push(new window.VTTCue(s.endTime,s.endTime+t,""))}}return e.push(t[t.length-1]),e}ge(){if(!this.scope)return;let{disabled:t}=this.$props;if(t())return;let e=this.Td();if(e){let t=this.ee.bind(this);t(),(0,o.o)((0,o.l)(e,"add-cue",t)),(0,o.o)((0,o.l)(e,"remove-cue",t))}return this.Rd=this.me(),this.Rd&&(0,o.e)(this.ne.bind(this)),()=>{this.Rd&&(this.Rd.textContent="",this.Rd=null)}}ne(){let t=this.activePointerCue||this.activeCue;this.Rd&&(this.Rd.textContent=t?.text||"")}oe(){let t=this.el;for(;t&&"slider"!==t.getAttribute("role");)t=t.parentElement;return t}me(){let t=this.oe();return t?t.querySelector('[data-part="chapter-title"]'):null}}sf.props={disabled:!1},sp([o.a0],sf.prototype,"cues",1),sp([o.a0],sf.prototype,"activeCue",1),sp([o.a0],sf.prototype,"activePointerCue",1),sp([o.a1],sf.prototype,"setRefs",1);let sb=(0,o.L)(),sm=["a[href]","[tabindex]","input","select","button"].map(t=>`${t}:not([aria-hidden])`).join(","),sg=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class sy{constructor(t){this.$c=t,this.nf=0,this.w=null,this.ej=[]}get d(){return this.ej}Pe(t){return(0,o.l)(t,"focus",this.Zh.bind(this)),this.w=t,(0,o.o)(()=>{this.w=null}),this}Hc(){this.w&&(this.Ga(),(0,o.l)(this.w,"keyup",this.Bb.bind(this)),(0,o.l)(this.w,"keydown",this.Cb.bind(this)),(0,o.o)(()=>{this.nf=0,this.ej=[]}))}Ga(){this.nf=0,this.ej=this.ij()}$e(t=this.hj()){let e=this.ej[t],i=this.$c.Ve();e&&i&&requestAnimationFrame(()=>{i.scrollTop=e.offsetTop-i.offsetHeight/2+e.offsetHeight/2})}fj(t){this.nf=t,this.ej[t]?.focus(),this.$e(t)}hj(){return this.ej.findIndex(t=>"true"===t.getAttribute("aria-checked"))}Zh(){this.Ga(),setTimeout(()=>{let t=this.hj();this.fj(t>=0?t:0)},100)}Bb(t){sg.has(t.key)&&(t.stopPropagation(),t.preventDefault())}Cb(t){if(sg.has(t.key))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.$c.We(t);break;case"Tab":this.fj(this.gj(t.shiftKey?-1:1));break;case"ArrowUp":this.fj(this.gj(-1));break;case"ArrowDown":this.fj(this.gj(1));break;case"Home":case"PageUp":this.fj(0);break;case"End":case"PageDown":this.fj(this.ej.length-1)}}gj(t){let e=this.nf;do e=(e+t+this.ej.length)%this.ej.length;while(this.ej[e]?.offsetParent===null);return e}ij(){if(!this.w)return[];let t=this.w.querySelectorAll(sm),e=[],i=t=>"menu"===t.getAttribute("role");for(let s of t)s instanceof HTMLElement&&null!==s.offsetParent&&t9(this.w,s,i)&&e.push(s);return e}}var sv=Object.defineProperty,sw=Object.getOwnPropertyDescriptor,s$=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sw(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sv(e,i,n),n};let sM=0;class sx extends o.O{constructor(){super(),this.pe=(0,o.s)(!1),this.gd=(0,o.s)(!1),this.yc=(0,o.s)(null),this.zc=(0,o.s)(null),this.ve=(0,o.s)(!1),this.qe=new Set,this.se=null,this.Ge=this.He.bind(this),this.Ie=this.Je.bind(this),this.Ke=this.Le.bind(this);let{showDelay:t}=this.$props;this.te=new iA({yc:this.yc,zc:this.zc,Gc:t,Hc:(t,e,i)=>{et(t,t=>{this.pe()?i(t):e(t)});let s=this.Me();s&&et(s,t=>{t.stopPropagation(),i(t)})},ma:this.Ne.bind(this)})}get triggerElement(){return this.yc()}get contentElement(){return this.zc()}get isSubmenu(){return!!this.we}onSetup(){this.Ma=ti();let t=++sM;this.xe=`media-menu-${t}`,this.ye=`media-menu-button-${t}`,this.re=new sy({Ve:this.Oe.bind(this),We:this.close.bind(this)}),(0,o.a5)(sb)&&(this.we=(0,o.M)(sb)),this.setAttributes({"data-open":this.pe,"data-submenu":this.isSubmenu,"data-disabled":this._c.bind(this)}),(0,o.Z)(sb,{Xe:this.yc,pe:this.pe,Ye:(0,o.s)(""),ze:this.ze.bind(this),Ae:this.Ae.bind(this),Be:this.Be.bind(this),Ce:this.Ce.bind(this),De:this.De.bind(this),ue:this.ue.bind(this)})}onAttach(t){t.style.setProperty("display","contents"),this.re.Pe(t)}onConnect(t){(0,o.e)(this.Qe.bind(this)),this.isSubmenu&&this.we?.ue(this),requestAnimationFrame(()=>{this.Kb()})}onDestroy(){this.yc.set(null),this.zc.set(null),this.se=null}Qe(){let t=this.Re();this.Kb(),this.Ee(t),t&&((0,o.e)(()=>{let{height:t}=this.Ma.$state,e=this.zc();e&&(0,o.Q)(e,"--player-height",t()+"px")}),this.re.Hc(),this.listen("pointerup",this.Se.bind(this)),(0,o.l)(window,"pointerup",this.Te.bind(this)))}Ae(t){let e=t.el,i=this.isSubmenu,s=iV(this._c.bind(this));t8(e,"tabindex",i?"-1":"0"),t8(e,"role",i?"menuitem":"button"),(0,o.m)(e,"id",this.ye),(0,o.m)(e,"aria-haspopup","menu"),(0,o.m)(e,"aria-expanded","false"),(0,o.m)(e,"data-submenu",this.isSubmenu),this.isSubmenu||this.Fe(e);let r=()=>{(0,o.m)(e,"data-open",this.pe()),(0,o.m)(e,"aria-disabled",s())};q?r():(0,o.e)(r),this.yc.set(e),(0,o.o)(()=>{this.yc.set(null)})}Be(t){let e=t.el;e.style.setProperty("display","none"),(0,o.m)(e,"id",this.xe),t8(e,"role","menu"),t8(e,"tabindex","-1"),(0,o.m)(e,"data-submenu",this.isSubmenu),this.zc.set(e),(0,o.o)(()=>this.zc.set(null)),this.isSubmenu||this.Fe(e);let i=()=>{(0,o.m)(e,"data-open",this.pe())};q?i():(0,o.e)(i),this.re.Pe(e),this.Ee(!1),q||requestAnimationFrame(this.Kb.bind(this))}Ce(t){this.se=t}Fe(t){(0,o.l)(t,"click",t=>t.stopPropagation()),(0,o.l)(t,"pointerup",t=>t.stopPropagation())}Ee(t){let e=(0,o.p)(this.zc);e&&(0,o.m)(e,"aria-hidden",(0,o.a3)(!t))}De(t){this.ve.set(t)}Ne(t,e){if(e?.stopPropagation(),this.pe()===t)return;if(this._c()){t&&this.te.hide(e);return}let i=this.yc(),s=this.zc();if(i&&((0,o.m)(i,"aria-controls",t&&this.xe),(0,o.m)(i,"aria-expanded",(0,o.a3)(t))),s&&(0,o.m)(s,"aria-labelledby",t&&this.ye),this.pe.set(t),this.Ue(e),(0,o.K)(),(0,o.G)(e))for(let e of(t?s?.focus():i?.focus(),[this.el,s]))e&&e.setAttribute("data-keyboard","");else for(let t of[this.el,s])t&&t.removeAttribute("data-keyboard");this.dispatch(t?"open":"close",{trigger:e}),t?(this.isSubmenu||this.Ma.activeMenu===this||(this.Ma.activeMenu?.close(e),this.Ma.activeMenu=this),this.se?.Ze?.(e)):(this.isSubmenu?setTimeout(()=>{for(let t of this.qe)t.close(e)},300):this.Ma.activeMenu=null,this.se?._e?.(e)),t&&!(0,o.G)(e)&&requestAnimationFrame(()=>{this.re.Ga(),setTimeout(()=>{this.re.$e()},100)})}Re(){return!this._c()&&this.pe()}_c(){return this.gd()||this.ve()}ze(t){this.gd.set(t)}Se(t){t.stopPropagation()}Te(t){if(this.isSubmenu)return setTimeout(this.close.bind(this,t),800);this.close(t)}Me(){let t=this.el.querySelector('[data-part="close-target"]');return t9(this.el,t,t=>"menu"===t.getAttribute("role"))?t:null}Oe(){if(this.isSubmenu){let t=this.el;for(;t&&"media-menu"!==t.tagName&&t.hasAttribute("data-submenu");)t=t.parentNode;return t}{let t=(0,o.p)(this.zc);return t||null}}Ue(t){this.isSubmenu||(this.pe()?this.Ma.remote.pauseControls(t):this.Ma.remote.resumeControls(t))}ue(t){this.qe.add(t),(0,o.l)(t,"open",this.Ie),(0,o.l)(t,"close",this.Ke),(0,o.o)(this.Ge)}He(t){this.qe.delete(t)}Je(t){for(let e of this.qe)if(e!==t.target)for(let t of[e.el,e.triggerElement])t?.setAttribute("aria-hidden","true");requestAnimationFrame(()=>{this.Kb()})}Le(){for(let t of this.qe)for(let e of[t.el,t.triggerElement])e?.setAttribute("aria-hidden","false");requestAnimationFrame(()=>{this.Kb()})}Kb(){let t=(0,o.p)(this.zc);if(!t||q)return;let{paddingTop:e,paddingBottom:i,borderTopWidth:s,borderBottomWidth:r}=getComputedStyle(t),n=parseFloat(e)+parseFloat(i)+parseFloat(s)+parseFloat(r),a=[...t.children];for(let t of a)t instanceof HTMLElement&&"contents"===t.style.display?a.push(...t.children):3===t.nodeType?n+=parseInt(window.getComputedStyle(t).fontSize,10):n+=t.offsetHeight||0;requestAnimationFrame(()=>{t&&((0,o.m)(t,"data-resizing",""),setTimeout(()=>{t&&(0,o.m)(t,"data-resizing",!1)},400),(0,o.Q)(t,"--menu-height",n+"px"))})}open(t){(0,o.p)(this.pe)||(this.te.show(t),(0,o.K)())}close(t){(0,o.p)(this.pe)&&(this.te.hide(t),(0,o.K)())}}sx.props={showDelay:0},s$([o.a0],sx.prototype,"triggerElement",1),s$([o.a0],sx.prototype,"contentElement",1),s$([o.a0],sx.prototype,"isSubmenu",1),s$([o.a1],sx.prototype,"open",1),s$([o.a1],sx.prototype,"close",1);var sT=Object.defineProperty,sk=Object.getOwnPropertyDescriptor;class sE extends o.O{constructor(){super(),new il}get expanded(){return this.af?.pe()??!1}onSetup(){this.af=(0,o.M)(sb)}onAttach(t){this.af.Ae(this),(0,o.e)(this.cd.bind(this)),t8(t,"type","button")}onConnect(t){let e=Array.from(t.querySelectorAll('[data-part="hint"]')).pop();e&&(0,o.e)(()=>{let t=this.af.Ye();t&&(e.textContent=t)}),et(t,t=>{this.dispatch("select",{trigger:t})})}cd(){this.af.De(this.$props.disabled())}}sE.props={disabled:!1},((t,e,i,s)=>{for(var r,n=s>1?void 0:s?sk(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sT(e,i,n)})([o.a0],sE.prototype,"expanded",1);class sP extends sE{}class sS extends o.O{constructor(){super(...arguments),this.b=null}onSetup(){this.Ma=ti(),(0,o.Z)(sA,{O:this.cf.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){this.b?.remove(),this.b=null}cf(t){this.bf(!1),this.b=t,ei(()=>{ei(()=>{this.connectScope&&(0,o.e)(this.cd.bind(this))})})}cd(){let{fullscreen:t}=this.Ma.$state,{disabled:e}=this.$props,i=e();this.bf("fullscreen"===i?!t():!i)}bf(t){if(!this.b)return;let e=this.df(this.$props.container());if(!e)return;let i=this.b.parentElement===e;(0,o.m)(this.b,"data-portal",t),t?i||(this.b.remove(),e.append(this.b)):i&&this.b.parentElement===e&&(this.b.remove(),this.el?.append(this.b))}df(t){return t instanceof HTMLElement?t:t?document.querySelector(t):document.body}}sS.props={container:null,disabled:!1};let sA=(0,o.L)();class sO extends o.O{constructor(){super(),new il;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.af=(0,o.M)(sb),this.af.Be(this),(0,o.a5)(sA)){let e=(0,o.M)(sA);e&&((0,o.Z)(sA,null),e.O(t),(0,o.o)(()=>e.O(null)))}}onConnect(t){(0,o.e)(this.Jc.bind(this))}Jc(){if(!this.el)return;let t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:e,alignOffset:i}=this.$props;return es(this.el,this.Ic(),t,{offsetVarName:"media-menu",xOffset:i(),yOffset:e()})}this.el.removeAttribute("style"),this.el.style.display="none"}Ic(){return this.af.Xe()}}sO.props={placement:null,offset:0,alignOffset:0};let sC=(0,o.L)();class sj extends o.V{constructor(){super(...arguments),this.jj=new Set,this.mf=(0,o.s)(""),this.ef=null,this.lj=this.ma.bind(this)}get ff(){return Array.from(this.jj).map(t=>t.mf())}get value(){return this.mf()}set value(t){this.ma(t)}onSetup(){(0,o.Z)(sC,{add:this.mj.bind(this),remove:this.nj.bind(this)})}onAttach(t){let e=(0,o.a5)(sb);e||t8(t,"role","radiogroup"),this.setAttributes({value:this.mf})}onDestroy(){this.jj.clear()}mj(t){this.jj.has(t)||(this.jj.add(t),t.jf=this.lj,t.hf(t.mf()===this.mf()))}nj(t){t.jf=null,this.jj.delete(t)}ma(t,e){let i=(0,o.p)(this.mf);if(!t||t===i)return;let s=this.kj(i),r=this.kj(t);s?.hf(!1,e),r?.hf(!0,e),this.mf.set(t),this.yd?.(t,e)}kj(t){for(let e of this.jj)if(t===(0,o.p)(e.mf))return e;return null}}var sR=Object.defineProperty,sq=Object.getOwnPropertyDescriptor,sD=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sq(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sR(e,i,n),n};class sF extends o.O{constructor(){super(),this.ef=new sj,this.ef.yd=this.yd.bind(this)}get values(){return this.ef.ff}get value(){return this.ef.value}set value(t){this.ef.value=t}onSetup(){q?this.Vc():(0,o.e)(this.Vc.bind(this))}Vc(){this.ef.value=this.$props.value()}yd(t,e){let i=this.createEvent("change",{detail:t,trigger:e});this.dispatch(i)}}sF.props={value:""},sD([o.a0],sF.prototype,"values",1),sD([o.a0],sF.prototype,"value",1);var sN=Object.defineProperty,sL=Object.getOwnPropertyDescriptor;class sI extends o.O{constructor(){super(),this.gf=(0,o.s)(!1),this.ef={mf:this.$props.value,hf:this.hf.bind(this),jf:null},new il}get checked(){return this.gf()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.gf,"aria-checked":iV(this.gf)})}onAttach(t){let e=(0,o.a5)(sb);t8(t,"tabindex",e?"-1":"0"),t8(t,"role",e?"menuitemradio":"radio"),(0,o.e)(this.Vc.bind(this))}onConnect(t){this.kf(),et(t,this.Nc.bind(this)),(0,o.o)(this.c.bind(this))}c(){(0,o.n)(()=>{let t=(0,o.M)(sC);t.remove(this.ef)},this.connectScope)}kf(){let t=(0,o.M)(sC);t.add(this.ef)}Vc(){let{value:t}=this.$props,e=t();(0,o.p)(this.gf)&&this.ef.jf?.(e)}Nc(t){(0,o.p)(this.gf)||(this.ma(!0,t),this.lf(t),this.ef.jf?.(o.p(this.$props.value),t))}hf(t,e){(0,o.p)(this.gf)!==t&&this.ma(t,e)}ma(t,e){this.gf.set(t),this.dispatch("change",{detail:t,trigger:e})}lf(t){this.dispatch("select",{trigger:t})}}sI.props={value:""},((t,e,i,s)=>{for(var r,n=s>1?void 0:s?sL(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sN(e,i,n)})([o.a0],sI.prototype,"checked",1);var sV=Object.defineProperty,sz=Object.getOwnPropertyDescriptor,sQ=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sz(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sV(e,i,n),n};class s_ extends o.O{constructor(){super(),this.nf=(0,o.s)(0),this.ya=(0,o.s)(null),this.ef=new sj,this.ef.yd=this.yd.bind(this)}get value(){return this.ef.value}get disabled(){let t=this.ya();return!t||!t.cues.length}onSetup(){this.Ma=ti(),(0,o.a5)(sb)&&(this.af=(0,o.M)(sb));let{thumbnails:t}=this.$props;this.setAttributes({"data-thumbnails":()=>!!t()})}onAttach(t){this.af?.Ce({Ze:this.Ze.bind(this)})}getOptions(){let t=this.ya();return t?t.cues.map((t,e)=>({cue:t,value:e+"",label:t.text,startTime:si(t.startTime,!1),duration:ss(t.endTime-t.startTime)})):[]}Ze(){(0,o.p)(()=>this.fc())}onConnect(t){(0,o.e)(this.Vc.bind(this)),(0,o.e)(this.fc.bind(this)),(0,o.e)(this.of.bind(this)),ty(this.Ma.textTracks,"chapters",this.ya.set)}Vc(){this.ef.value=this.pf()}fc(){if(!this.af?.pe())return;let t=this.ya();if(!t){this.nf.set(-1);return}let{currentTime:e}=this.Ma.$state,i=e(),s=t.cues.findIndex(t=>tg(t,i));if(this.nf.set(s),s>=0){let e=t.cues[s],r=this.el.querySelector("[aria-checked='true']"),n=(i-e.startTime)/(e.endTime-e.startTime)*100;r&&(0,o.Q)(r,"--progress",is(n,3)+"%")}}of(){this.af?.ze(this.disabled)}pf(){return this.nf()+""}yd(t,e){if(this.disabled||!e)return;let i=+t,s=this.ya()?.cues;(0,o.a)(i)&&s?.[i]&&(this.nf.set(i),this.Ma.remote.seek(s[i].startTime,e),this.dispatch("change",{detail:s[i],trigger:e}))}}s_.props={thumbnails:""},sQ([o.a0],s_.prototype,"value",1),sQ([o.a0],s_.prototype,"disabled",1),sQ([o.a1],s_.prototype,"getOptions",1);var sH=Object.defineProperty,sW=Object.getOwnPropertyDescriptor,sU=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sW(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sH(e,i,n),n};class sK extends o.O{constructor(){super(),this.ef=new sj,this.ef.yd=this.yd.bind(this)}get value(){return this.ef.value}get disabled(){let{audioTracks:t}=this.Ma.$state;return 0===t().length}onSetup(){this.Ma=ti(),(0,o.a5)(sb)&&(this.af=(0,o.M)(sb))}onConnect(t){(0,o.e)(this.Vc.bind(this)),(0,o.e)(this.of.bind(this)),(0,o.e)(this.qf.bind(this))}getOptions(){let{audioTracks:t}=this.Ma.$state;return t().map(t=>({track:t,label:t.label,value:t.label.toLowerCase()}))}Vc(){this.ef.value=this.pf()}qf(){let{emptyLabel:t}=this.$props,{audioTrack:e}=this.Ma.$state,i=e();this.af?.Ye.set(i?.label??t())}of(){this.af?.ze(this.disabled)}pf(){let{audioTrack:t}=this.Ma.$state,e=t();return e?e.label.toLowerCase():""}yd(t,e){if(this.disabled)return;let i=this.Ma.audioTracks.toArray().findIndex(e=>e.label.toLowerCase()===t);if(i>=0){let t=this.Ma.audioTracks[i];this.Ma.remote.changeAudioTrack(i,e),this.dispatch("change",{detail:t,trigger:e})}}}sK.props={emptyLabel:"Default"},sU([o.a0],sK.prototype,"value",1),sU([o.a0],sK.prototype,"disabled",1),sU([o.a1],sK.prototype,"getOptions",1);var sB=Object.defineProperty,sG=Object.getOwnPropertyDescriptor,sZ=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sG(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sB(e,i,n),n};class sX extends o.O{constructor(){super(),this.ef=new sj,this.ef.yd=this.yd.bind(this)}get value(){return this.ef.value}get disabled(){let{textTracks:t}=this.Ma.$state;return 0===t().filter(tw).length}onSetup(){this.Ma=ti(),(0,o.a5)(sb)&&(this.af=(0,o.M)(sb))}onConnect(t){super.onConnect?.(t),(0,o.e)(this.Vc.bind(this)),(0,o.e)(this.of.bind(this)),(0,o.e)(this.qf.bind(this))}getOptions(){let{offLabel:t}=this.$props,{textTracks:e}=this.Ma.$state;return[{value:"off",label:t},...e().filter(tw).map(t=>({track:t,label:t.label,value:t.label.toLowerCase()}))]}Vc(){this.ef.value=this.pf()}qf(){let{offLabel:t}=this.$props,{textTrack:e}=this.Ma.$state,i=e();this.af?.Ye.set(i&&tw(i)&&"showing"===i.mode?i.label:t())}of(){this.af?.ze(this.disabled)}pf(){let{textTrack:t}=this.Ma.$state,e=t();return e&&tw(e)&&"showing"===e.mode?e.label.toLowerCase():"off"}yd(t,e){if(this.disabled)return;if("off"===t){let t=this.Ma.textTracks.selected;if(t){let i=this.Ma.textTracks.toArray().indexOf(t);this.Ma.remote.changeTextTrackMode(i,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}let i=this.Ma.textTracks.toArray().findIndex(e=>e.label.toLowerCase()===t);if(i>=0){let t=this.Ma.textTracks[i];this.Ma.remote.changeTextTrackMode(i,"showing",e),this.dispatch("change",{detail:t,trigger:e})}}}sX.props={offLabel:"Off"},sZ([o.a0],sX.prototype,"value",1),sZ([o.a0],sX.prototype,"disabled",1),sZ([o.a1],sX.prototype,"getOptions",1);var sY=Object.defineProperty,sJ=Object.getOwnPropertyDescriptor,s0=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sJ(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sY(e,i,n),n};class s1 extends o.O{constructor(){super(),this.ef=new sj,this.ef.yd=this.yd.bind(this)}get value(){return this.ef.value}get disabled(){let{rates:t}=this.$props,{canSetPlaybackRate:e}=this.Ma.$state;return!e()||0===t().length}onSetup(){this.Ma=ti(),(0,o.a5)(sb)&&(this.af=(0,o.M)(sb))}onConnect(t){(0,o.e)(this.Vc.bind(this)),(0,o.e)(this.qf.bind(this)),(0,o.e)(this.of.bind(this))}getOptions(){let{rates:t,normalLabel:e}=this.$props;return t().map(t=>({label:1===t?e:t+"\xd7",value:t+""}))}Vc(){this.ef.value=this.pf()}qf(){let{normalLabel:t}=this.$props,{playbackRate:e}=this.Ma.$state,i=e();this.af?.Ye.set(1===i?t():i+"\xd7")}of(){this.af?.ze(this.disabled)}pf(){let{playbackRate:t}=this.Ma.$state;return t()+""}yd(t,e){if(this.disabled)return;let i=+t;this.Ma.remote.changePlaybackRate(i,e),this.dispatch("change",{detail:i,trigger:e})}}s1.props={normalLabel:"Normal",rates:[.25,.5,.75,1,1.25,1.5,1.75,2]},s0([o.a0],s1.prototype,"value",1),s0([o.a0],s1.prototype,"disabled",1),s0([o.a1],s1.prototype,"getOptions",1);var s2=Object.defineProperty,s5=Object.getOwnPropertyDescriptor,s6=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?s5(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&s2(e,i,n),n};class s3 extends o.O{constructor(){super(),this.sf=(0,o.T)(()=>{let{qualities:t}=this.Ma.$state;return[...t()].sort((t,e)=>e.height===t.height?e.bitrate-t.bitrate:e.height-t.height)}),this.ef=new sj,this.ef.yd=this.yd.bind(this)}get value(){return this.ef.value}get disabled(){let{canSetQuality:t,qualities:e}=this.Ma.$state;return!t()||0===e().length}onSetup(){this.Ma=ti(),(0,o.a5)(sb)&&(this.af=(0,o.M)(sb))}onConnect(t){(0,o.e)(this.Vc.bind(this)),(0,o.e)(this.of.bind(this)),(0,o.e)(this.qf.bind(this))}getOptions(){let{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.sf().map(t=>{let i=t.bitrate>=0?`${is(t.bitrate/1e6,2)} Mbps`:null;return{quality:t,label:t.height+"p",value:this.rf(t),bitrate:()=>e()?null:i}})]}Vc(){this.ef.value=this.pf()}qf(){let{autoLabel:t}=this.$props,{autoQuality:e,quality:i}=this.Ma.$state,s=i()?i().height+"p":"";this.af?.Ye.set(e()?t()+(s?` (${s})`:""):s)}of(){this.af?.ze(this.disabled)}yd(t,e){if(this.disabled)return;if("auto"===t){this.Ma.remote.changeQuality(-1,e),this.dispatch("change",{detail:"auto",trigger:e});return}let{qualities:i}=this.Ma.$state,s=(0,o.p)(i).findIndex(e=>this.rf(e)===t);if(s>=0){let t=(0,o.p)(i)[s];this.Ma.remote.changeQuality(s,e),this.dispatch("change",{detail:t,trigger:e})}}pf(){let{quality:t,autoQuality:e}=this.Ma.$state;if(e())return"auto";let i=t();return i?this.rf(i):"auto"}rf(t){return t.height+"_"+t.bitrate}}s3.props={autoLabel:"Auto",hideBitrate:!1},s6([o.a0],s3.prototype,"value",1),s6([o.a0],s3.prototype,"disabled",1),s6([o.a1],s3.prototype,"getOptions",1);let s4=class extends o.O{constructor(){super(...arguments),this.Qb=null,this.tf=0,this.uf=-1}onSetup(){this.Ma=ti();let{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){this.Qb=this.Ma.player.el?.querySelector("[data-media-provider]"),(0,o.e)(this.wf.bind(this))}wf(){let t=this.$props.event();if(this.Qb&&t){if(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),"pointerup"===t||"pointerdown"===t){let e=this.Ma.$state.pointer();"coarse"===e&&(t="pointerup"===t?"touchend":"touchstart")}(0,o.l)(this.Qb,t,this.xf.bind(this),{passive:!1})}}xf(t){if((0,o.E)(t)&&(0!==t.button||this.Ma.activeMenu)||(0,o.P)(t)&&this.Ma.activeMenu||ee(t)||!this.yf(t))return;t.MEDIA_GESTURE=!0,t.preventDefault();let e=(0,o.p)(this.$props.event),i=e?.startsWith("dbl");if(i){if(1===this.tf){queueMicrotask(()=>this.vf(t)),clearTimeout(this.uf),this.tf=0;return}}else 0===this.tf&&setTimeout(()=>{1===this.tf&&this.vf(t)},250);0===this.tf&&(this.uf=window.setTimeout(()=>{this.tf=0},275)),this.tf++}vf(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.zf()&&this.Af((0,o.p)(this.$props.action),t),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}yf(t){if(!this.el)return!1;if((0,o.E)(t)||(0,o.a7)(t)||(0,o.P)(t)){let e=(0,o.P)(t)?t.changedTouches[0]??t.touches[0]:void 0,i=e?.clientX??t.clientX,s=e?.clientY??t.clientY,r=this.el.getBoundingClientRect(),n=s>=r.top&&s<=r.bottom&&i>=r.left&&i<=r.right;return t.type.includes("leave")?!n:n}return!0}zf(){let t=this.Ma.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(t).sort((t,e)=>+getComputedStyle(e).zIndex-+getComputedStyle(t).zIndex)[0]===this.el}Af(t,e){if(!t)return;let i=new o.D("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(i),i.defaultPrevented)return;let[s,r]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.Ma.remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?this.Ma.remote.seek((0,o.p)(this.Ma.$state.currentTime)+(+r||0),e):this.Ma.remote[(0,o.X)(s)](e),this.dispatch("trigger",{detail:t,trigger:e})}};s4.props={event:void 0,action:void 0};class s8{constructor(t){this.Hf=t,this.priority=10,this.ya=null,this.oj=(0,o.a8)()}attach(){}canRender(){return!0}detach(){this.oj.empty(),this.Hf.reset(),this.ya=null}changeTrack(t){t&&this.ya!==t&&(this.oj.empty(),t.readyState<2?(this.Hf.reset(),this.oj.add((0,o.l)(t,"load",()=>this.pj(t),{once:!0}))):this.pj(t),this.oj.add((0,o.l)(t,"add-cue",t=>{this.Hf.addCue(t.detail)}),(0,o.l)(t,"remove-cue",t=>{this.Hf.removeCue(t.detail)})),this.ya=t)}pj(t){this.Hf.changeTrack({cues:[...t.cues],regions:[...t.regions]})}}let s7=class extends o.O{onSetup(){this.Ma=ti(),this.setAttributes({"aria-hidden":iV(this.Qc.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){if(this.Hf){(0,o.e)(this.Jf.bind(this));return}i.e(562).then(i.bind(i,6562)).then(e=>{this.connectScope&&(0,o.n)(()=>{this.If=e;let{CaptionsRenderer:i}=this.If;this.Hf=new i(t),this.Gf=new s8(this.Hf),(0,o.e)(this.Jf.bind(this))},this.connectScope)})}onDestroy(){this.Gf&&(this.Gf.detach(),this.Ma.textRenderers.remove(this.Gf)),this.Hf?.destroy()}Qc(){let{textTrack:t}=this.Ma.$state,e=t();return this.Ma.$iosControls()||!e||!tw(e)}Jf(){let{viewType:t}=this.Ma.$state;return"audio"===t()?this.Lf():this.Mf()}Lf(){return(0,o.e)(this.ge.bind(this)),()=>{this.el.textContent=""}}ge(){if(this.Qc())return;let{textTrack:t}=this.Ma.$state;this.Kf(),(0,o.l)(t(),"cue-change",this.Kf.bind(this)),(0,o.e)(this.Nf.bind(this))}Kf(){this.el.textContent="";let{currentTime:t,textTrack:e}=this.Ma.$state,i=(0,o.p)(t),s=(0,o.p)(e).activeCues,{renderVTTCueString:r}=this.If;for(let t of s){let e=document.createElement("div");e.setAttribute("data-part","cue"),e.innerHTML=r(t,i),this.el.append(e)}}Nf(){let{currentTime:t}=this.Ma.$state,{updateTimedVTTCueNodes:e}=this.If;e(this.el,t())}Mf(){return(0,o.e)(this.Of.bind(this)),(0,o.e)(this.Pf.bind(this)),this.Ma.textRenderers.add(this.Gf),()=>{this.el.textContent="",this.Gf.detach(),this.Ma.textRenderers.remove(this.Gf)}}Of(){this.Hf.dir=this.$props.textDir()}Pf(){if(this.Qc())return;let{currentTime:t}=this.Ma.$state;this.Hf.currentTime=t()}};s7.props={textDir:"ltr"};class s9 extends o.O{onSetup(){this.Ma=ti(),this.Bf(),this.Cf(),this.pd()}onAttach(t){t.style.setProperty("pointer-events","none"),(0,o.e)(this.Df.bind(this)),(0,o.e)(this.Bf.bind(this)),(0,o.e)(this.Cf.bind(this)),(0,o.e)(this.pd.bind(this));let{started:e}=this.Ma.$state;this.setAttributes({"data-visible":()=>!e(),"data-loading":this.md.bind(this),"data-error":this.kd.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){let{canLoad:e,poster:i}=this.Ma.$state;window.requestAnimationFrame(()=>{e()||tr(i())}),(0,o.e)(this.Ef.bind(this))}kd(){let{error:t}=this.$state;return!(0,o.N)(t())}pd(){let{src:t}=this.$props,{$iosControls:e}=this.Ma,{poster:i}=this.Ma.$state;this.el&&(0,o.m)(this.el,"display",e()?"none":null),this.$state.hidden.set(this.kd()||!(t()||i())||e())}md(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}Df(){let t=this.$state.img();t&&((0,o.l)(t,"load",this.Ff.bind(this)),(0,o.l)(t,"error",this.sd.bind(this)))}Bf(){let{canLoad:t,poster:e}=this.Ma.$state,i=this.$props.src(),s=i||e();i&&e()!==i&&this.Ma.$state.providedPoster.set(i),this.$state.src.set(t()&&s.length?s:null)}Cf(){let{src:t,alt:e}=this.$state;e.set(t()?this.$props.alt():null)}Ef(){let{loading:t,error:e}=this.$state,{canLoad:i,poster:s}=this.Ma.$state;t.set(i()&&!!s()),e.set(null)}Ff(){let{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}sd(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}}s9.props={src:void 0,alt:void 0},s9.state=new o.S({img:null,src:null,alt:null,loading:!0,error:null,hidden:!1});let rt=class extends o.O{onSetup(){this.Ma=ti(),this.Qf();let{type:t,remainder:e}=this.$props;this.setAttributes({"data-type":t,"data-remainder":e})}onAttach(t){(0,o.e)(this.Qf.bind(this))}Qf(){let{type:t,remainder:e,padHours:i,padMinutes:s,showHours:r}=this.$props,n=this.Rf(t()),a=this.Ma.$state.duration();if(!Number.isFinite(n+a)){this.$state.timeText.set("LIVE");return}let h=e()?Math.max(0,a-n):n,l=si(h,i(),s(),r());this.$state.timeText.set(l)}Rf(t){let{bufferedEnd:e,duration:i,currentTime:s}=this.Ma.$state;switch(t){case"buffered":return e();case"duration":return i();default:return s()}}};rt.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1},rt.state=new o.S({timeText:""});var re=Object.defineProperty,ri=Object.getOwnPropertyDescriptor,rs=Object.getPrototypeOf,rr=Reflect.get,rn=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?ri(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&re(e,i,n),n},ra=(t,e,i)=>rr(rs(t),i,e);class rh extends o.O{constructor(){super(...arguments),this.menuContainer=null}get isMatch(){return this.eg.matches}get isSmallLayout(){return this.dg.matches}onSetup(){let{when:t,smallWhen:e,thumbnails:i,translations:s,menuGroup:r,noModal:n}=this.$props;this.eg=ey.create(t),this.dg=ey.create(e),this.setAttributes({"data-match":this.eg.$matches,"data-size":()=>this.dg.matches?"sm":null});let a=this;(0,o.Z)(rp,{smQueryList:this.dg,thumbnails:i,translations:s,menuGroup:r,noModal:n,get menuContainer(){return a.menuContainer}})}}rh.props={when:"",smallWhen:"",thumbnails:"",customIcons:!1,translations:null,menuGroup:"bottom",noModal:!1},rn([o.a0],rh.prototype,"menuContainer",2),rn([o.a0],rh.prototype,"isMatch",1),rn([o.a0],rh.prototype,"isSmallLayout",1);let rl=class extends rh{};rl.props={...ra(rl,rl,"props"),when:"(view-type: audio)",smallWhen:"(width < 576)"};let ro=rl,ru=class extends rh{};ru.props={...ra(ru,ru,"props"),when:"(view-type: video)",smallWhen:"(width < 576) or (height < 380)"};let rc=ru;function rd(t,e){return t()?.[e]??e}let rp=(0,o.L)();function rf(){return(0,o.M)(rp)}class rb extends ig{}class rm extends iE{}class rg extends iP{}class ry extends iS{}class rv extends iL{}class rw extends iz{}class r$ extends iQ{}class rM extends iU{}class rx extends i_{}class rT extends iH{}class rk extends iI{}class rE extends iW{}class rP extends ij{}class rS extends iR{}class rA extends iq{}class rO extends i0{}class rC extends su{}class rj extends so{}class rR extends i4{}class rq extends sa{}class rD extends i9{}class rF extends sh{}class rN extends sf{}class rL extends sx{}class rI extends sE{}class rV extends sO{}class rz extends sP{}class rQ extends sS{}class r_ extends sF{}class rH extends sI{}class rW extends s7{}class rU extends s4{}class rK extends s9{}class rB extends i3{}class rG extends rt{}let rZ=l.forwardRef((t,e)=>{let{children:i,...s}=t,r=l.Children.toArray(i),n=r.find(rJ);if(n){let t=n.props.children,i=r.map(e=>e!==n?e:l.Children.count(t)>1?l.Children.only(null):l.isValidElement(t)?t.props.children:null);return l.createElement(rX,{...s,ref:e},l.isValidElement(t)?l.cloneElement(t,void 0,i):null)}return l.createElement(rX,{...s,ref:e},i)});rZ.displayName="Slot";let rX=l.forwardRef((t,e)=>{let{children:i,...s}=t;return l.isValidElement(i)?l.cloneElement(i,{...function(t,e){let i={...e};for(let s in e){let r=t[s],n=e[s],a=/^on[A-Z]/.test(s);a?r&&n?i[s]=(...t)=>{n(...t),r(...t)}:r&&(i[s]=r):"style"===s?i[s]={...r,...n}:"className"===s&&(i[s]=[r,n].filter(Boolean).join(" "))}return{...t,...i}}(s,i.props),ref:e?(0,o.w)(e,i.ref):i.ref}):l.Children.count(i)>1?l.Children.only(null):null});rX.displayName="SlotClone";let rY=({children:t})=>l.createElement(l.Fragment,null,t);function rJ(t){return l.isValidElement(t)&&t.type===rY}let r0=["button","div","span","img","video","audio"].reduce((t,e)=>{let Node=l.forwardRef((t,i)=>{let{asChild:s,...r}=t,n=s?rZ:e;return l.createElement(n,{...r,ref:i})});return Node.displayName=`Primitive.${e}`,{...t,[e]:Node}},{}),r1=(0,o.q)(rg),r2=l.forwardRef(({children:t,...e},i)=>l.createElement(r1,{...e},e=>l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},t)));r2.displayName="Controls";let r5=(0,o.q)(ry),r6=l.forwardRef(({children:t,...e},i)=>l.createElement(r5,{...e},e=>l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},t)));r6.displayName="ControlsGroup";var r3=Object.freeze({__proto__:null,Group:r6,Root:r2});let r4=(0,o.q)(rP);function r8({children:t,...e}){return l.createElement(r4,{...e},t)}r8.displayName="Tooltip";let r7=(0,o.q)(rS),r9=l.forwardRef(({children:t,...e},i)=>l.createElement(r7,{...e},e=>l.createElement(r0.button,{...e,ref:(0,o.w)(e.ref,i)},t)));r9.displayName="TooltipTrigger";let nt=(0,o.q)(rA),ne=l.forwardRef(({children:t,...e},i)=>l.createElement(nt,{...e},e=>l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},t)));ne.displayName="TooltipContent";var ni=Object.freeze({__proto__:null,Content:ne,Root:r8,Trigger:r9});let ns=(0,o.q)(rk),nr=l.forwardRef(({children:t,...e},i)=>l.createElement(ns,{...e},e=>l.createElement(r0.button,{...e,ref:(0,o.w)(e.ref,i)},t)));nr.displayName="PlayButton";let nn=(0,o.q)(rw),na=l.forwardRef(({children:t,...e},i)=>l.createElement(nn,{...e},e=>l.createElement(r0.button,{...e,ref:(0,o.w)(e.ref,i)},t)));na.displayName="CaptionButton";let nh=(0,o.q)(r$),nl=l.forwardRef(({children:t,...e},i)=>l.createElement(nh,{...e},e=>l.createElement(r0.button,{...e,ref:(0,o.w)(e.ref,i)},t)));nl.displayName="FullscreenButton";let no=(0,o.q)(rx),nu=l.forwardRef(({children:t,...e},i)=>l.createElement(no,{...e},e=>l.createElement(r0.button,{...e,ref:(0,o.w)(e.ref,i)},t)));nu.displayName="MuteButton";let nc=(0,o.q)(rT),nd=l.forwardRef(({children:t,...e},i)=>l.createElement(nc,{...e},e=>l.createElement(r0.button,{...e,ref:(0,o.w)(e.ref,i)},t)));nd.displayName="PIPButton";let np=(0,o.q)(rE),nf=l.forwardRef(({children:t,...e},i)=>l.createElement(np,{...e},e=>l.createElement(r0.button,{...e,ref:(0,o.w)(e.ref,i)},t)));nf.displayName="SeekButton";let nb=(0,o.q)(rM),nm=l.forwardRef(({children:t,...e},i)=>l.createElement(nb,{...e},e=>l.createElement(r0.button,{...e,ref:(0,o.w)(e.ref,i)},t)));nm.displayName="LiveButton";let ng=(0,o.q)(rq),ny=(0,o.q)(rO,{events:["onDragStart","onDragEnd","onDragValueChange","onValueChange","onPointerValueChange"]}),nv=l.forwardRef(({children:t,...e},i)=>l.createElement(ny,{...e,ref:i},e=>l.createElement(r0.div,{...e},t)));nv.displayName="Slider";let nw=l.forwardRef((t,e)=>l.createElement(r0.div,{...t,ref:e}));nw.displayName="SliderThumb";let n$=l.forwardRef((t,e)=>l.createElement(r0.div,{...t,ref:e}));n$.displayName="SliderTrack";let nM=l.forwardRef((t,e)=>l.createElement(r0.div,{...t,ref:e}));nM.displayName="SliderTrackFill";let nx=(0,o.q)(rF),nT=l.forwardRef(({children:t,...e},i)=>l.createElement(nx,{...e},e=>l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},t)));nT.displayName="SliderPreview";let nk=l.forwardRef(({children:t,...e},i)=>l.createElement(ng,{...e},(e,s)=>{let r=(0,o.v)(()=>s.getValueText(),s);return l.createElement(r0.div,{...e,ref:i},r,t)}));nk.displayName="SliderValue";var nE=Object.freeze({__proto__:null,Preview:nT,Root:nv,Thumb:nw,Track:n$,TrackFill:nM,Value:nk});let nP=(0,o.q)(rj),nS=l.forwardRef(({children:t,...e},i)=>l.createElement(nP,{...e,ref:i},e=>l.createElement(r0.div,{...e},t)));nS.displayName="VolumeSlider";let nA=l.forwardRef(({children:t,...e},i)=>l.createElement(ng,{...e},(e,s)=>{let r=(0,o.v)(()=>s.getValueText(),s);return l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},r,t)}));nA.displayName="SliderValue";var nO=Object.freeze({__proto__:null,Preview:nT,Root:nS,Thumb:nw,Track:n$,TrackFill:nM,Value:nA});let nC=(0,o.q)(rB),nj=l.forwardRef(({children:t,...e},i)=>l.createElement(nC,{...e},e=>l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},t)));nj.displayName="Thumbnail";let nR=l.forwardRef(({children:t,...e},i)=>{let{crossorigin:s}=(0,o.r)(Y),{src:r,img:n}=(0,o.r)(rB.state),a=(0,o.v)(r),h=(0,o.v)(s);return l.createElement(r0.img,{crossOrigin:h,...e,src:a,ref:(0,o.w)(n.set,i)},t)});nR.displayName="ThumbnailImg";var nq=Object.freeze({__proto__:null,Img:nR,Root:nj});let nD=l.createContext({$chapters:(0,o.s)(null)});nD.displayName="TimeSliderContext";let nF=(0,o.q)(rC),nN=l.forwardRef(({children:t,...e},i)=>{let s=l.useMemo(()=>(0,o.s)(null),[]);return l.createElement(nD.Provider,{value:{$chapters:s}},l.createElement(nF,{...e,ref:i},e=>l.createElement(r0.div,{...e},t)))});nN.displayName="TimeSlider";let nL=(0,o.q)(rN),nI=l.forwardRef(({children:t,...e},i)=>l.createElement(nL,{...e},(e,s)=>l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},l.createElement(nV,{instance:s},t))));function nV({instance:t,children:e}){let i=(0,o.v)(()=>t.cues,t),s=l.useRef([]),r=l.useRef(),{$chapters:n}=l.useContext(nD);return r.current||(r.current=function(t=0,e=0,i=""){return q?{startTime:t,endTime:e,text:i,addEventListener:o.a2,removeEventListener:o.a2,dispatchEvent:o.a2}:new window.VTTCue(t,e,i)}()),l.useEffect(()=>(n.set(t),()=>void n.set(null)),[t]),l.useEffect(()=>{t.setRefs(s.current)},[i]),e(i.length?i:[r.current],t=>{if(!t){s.current.length=0;return}s.current.push(t)})}nI.displayName="SliderChapters",nV.displayName="SliderChapterTracks";let nz=l.forwardRef(({children:t,...e},i)=>{let{$chapters:s}=l.useContext(nD),[r,n]=l.useState();return l.useEffect(()=>(0,o.e)(()=>{let t=s(),e=t?.activePointerCue||t?.activeCue;n(e?.text||"")}),[]),l.createElement(r0.div,{...e,ref:i},r,t)});nz.displayName="SliderChapterTitle";let nQ=l.forwardRef(({children:t,...e},i)=>l.createElement(ng,{...e},(e,s)=>{let r=(0,o.v)(()=>s.getValueText(),s);return l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},r,t)}));nQ.displayName="SliderValue";let n_=l.forwardRef((t,e)=>l.createElement(r0.div,{...t,ref:e}));n_.displayName="SliderProgress";let nH=(0,o.q)(rR),nW=l.forwardRef(({children:t,...e},i)=>l.createElement(nH,{...e},e=>l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},t)));nW.displayName="SliderThumbnail";let nU={Root:nW,Img:nR},nK=(0,o.q)(rD,{events:["onCanPlay","onError"]}),nB=l.forwardRef(({children:t,...e},i)=>l.createElement(nK,{...e},(e,s)=>l.createElement(nG,{...e,instance:s,ref:(0,o.w)(e.ref,i)},t)));nB.displayName="SliderVideo";let nG=l.forwardRef(({instance:t,children:e,...i},s)=>{let{crossorigin:r,canLoad:n}=(0,o.r)(Y),{src:a,video:h}=t.$state,u=(0,o.v)(a),c=(0,o.v)(n),d=(0,o.v)(r);return l.createElement(r0.video,{style:{maxWidth:"unset"},...i,src:u||void 0,muted:!0,playsInline:!0,preload:c?"auto":"none",crossOrigin:d||void 0,ref:(0,o.w)(h.set,s)},e)});nG.displayName="SliderVideoProvider";var nZ=Object.freeze({__proto__:null,ChapterTitle:nz,Chapters:nI,Preview:nT,Progress:n_,Root:nN,Thumb:nw,Thumbnail:nU,Track:n$,TrackFill:nM,Value:nQ,Video:nB});let nX=(0,o.q)(r_,{events:["onChange"]}),nY=l.forwardRef(({children:t,...e},i)=>l.createElement(nX,{...e,ref:i},e=>l.createElement(r0.div,{...e},t)));nY.displayName="RadioGroup";let nJ=(0,o.q)(rH,{events:["onChange","onSelect"]}),n0=l.forwardRef(({children:t,...e},i)=>l.createElement(nJ,{...e},e=>l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},t)));n0.displayName="RadioItem";var n1=Object.freeze({__proto__:null,Item:n0,Root:nY});let n2="undefined"==typeof document,n5=rb.state.record,n6=Object.keys(n5).reduce((t,e)=>({...t,[e]:()=>n5[e]}),{});function n3(t,e){let i=(0,o.r)(Y);return(0,o.v)((e?.current?.$state||i||n6)[t])}function n4(t){let e=(0,o.r)(Y);return(0,o.x)(t?.current?t.current.$state:e||n6)}let n8=(0,o.q)(rL,{events:["onOpen","onClose"]}),n7=l.forwardRef(({children:t,...e},i)=>l.createElement(n8,{...e,ref:i},(e,i)=>l.createElement(r0.div,{...e,style:{display:i.isSubmenu?void 0:"contents",...e.style}},t)));n7.displayName="Menu";let n9=(0,o.q)(rI,{events:["onSelect"]}),at=l.forwardRef(({children:t,...e},i)=>l.createElement(n9,{...e},e=>l.createElement(r0.button,{...e,ref:(0,o.w)(e.ref,i)},t)));at.displayName="MenuButton";let ae=l.forwardRef(({disabled:t=!1,children:e,...i},s)=>{let r=n3("fullscreen");return n2||!("fullscreen"===t?!r:!t)?e:(0,u.createPortal)(l.createElement(r0.div,{...i,style:{display:"contents",...i.style},ref:s},e),document.body)});ae.displayName="MenuPortal";let ai=(0,o.q)(rV),as=l.forwardRef(({children:t,...e},i)=>l.createElement(ai,{...e},e=>l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},t)));as.displayName="MenuItems";let ar=(0,o.q)(rz),an=l.forwardRef(({children:t,...e},i)=>l.createElement(ar,{...e},e=>l.createElement(r0.div,{...e,ref:(0,o.w)(e.ref,i)},t)));an.displayName="MenuItem";var aa=Object.freeze({__proto__:null,Button:at,Content:as,Item:an,Items:as,Portal:ae,Radio:n0,RadioGroup:nY,Root:n7});function ah(t){let[e,i]=l.useState([]);return l.useEffect(()=>{if(!t){i([]);return}return(0,o.l)(t,"cue-change",()=>{i(t.activeCues)})},[t]),e}function al(t){let e=(0,o.t)(te),[i,s]=l.useState(null);return l.useEffect(()=>ty(e.textTracks,t,s),[t]),i}let ao=l.forwardRef(({children:t,...e},i)=>{let s=n3("started"),r=n3("title"),n=al("chapters"),a=ah(n),h=a[0]?.text||"";return l.createElement(r0.span,{...e,ref:i},s?h||r:r||h,t)});ao.displayName="ChapterTitle";let au=(0,o.q)(rU,{events:["onWillTrigger","onTrigger"]}),ac=l.forwardRef(({children:t,...e},i)=>l.createElement(au,{...e,ref:i},e=>l.createElement(r0.div,{...e},t)));ac.displayName="Gesture";let ad=(0,o.q)(rW),ap=l.forwardRef(({children:t,...e},i)=>l.createElement(ad,{...e,ref:i},e=>l.createElement(r0.div,{...e},t)));ap.displayName="Captions";let af=(0,o.q)(rG),ab=l.forwardRef(({children:t,...e},i)=>l.createElement(af,{...e},(e,s)=>l.createElement(am,{...e,instance:s,ref:(0,o.w)(e.ref,i)},t)));ab.displayName="Time";let am=l.forwardRef(({instance:t,children:e,...i},s)=>{let{timeText:r}=t.$state,n=(0,o.v)(r);return l.createElement(r0.div,{...i,ref:s},n,e)});am.displayName="TimeText";let ag=l.forwardRef(({size:t=96,children:e,...i},s)=>l.createElement("svg",{width:t,height:t,fill:"none",viewBox:"0 0 120 120","aria-hidden":"true","data-part":"root",...i,ref:s},e)),ay=l.forwardRef(({width:t=8,children:e,...i},s)=>l.createElement("circle",{cx:"60",cy:"60",r:"54",stroke:"currentColor",strokeWidth:t,"data-part":"track",...i,ref:s},e)),av=l.forwardRef(({width:t=8,fillPercent:e=50,children:i,...s},r)=>l.createElement("circle",{cx:"60",cy:"60",r:"54",stroke:"currentColor",pathLength:"100",strokeWidth:t,strokeDasharray:100,strokeDashoffset:100-e,"data-part":"track-fill",...s,ref:r},i));var aw=Object.freeze({__proto__:null,Root:ag,Track:ay,TrackFill:av});function a$(t){let e=(0,o.y)(),i=l.useMemo(()=>(0,o.n)(()=>ey.create(t),e),[t]),[s,r]=l.useState(i.matches);return l.useEffect(()=>(r(i.matches),(0,o.l)(i,"change",()=>{r(i.matches)})),[t]),s}function aM(){let t=(0,o.t)(te),{audioTracks:e,audioTrack:i}=t.$state,s=(0,o.v)(e);return(0,o.v)(i),l.useMemo(()=>{let r=s.map(s=>({track:s,label:s.label,value:ax(s),get selected(){return i()===s},select(i){let r=e().indexOf(s);r>=0&&t.remote.changeAudioTrack(r,i)}}));return Object.defineProperty(r,"disabled",{get:()=>!r.length}),Object.defineProperty(r,"selectedTrack",{get:()=>i()}),Object.defineProperty(r,"selectedValue",{get(){let t=i();return t?ax(t):void 0}}),r},[s])}function ax(t){return t.label.toLowerCase()}function aT({off:t=!0}={}){let e=(0,o.t)(te),{textTracks:i,textTrack:s}=e.$state,r=(0,o.v)(i);return(0,o.v)(s),l.useMemo(()=>{let n=r.filter(tw),a=n.map(t=>({track:t,label:t.label,value:ak(t),get selected(){return s()===t},select(s){let r=i().indexOf(t);r>=0&&e.remote.changeTextTrackMode(r,"showing",s)}}));return t&&a.unshift({track:null,label:(0,o.b)(t)?t:"Off",value:"off",get selected(){return!s()},select(t){e.remote.toggleCaptions(t)}}),Object.defineProperty(a,"disabled",{get:()=>!n.length}),Object.defineProperty(a,"selectedTrack",{get:()=>s()}),Object.defineProperty(a,"selectedValue",{get(){let t=s();return t?ak(t):"off"}}),a},[r])}function ak(t){return t.label.toLowerCase()}function aE(){let t=(0,o.t)(te),e=al("chapters");return ah(e),l.useMemo(()=>{let i=e?e.cues.map((i,s)=>{let r=null,n;return{cue:i,label:i.text,value:s+"",startTimeText:si(i.startTime,!1),durationText:ss(i.endTime-i.startTime),get selected(){return i===e.activeCues[0]},setProgressVar(s){if(!s||i!==e.activeCues[0]){n?.(),n=void 0,s?.style.setProperty("--progress","0%"),r=null;return}r!==s&&(r=s,n?.(),n=(0,o.e)(()=>{let{currentTime:e}=t.$state,r=e(),n=100*Math.min((r-i.startTime)/(i.endTime-i.startTime),1);s.style.setProperty("--progress",n.toFixed(3)+"%")}))},select(e){t.remote.seek(i.startTime,e)}}}):[];return Object.defineProperty(i,"selectedValue",{get(){let t=i.findIndex(t=>t.selected);return(t>=0?t:0)+""}}),i},[e])}function aP({auto:t=!0,sort:e="descending"}={}){let i=(0,o.t)(te),{qualities:s,quality:r,autoQuality:n,canSetQuality:a}=i.$state,h=(0,o.v)(s);return(0,o.v)(r),(0,o.v)(n),(0,o.v)(a),l.useMemo(()=>{let l=[...h].sort("descending"===e?aA:aS).map(t=>({quality:t,label:t.height+"p",value:aO(t),bitrateText:t.bitrate>=0?`${(t.bitrate/1e6).toFixed(2)} Mbps`:null,get selected(){return t===r()},get autoSelected(){return n()},select(e){let r=s().indexOf(t);r>=0&&i.remote.changeQuality(r,e)}}));return t&&l.unshift({quality:null,label:(0,o.b)(t)?t:"Auto",value:"auto",bitrateText:null,get selected(){return n()},get autoSelected(){return n()},select(t){i.remote.requestAutoQuality(t)}}),Object.defineProperty(l,"disabled",{get:()=>!a()||!h.length}),Object.defineProperty(l,"selectedQuality",{get:()=>r()}),Object.defineProperty(l,"selectedValue",{get(){let t=r();return!n()&&t?aO(t):"auto"}}),l},[h,e])}function aS(t,e){return t.height===e.height?t.bitrate-e.bitrate:t.height-e.height}function aA(t,e){return e.height===t.height?e.bitrate-t.bitrate:e.height-t.height}function aO(t){return t.height+"_"+t.bitrate}let aC=[.25,.5,.75,1,1.25,1.5,1.75,2];function aj({rates:t=aC,normalLabel:e="Normal"}={}){let i=(0,o.t)(te),{playbackRate:s,canSetPlaybackRate:r}=i.$state;return(0,o.v)(s),(0,o.v)(r),l.useMemo(()=>{let n=t.map(t=>{let r="number"==typeof t?1===t&&e?e:t+"x":t.label,n="number"==typeof t?t:t.rate;return{label:r,value:n+"",rate:n,get selected(){return s()===n},select(t){i.remote.changePlaybackRate(n,t)}}});return Object.defineProperty(n,"disabled",{get:()=>!r()||!n.length}),Object.defineProperty(n,"selectedValue",{get:()=>s()+""}),n},[t])}}}]);