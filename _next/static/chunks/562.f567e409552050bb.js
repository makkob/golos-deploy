"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{6562:function(t,e,i){i.r(e),i.d(e,{CaptionsRenderer:function(){return r.C},ParseError:function(){return r.P},ParseErrorCode:function(){return r.c},TextCue:function(){return r.T},VTTCue:function(){return r.b},VTTRegion:function(){return r.h},createVTTCueTemplate:function(){return r.i},parseByteStream:function(){return r.e},parseResponse:function(){return r.d},parseText:function(){return r.f},parseTextStream:function(){return r.g},parseVTTTimestamp:function(){return r.p},renderVTTCueString:function(){return r.r},renderVTTTokensString:function(){return r.j},tokenizeVTTCue:function(){return r.t},updateTimedVTTCueNodes:function(){return r.u}});var r=i(9803)},9803:function(t,e,i){i.d(e,{C:function(){return ts},P:function(){return n},T:function(){return f},V:function(){return L},a:function(){return j},b:function(){return VTTCue},c:function(){return r},d:function(){return u},e:function(){return c},f:function(){return o},g:function(){return h},h:function(){return g},i:function(){return q},j:function(){return Y},p:function(){return $},r:function(){return X},t:function(){return I},u:function(){return D}});let r={LoadFail:0,BadSignature:1,BadTimestamp:2,BadSettingValue:3,BadFormat:4,UnknownSetting:5};class n extends Error{code;line;constructor(t){super(t.reason),this.code=t.code,this.line=t.line}}let s=/\r?\n|\r/gm;class l{writable;readable;constructor(t){let e=new a(t);this.writable=new WritableStream({write(t){e.transform(t)},close(){e.close()}}),this.readable=new ReadableStream({start(t){e.onLine=e=>t.enqueue(e),e.onClose=()=>t.close()}})}}class a{x="";y;onLine;onClose;constructor(t){this.y=new TextDecoder(t)}transform(t){this.x+=this.y.decode(t,{stream:!0});let e=this.x.split(s);this.x=e.pop()||"";for(let t=0;t<e.length;t++)this.onLine(e[t].trim())}close(){this.x&&this.onLine(this.x.trim()),this.x="",this.onClose()}}async function o(t,e){let i=new ReadableStream({start(e){let i=t.split(s);for(let t of i)e.enqueue(t);e.close()}});return h(i,e)}async function h(t,e){let r,n;let s=e?.type??"vtt";if("string"==typeof s)switch(s){case"srt":r=(await i.e(156).then(i.bind(i,8156))).default;break;case"ssa":case"ass":r=(await i.e(641).then(i.bind(i,1641))).default;break;default:r=(await Promise.resolve().then(function(){return S})).default}else r=s;let l=t.getReader(),a=r(),o=!!e?.strict||!!e?.errors;await a.init({strict:!1,...e,errors:o,type:s,cancel(){l.cancel(),n=a.done(!0)}});let h=1;for(;;){let{value:t,done:e}=await l.read();if(e){a.parse("",h),n=a.done(!1);break}a.parse(t,h),h++}return n}async function u(t,e){let i=await t;if(!i.ok||!i.body)return{metadata:{},cues:[],regions:[],errors:[void 0]};let r=i.headers.get("content-type")||"",n=r.match(/text\/(.*?)(?:;|$)/)?.[1],s=r.match(/charset=(.*?)(?:;|$)/)?.[1];return c(i.body,{type:n,encoding:s,...e})}async function c(t,{encoding:e="utf-8",...i}={}){let r=t.pipeThrough(new l(e));return h(r,i)}class f extends EventTarget{id="";startTime;endTime;text;pauseOnExit=!1;constructor(t,e,i){super(),this.startTime=t,this.endTime=e,this.text=i}addEventListener(t,e,i){super.addEventListener(t,e,i)}removeEventListener(t,e,i){super.removeEventListener(t,e,i)}}let d="undefined"==typeof document,p=d?f:window.VTTCue;class VTTCue extends p{region=null;vertical="";snapToLines=!0;line="auto";lineAlign="start";position="auto";positionAlign="auto";size=100;align="center";style}class g{id="";width=100;lines=3;regionAnchorX=0;regionAnchorY=100;viewportAnchorX=0;viewportAnchorY=100;scroll=""}function m(t){let e=parseInt(t.replace("%",""),10);return!Number.isNaN(e)&&e>=0&&e<=100?e:null}function b(t){if(!t.includes(","))return null;let[e,i]=t.split(",").map(m);return null!==e&&null!==i?[e,i]:null}let w=/[:=]/,y=/^[\s\t]*(region|vertical|line|position|size|align)[:=]/,v=/^REGION:?[\s\t]+/,T=/[\s\t]+/,x=/[\s\t]*-->[\s\t]+/,k=/start|center|end|left|right/,A=/start|center|end/,C=/line-(?:left|right)|center|auto/,E=/^(?:(\d{1,2}):)?(\d{2}):(\d{2})(?:\.(\d{1,3}))?$/;var N,j=((N=j||{})[N.None=0]="None",N[N.Header=1]="Header",N[N.Cue=2]="Cue",N[N.Region=3]="Region",N[N.Note=4]="Note",N);class L{f;c=0;g={};h={};j=[];a=null;b=null;k=[];d;l="";async init(t){this.f=t,t.strict&&(this.c=1),t.errors&&(this.d=(await i.e(539).then(i.bind(i,9539))).ParseErrorBuilder)}parse(t,e){if(""===t)this.a?(this.j.push(this.a),this.f.onCue?.(this.a),this.a=null):this.b?(this.h[this.b.id]=this.b,this.f.onRegion?.(this.b),this.b=null):1===this.c&&(this.i(t,e),this.f.onHeaderMetadata?.(this.g)),this.c=0;else if(this.c)switch(this.c){case 1:this.i(t,e);break;case 2:if(this.a){let i=this.a.text.length>0;!i&&y.test(t)?this.m(t.split(T),e):this.a.text+=(i?"\n":"")+t}break;case 3:this.n(t.split(T),e)}else if(t.startsWith("NOTE"))this.c=4;else if(t.startsWith("REGION"))this.c=3,this.b=new g,this.n(t.replace(v,"").split(T),e);else if(t.includes("-->")){let i=this.o(t,e);i&&(this.a=new VTTCue(i[0],i[1],""),this.a.id=this.l,this.m(i[2],e)),this.c=2}else 1===e&&this.i(t,e);this.l=t}done(){return{metadata:this.g,cues:this.j,regions:Object.values(this.h),errors:this.k}}i(t,e){if(e>1){if(w.test(t)){let[e,i]=t.split(w);e&&(this.g[e]=(i||"").replace(T,""))}}else t.startsWith("WEBVTT")?this.c=1:this.e(this.d?.p())}o(t,e){let[i,r=""]=t.split(x),[n,...s]=r.split(T),l=$(i),a=$(n);if(null!==l&&null!==a&&a>l)return[l,a,s];null===l&&this.e(this.d?.q(i,e)),null===a&&this.e(this.d?.r(n,e)),null!=l&&null!==a&&a>l&&this.e(this.d?.s(l,a,e))}n(t,e){let i;for(let r=0;r<t.length;r++)if(w.test(t[r])){i=!1;let[n,s]=t[r].split(w);switch(n){case"id":this.b.id=s;break;case"width":let l=m(s);null!==l?this.b.width=l:i=!0;break;case"lines":let a=function(t){let e=parseInt(t,10);return Number.isNaN(e)?null:e}(s);null!==a?this.b.lines=a:i=!0;break;case"regionanchor":let o=b(s);null!==o?(this.b.regionAnchorX=o[0],this.b.regionAnchorY=o[1]):i=!0;break;case"viewportanchor":let h=b(s);null!==h?(this.b.viewportAnchorX=h[0],this.b.viewportAnchorY=h[1]):i=!0;break;case"scroll":"up"===s?this.b.scroll="up":i=!0;break;default:this.e(this.d?.t(n,s,e))}i&&this.e(this.d?.u(n,s,e))}}m(t,e){let i;for(let r=0;r<t.length;r++)if(i=!1,w.test(t[r])){let[n,s]=t[r].split(w);switch(n){case"region":let l=this.h[s];l&&(this.a.region=l);break;case"vertical":"lr"===s||"rl"===s?(this.a.vertical=s,this.a.region=null):i=!0;break;case"line":let[a,o]=s.split(",");if(a.includes("%")){let t=m(a);null!==t?(this.a.line=t,this.a.snapToLines=!1):i=!0}else{let t=function(t){let e=parseFloat(t);return Number.isNaN(e)?null:e}(a);null!==t?this.a.line=t:i=!0}A.test(o)?this.a.lineAlign=o:o&&(i=!0),"auto"!==this.a.line&&(this.a.region=null);break;case"position":let[h,u]=s.split(","),c=m(h);null!==c?this.a.position=c:i=!0,u&&C.test(u)?this.a.positionAlign=u:u&&(i=!0);break;case"size":let f=m(s);null!==f?(this.a.size=f,f<100&&(this.a.region=null)):i=!0;break;case"align":k.test(s)?this.a.align=s:i=!0;break;default:this.e(this.d?.v(n,s,e))}i&&this.e(this.d?.w(n,s,e))}}e(t){if(t){if(this.k.push(t),this.f.strict)throw this.f.cancel(),t;this.f.onError?.(t)}}}function $(t){let e=t.match(E);if(!e)return null;let i=e[1]?parseInt(e[1],10):0,r=parseInt(e[2],10),n=parseInt(e[3],10),s=e[4]?parseInt(e[4].padEnd(3,"0"),10):0;return i<0||r<0||n<0||s<0||r>59||n>59?null:3600*i+60*r+n+s/1e3}var S=Object.freeze({__proto__:null,VTTBlock:j,VTTParser:L,default:function(){return new L},parseVTTTimestamp:$});let z=/[0-9]/,M=/[\s\t]+/,V={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span",timestamp:"span"},B={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"\xa0","&lrm;":"‎","&rlm;":"‏"},H=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,R=new Set(["white","lime","cyan","red","yellow","magenta","blue","black"]),F=new Set(Object.keys(V));function I(t){let e="",i=1,r=[],n=[],s;for(let r=0;r<t.text.length;r++){let h=t.text[r];switch(i){case 1:"<"===h?(o(),i=2):e+=h;break;case 2:switch(h){case"\n":case"	":case" ":l(),i=4;break;case".":l(),i=3;break;case"/":i=5;break;case">":l(),i=1;break;default:!e&&z.test(h)&&(i=6),e+=h}break;case 3:switch(h){case"	":case" ":case"\n":a(),s&&s.class?.trim(),i=4;break;case".":a();break;case">":a(),s&&s.class?.trim(),i=1;break;default:e+=h}break;case 4:">"===h?(e=e.replace(M," "),s?.type==="v"?s.voice=O(e):s?.type==="lang"&&(s.lang=O(e)),e="",i=1):e+=h;break;case 5:">"===h&&(e="",s=n.pop(),i=1);break;case 6:if(">"===h){let r=$(e);null!==r&&r>=t.startTime&&r<=t.endTime&&(e="timestamp",l(),s.time=r),e="",i=1}else e+=h}}function l(){if(F.has(e)){var t;let i=s;s={tagName:V[t=e],type:t,children:[]},i?(n[n.length-1]!==i&&n.push(i),i.children.push(s)):r.push(s)}e="",i=1}function a(){if(s&&e){let t=e.replace("bg_","");R.has(t)?s[e.startsWith("bg_")?"bgColor":"color"]=t:s.class=s.class?s.class+" "+e:e}e=""}function o(){if(!e)return;let t={type:"text",data:O(e)};s?s.children.push(t):r.push(t),e=""}return 1===i&&o(),r}function O(t){return t.replace(H,t=>B[t]||"'")}function P(t,e,i){t.style.setProperty(`--${e}`,i+"")}function _(t,e,i=!0){t.setAttribute(`data-${e}`,!0===i?"":i+"")}function W(t,e){t.setAttribute("data-part",e)}function q(t){if(d)throw Error("[media-captions] called `createVTTCueTemplate` on the server - use `renderVTTCueString`");let e=document.createElement("template");return e.innerHTML=X(t),{cue:t,content:e.content}}function X(t,e=0){return Y(I(t),e)}function Y(t,e=0){let i,r="";for(let n of t)if("text"===n.type)r+=n.data;else{let t="timestamp"===n.type;(i={}).class=n.class,i.title="v"===n.type&&n.voice,i.lang="lang"===n.type&&n.lang,i["data-part"]="v"===n.type&&"voice",t&&(i["data-part"]="timed",i["data-time"]=n.time,i["data-future"]=n.time>e,i["data-past"]=n.time<e),i.style=`${n.color?`color: ${n.color};`:""}${n.bgColor?`background-color: ${n.bgColor};`:""}`;let s=Object.entries(i).filter(t=>t[1]).map(t=>`${t[0]}="${!0===t[1]?"":t[1]}"`).join(" ");r+=`<${n.tagName}${s?" "+s:""}>${Y(n.children)}</${n.tagName}>`}return r}function D(t,e){if(!d)for(let i of t.querySelectorAll('[data-part="timed"]')){let t=Number(i.getAttribute("data-time"));Number.isNaN(t)||(t>e?_(i,"future"):i.removeAttribute("data-future"),t<e?_(i,"past"):i.removeAttribute("data-past"))}}let G=Symbol(0);function J(t){return t instanceof HTMLElement?{top:t.offsetTop,width:t.clientWidth,height:t.clientHeight,left:t.offsetLeft,right:t.offsetLeft+t.clientWidth,bottom:t.offsetTop+t.clientHeight}:{...t}}function K(t,e,i){switch(e){case"+x":t.left+=i,t.right+=i;break;case"-x":t.left-=i,t.right-=i;break;case"+y":t.top+=i,t.bottom+=i;break;case"-y":t.top-=i,t.bottom-=i}}function U(t,e){return e.top>=0&&e.bottom<=t.height&&e.left>=0&&e.right<=t.width}function Q(t,e){return{top:e.top/t.height,left:e.left/t.width,right:(t.width-e.right)/t.width,bottom:(t.height-e.bottom)/t.height}}function Z(t,e){return e.top=e.top*t.height,e.left=e.left*t.width,e.right=t.width-e.right*t.width,e.bottom=t.height-e.bottom*t.height,e}let tt=["top","left","right","bottom"];function te(t,e,i,r){let n=Q(e,i);for(let e of tt)P(t,`${r}-${e}`,100*n[e]+"%")}function ti(t,e,i,r){let n=1,s,l={...e};for(let a=0;a<r.length;a++){for(;function(t,e,i){switch(i){case"+x":return e.left<0;case"-x":return e.right>t.width;case"+y":return e.top<0;case"-y":return e.bottom>t.height}}(t,e,r[a])||U(t,e)&&function(t,e){for(let r=0;r<e.length;r++){var i;if(i=e[r],t.left<=i.right&&t.right>=i.left&&t.top<=i.bottom&&t.bottom>=i.top)return e[r]}return null}(e,i);)K(e,r[a],1);if(U(t,e))return e;let o=function(t,e){let i=Math.max(0,Math.min(t.width,e.right)-Math.max(0,e.left)),r=Math.max(0,Math.min(t.height,e.bottom)-Math.max(0,e.top));return i*r/(t.height*t.width)}(t,e);n>o&&(s={...e},n=o),e={...l}}return s||l}let tr=Symbol(0),tn=["-y","+y","-x","+x"];class ts{overlay;z;A=0;C="ltr";B=[];D=!1;E;h=new Map;j=new Map;get dir(){return this.C}set dir(t){this.C=t,_(this.overlay,"dir",t)}get currentTime(){return this.A}set currentTime(t){this.A=t,this.update()}constructor(t,e){this.overlay=t,this.dir=e?.dir??"ltr",t.setAttribute("translate","yes"),t.setAttribute("aria-live","off"),t.setAttribute("aria-atomic","true"),W(t,"captions"),this.G(),this.E=new ResizeObserver(this.I.bind(this)),this.E.observe(t)}changeTrack({regions:t,cues:e}){for(let i of(this.reset(),this.J(t),e))this.j.set(i,null);this.update()}addCue(t){this.j.set(t,null),this.update()}removeCue(t){this.j.delete(t),this.update()}update(t=!1){this.H(t)}reset(){this.j.clear(),this.h.clear(),this.B=[],this.overlay.textContent=""}destroy(){this.reset(),this.E.disconnect()}I(){this.D=!0,this.K()}K=(function(t,e){let i=null,r;function n(){s(),t(...r),r=void 0}function s(){clearTimeout(i),i=null}return function(){r=[].slice.call(arguments),s(),i=setTimeout(n,50)}})(()=>{for(let t of(this.D=!1,this.G(),this.h.values()))t[G]=null;for(let t of this.j.values())t&&(t[G]=null);this.H(!0)},0);G(){this.z=J(this.overlay),P(this.overlay,"overlay-width",this.z.width+"px"),P(this.overlay,"overlay-height",this.z.height+"px")}H(t=!1){if(!this.j.size||this.D)return;let e,i=[...this.j.keys()].filter(t=>this.A>=t.startTime&&this.A<=t.endTime).sort((t,e)=>t.startTime!==e.startTime?t.startTime-e.startTime:t.endTime-e.endTime),r=i.map(t=>t.region);for(let n=0;n<this.B.length;n++){if(e=this.B[n],i[n]===e)continue;if(e.region&&!r.includes(e.region)){let i=this.h.get(e.region.id);i&&(i.removeAttribute("data-active"),t=!0)}let s=this.j.get(e);s&&(s.remove(),t=!0)}for(let r=0;r<i.length;r++){e=i[r];let n=this.j.get(e);n||this.j.set(e,n=this.L(e));let s=this.F(e)&&this.h.get(e.region.id);s&&!s.hasAttribute("data-active")&&(requestAnimationFrame(()=>_(s,"active")),t=!0),n.isConnected||((s||this.overlay).append(n),t=!0)}if(t){let t=[],r=new Set;for(let n=i.length-1;n>=0;n--){if(e=i[n],r.has(e.region||e))continue;let s=this.F(e),l=s?this.h.get(e.region.id):this.j.get(e);s?t.push(function(t,e,i,r){let n=Array.from(i.querySelectorAll('[data-part="cue-display"]')),s=0,l=Math.max(0,n.length-e.lines);for(let t=n.length-1;t>=l;t--)s+=n[t].offsetHeight;P(i,"region-height",s+"px"),i[G]||(i[G]=Q(t,J(i)));let a={...i[G]};return(a=Z(t,a)).width=i.clientWidth,a.height=s,a.right=a.left+a.width,a.bottom=a.top+s,a=ti(t,a,r,tn),te(i,t,a,"region"),a}(this.z,e.region,l,t)):t.push(function(t,e,i,r){let n=i.firstElementChild,s="auto"===e.line?e.snapToLines?-1:100:e.line,l,a=[];if(i[G]||(i[G]=function(t,e){let i=J(e),r=function(t){let e={};for(let i of tt)e[i]=parseFloat(t.style.getPropertyValue(`--cue-${i}`));return e}(e);if(e[tr]=!1,r.top&&(i.top=r.top,i.bottom=r.top+i.height,e[tr]="top"),r.bottom){let n=t.height-r.bottom;i.top=n-i.height,i.bottom=n,e[tr]="bottom"}return r.left&&(i.left=r.left),r.right&&(i.right=t.width-r.right),Q(t,i)}(t,i)),l=Z(t,{...i[G]}),i[tr])a=["top"===i[tr]?"+y":"-y","+x","-x"];else if(e.snapToLines){let i;switch(e.vertical){case"":a=["+y","-y"],i="height";break;case"rl":a=["+x","-x"],i="width";break;case"lr":a=["-x","+x"],i="width"}let r=parseFloat(getComputedStyle(n).lineHeight)||0,o=r*Math.round(s),h=t[i]+r,u=a[0];Math.abs(o)>h&&(o=(o<0?-1:1)*(Math.ceil(h/r)*r)),s<0&&(o+=""===e.vertical?t.height:t.width,a=a.reverse()),K(l,u,o)}else{let i=""===e.vertical,r=i?"+y":"+x",n=i?l.height:l.width;K(l,r,(i?t.height:t.width)*s/100),K(l,r,"center"===e.lineAlign?n/2:"end"===e.lineAlign?n:0),a=i?["-y","+y","-x","+x"]:["-x","+x","-y","+y"]}return l=ti(t,l,r,a),te(i,t,l,"cue"),l}(this.z,e,l,t)),r.add(s?e.region:e)}}D(this.overlay,this.A),this.B=i}J(t){if(t)for(let e of t){let t=this.M(e);this.h.set(e.id,t),this.overlay.append(t)}}M(t){let e=document.createElement("div");return W(e,"region"),_(e,"id",t.id),_(e,"scroll",t.scroll),P(e,"region-width",t.width+"%"),P(e,"region-anchor-x",t.regionAnchorX),P(e,"region-anchor-y",t.regionAnchorY),P(e,"region-viewport-anchor-x",t.viewportAnchorX),P(e,"region-viewport-anchor-y",t.viewportAnchorY),P(e,"region-lines",t.lines),e}L(t){let e=document.createElement("div"),i=function(t){if("auto"===t.position)switch(t.align){case"start":case"left":return 0;case"right":case"end":return 100;default:return 50}return t.position}(t),r=function(t,e){if("auto"===t.positionAlign)switch(t.align){case"start":return"ltr"===e?"line-left":"line-right";case"end":return"ltr"===e?"line-right":"line-left";case"center":return"center";default:return`line-${t.align}`}return t.positionAlign}(t,this.C);if(W(e,"cue-display"),""!==t.vertical&&_(e,"vertical"),P(e,"cue-text-align",t.align),t.style)for(let i of Object.keys(t.style))e.style.setProperty(i,t.style[i]);if(this.F(t))P(e,"cue-offset",`${i-("line-right"===r?100:"center"===r?50:0)}%`);else if(P(e,"cue-writing-mode",""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl"),!t.style?.["--cue-width"]){let n=i;"line-left"===r?n=100-i:"center"===r&&i<=50?n=2*i:"center"===r&&i>50&&(n=(100-i)*2);let s=t.size<n?t.size:n;""===t.vertical?P(e,"cue-width",s+"%"):P(e,"cue-height",s+"%")}let n=document.createElement("div");return W(n,"cue"),t.id&&_(n,"id",t.id),n.innerHTML=X(t),e.append(n),e}F(t){return t.region&&100===t.size&&""===t.vertical&&"auto"===t.line}}}}]);