"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[801,36],{4801:function(t,i,e){e.r(i),e.d(i,{HLSProvider:function(){return u}});var s=e(2760),a=e(4224),h=e(4272),r=e(3257);e(2265),e(4887);let n=t=>(0,s.c)(t);class d{constructor(t){this.xa=t,this.Ja=null,this.bj=null,this.Lg={},this.H=new Set}get instance(){return this.Ja}setup(t,i){this.fg=i;let e=(0,s.p)(i.$state.streamType).includes("live"),h=(0,s.p)(i.$state.streamType).includes("ll-");this.Ja=new t({lowLatencyMode:h,backBufferLength:h?4:e?8:void 0,renderTextTracksNatively:!1,...this.Lg});let r=this.cj.bind(this);for(let i of Object.values(t.Events))this.Ja.on(i,r);for(let i of(this.Ja.on(t.Events.ERROR,this.md.bind(this)),this.H))i(this.Ja);i.player.dispatch(new s.D("hls-instance",{detail:this.Ja})),this.Ja.attachMedia(this.xa),this.Ja.on(t.Events.AUDIO_TRACK_SWITCHED,this.dj.bind(this)),this.Ja.on(t.Events.LEVEL_SWITCHED,this.ej.bind(this)),this.Ja.on(t.Events.LEVEL_LOADED,this.fj.bind(this)),this.Ja.on(t.Events.NON_NATIVE_TEXT_TRACKS_FOUND,this.gj.bind(this)),this.Ja.on(t.Events.CUES_PARSED,this.hj.bind(this)),i.qualities[a.Q.pb]=this.ij.bind(this),(0,s.l)(i.qualities,"change",this.Oh.bind(this)),(0,s.l)(i.audioTracks,"change",this.jj.bind(this)),this.bj=(0,s.e)(this.kj.bind(this))}kj(){if(!this.fg.$state.live())return;let t=new r.R(this.lj.bind(this));return t.hc(),t.ic.bind(t)}lj(){this.fg.$state.liveSyncPosition.set(this.Ja?.liveSyncPosition??1/0)}cj(t,i){this.fg.player?.dispatch(new s.D(n(t),{detail:i}))}gj(t,i){let e=new s.D(t,{detail:i}),h=-1;for(let t=0;t<i.tracks.length;t++){let s=i.tracks[t],r=s.subtitleTrack??s.closedCaptions,n=new a.T({id:`hls-${s.kind}${t}`,src:r?.url,label:s.label,language:r?.lang,kind:s.kind});n[a.a.Na]=2,n[a.a.$a]=()=>{"showing"===n.mode?(this.Ja.subtitleTrack=t,h=t):h===t&&(this.Ja.subtitleTrack=-1,h=-1)},s.default&&n.setMode("showing",e),this.fg.textTracks.add(n,e)}}hj(t,i){let e=this.fg.textTracks.getById(`hls-${i.track}`);if(!e)return;let a=new s.D(t,{detail:i});for(let t of i.cues)t.positionAlign="auto",e.addCue(t,a)}dj(t,i){let e=this.fg.audioTracks[i.id];e&&this.fg.audioTracks[a.L.$](e,!0,new s.D(t,{detail:i}))}ej(t,i){let e=this.fg.qualities[i.level];e&&this.fg.qualities[a.L.$](e,!0,new s.D(t,{detail:i}))}fj(t,i){if(this.fg.$state.canPlay())return;let{type:e,live:h,totalduration:r,targetduration:n}=i.details,d=new s.D(t,{detail:i});this.fg.delegate.Kb("stream-type-change",h?"EVENT"===e&&Number.isFinite(r)&&n>=10?"live:dvr":"live":"on-demand",d),this.fg.delegate.Kb("duration-change",r,d);let l=this.Ja.media;for(let t of(-1===this.Ja.currentLevel&&this.fg.qualities[a.Q.ob](!0,d),this.Ja.audioTracks))this.fg.audioTracks[a.L.h]({id:t.id+"",label:t.name,language:t.lang||"",kind:"main"},d);for(let t of this.Ja.levels)this.fg.qualities[a.L.h]({width:t.width,height:t.height,codec:t.codecSet,bitrate:t.bitrate},d);l.dispatchEvent(new s.D("canplay",{trigger:d}))}md(t,i){if(i.fatal)switch(i.type){case"networkError":this.Ja?.startLoad();break;case"mediaError":this.Ja?.recoverMediaError();break;default:this.Ja?.destroy(),this.Ja=null}}ij(){this.Ja&&(this.Ja.currentLevel=-1)}Oh(){let{qualities:t}=this.fg;this.Ja&&!t.auto&&(this.Ja[t.switch+"Level"]=t.selectedIndex,a.I&&(this.xa.currentTime=this.xa.currentTime))}jj(){let{audioTracks:t}=this.fg;this.Ja&&this.Ja.audioTrack!==t.selectedIndex&&(this.Ja.audioTrack=t.selectedIndex)}N(){this.fg&&(this.fg.qualities[a.Q.pb]=void 0),this.Ja?.destroy(),this.Ja=null,this.bj?.(),this.bj=null}}class l{constructor(t,i,e){this.xf=t,this.fg=i,this.Yg=e,this.$i()}async $i(){let t={onLoadStart:this.If.bind(this),onLoaded:this.Tf.bind(this),onLoadError:this.aj.bind(this)},i=await o(this.xf,t);return((0,s.i)(i)&&!(0,s.a)(this.xf)&&(i=await c(this.xf,t)),i)?i.isSupported()?i:(this.fg.player.dispatch(new s.D("hls-unsupported")),this.fg.delegate.Kb("error",{message:"[vidstack]: `hls.js` is not supported in this environment",code:4}),null):null}If(){this.fg.player.dispatch(new s.D("hls-lib-load-start"))}Tf(t){this.fg.player.dispatch(new s.D("hls-lib-loaded",{detail:t})),this.Yg(t)}aj(t){let i=(0,a.c)(t);this.fg.player.dispatch(new s.D("hls-lib-load-error",{detail:i})),this.fg.delegate.Kb("error",{message:i.message,code:4})}}async function c(t,i={}){if(!(0,s.i)(t)){if(i.onLoadStart?.(),t.prototype&&t.prototype!==Function)return i.onLoaded?.(t),t;try{let e=(await t())?.default;if(e&&e.isSupported)i.onLoaded?.(e);else throw Error("");return e}catch(t){i.onLoadError?.(t)}}}async function o(t,i={}){if((0,s.a)(t)){i.onLoadStart?.();try{if(await (0,a.l)(t),!(0,s.b)(window.Hls))throw Error("");let e=window.Hls;return i.onLoaded?.(e),e}catch(t){i.onLoadError?.(t)}}}class u extends h.VideoProvider{constructor(){super(...arguments),this.$$PROVIDER_TYPE="HLS",this.Kg=null,this._e=new d(this.video),this.Jg="https://cdn.jsdelivr.net/npm/hls.js@^1.0.0/dist/hls.min.js"}get ctor(){return this.Kg}get instance(){return this._e.instance}get type(){return"hls"}get canLiveSync(){return!0}get config(){return this._e.Lg}set config(t){this._e.Lg=t}get library(){return this.Jg}set library(t){this.Jg=t}preconnect(){(0,s.a)(this.Jg)&&(0,a.p)(this.Jg)}setup(t){super.setup(t),new l(this.Jg,t,i=>{this.Kg=i,this._e.setup(i,t),t.delegate.Kb("provider-setup",this);let e=(0,s.p)(t.$state.source);e&&this.loadSource(e)})}async loadSource(t,i){(0,s.a)(t.src)&&(this.Ba.preload=i||"",this._e.instance?.loadSource(t.src),this.qg=t)}onInstance(t){let i=this._e.instance;return i&&t(i),this._e.H.add(t),()=>this._e.H.delete(t)}destroy(){this._e.N()}}u.supported=(0,a.i)()},3257:function(t,i,e){e.d(i,{H:function(){return d},R:function(){return h}});var s=e(2760),a=e(4224);class h{constructor(t){this.Yg=t}hc(){(0,s.i)(this.uc)&&this.Xj()}ic(){(0,s.h)(this.uc)&&window.cancelAnimationFrame(this.uc),this.uc=void 0}Xj(){this.uc=window.requestAnimationFrame(()=>{(0,s.i)(this.uc)||(this.Yg(),this.Xj())})}}class r{constructor(t,i){this.Lb=t,this.fg=i,this.Qi=(0,s.u)(),this.uj=!1,this.wj=!1,this.xj=!1,this.vj=new h(this.Aj.bind(this)),this.Bj=void 0,this.Vj=void 0,this.Cj(),(0,s.e)(this.Dj.bind(this)),(0,s.o)(this.Si.bind(this))}get Ba(){return this.Lb.media}get Kb(){return this.fg.delegate.Kb}Si(){this.wj=!1,this.xj=!1,this.vj.ic(),this.Qi.empty()}Aj(){let t=this.Lb.currentTime;this.fg.$state.currentTime()!==t&&this.tj(t)}Cj(){this.sj("loadstart",this.If),this.sj("abort",this.zj),this.sj("emptied",this.Ej),this.sj("error",this.md)}Fj(){this.wj||(this.Qi.add(this.sj("loadeddata",this.Gj),this.sj("loadedmetadata",this.Hj),this.sj("canplay",this.fd),this.sj("canplaythrough",this.Ij),this.sj("durationchange",this.Jj),this.sj("play",this.la),this.sj("progress",this.ug),this.sj("stalled",this.Kj),this.sj("suspend",this.Lj)),this.wj=!0)}Mj(){this.xj||(this.Qi.add(this.sj("pause",this.ma),this.sj("playing",this.Nj),this.sj("ratechange",this.Oj),this.sj("seeked",this.Pj),this.sj("seeking",this.Qj),this.sj("ended",this.Rj),this.sj("volumechange",this.td),this.sj("waiting",this.Sj)),this.xj=!0)}sj(t,i){return(0,s.l)(this.Ba,t,i.bind(this))}Wj(t){}tj(t,i){let e={currentTime:Math.min(t,this.fg.$state.seekableEnd()),played:this.Ba.played};this.Kb("time-update",e,i)}If(t){if(3===this.Ba.networkState){this.zj(t);return}this.Fj(),this.Kb("load-start",void 0,t)}zj(t){this.Kb("abort",void 0,t)}Ej(){this.Kb("emptied",void 0,event)}Gj(t){this.Kb("loaded-data",void 0,t)}Hj(t){this.Mj(),this.Kb("volume-change",{volume:this.Ba.volume,muted:this.Ba.muted},t),this.Kb("loaded-metadata",void 0,t),a.h&&(0,a.j)(this.fg.$state.source())&&this.fg.delegate.Hg(this.yj(),t)}yj(){return{provider:(0,s.p)(this.fg.$provider),duration:this.Ba.duration,buffered:this.Ba.buffered,seekable:this.Ba.seekable}}la(t){this.fg.$state.canPlay&&this.Kb("play",void 0,t)}ma(t){(1!==this.Ba.readyState||this.uj)&&(this.uj=!1,this.vj.ic(),this.Kb("pause",void 0,t))}fd(t){this.fg.delegate.Hg(this.yj(),t)}Ij(t){this.fg.$state.started()||this.Kb("can-play-through",this.yj(),t)}Nj(t){this.uj=!1,this.Kb("playing",void 0,t),this.vj.hc()}Kj(t){this.Kb("stalled",void 0,t),this.Ba.readyState<3&&(this.uj=!0,this.Kb("waiting",void 0,t))}Sj(t){this.Ba.readyState<3&&(this.uj=!0,this.Kb("waiting",void 0,t))}Rj(t){this.vj.ic(),this.tj(this.Ba.duration,t),this.Kb("end",void 0,t),this.fg.$state.loop()?this.Tj():this.Kb("ended",void 0,t)}Dj(){this.fg.$state.paused()&&(0,s.l)(this.Ba,"timeupdate",this.Uj.bind(this))}Uj(t){this.tj(this.Ba.currentTime,t)}Jj(t){this.fg.$state.ended()&&this.tj(this.Ba.duration,t),this.Kb("duration-change",this.Ba.duration,t)}td(t){let i={volume:this.Ba.volume,muted:this.Ba.muted};this.Kb("volume-change",i,t)}Pj(t){this.tj(this.Ba.currentTime,t),this.Kb("seeked",this.Ba.currentTime,t),Math.trunc(this.Ba.currentTime)===Math.trunc(this.Ba.duration)&&(0,a.k)(this.Ba.duration)>(0,a.k)(this.Ba.currentTime)&&(this.tj(this.Ba.duration,t),this.Ba.ended||this.fg.player.dispatch(new s.D("media-play-request",{trigger:t})))}Qj(t){this.Kb("seeking",this.Ba.currentTime,t)}ug(t){let i={buffered:this.Ba.buffered,seekable:this.Ba.seekable};this.Kb("progress",i,t)}Tj(){let t=(0,s.m)(this.Ba.controls);t&&(this.Ba.controls=!1),this.fg.player.dispatch(new s.D("media-loop-request"))}Lj(t){this.Kb("suspend",void 0,t)}Oj(t){this.Kb("rate-change",this.Ba.playbackRate,t)}md(t){let i=this.Ba.error;if(!i)return;let e={message:i.message,code:i.code,mediaError:i};this.Kb("error",e,t)}}class n{constructor(t,i){this.Lb=t,this.fg=i,this.mj.onaddtrack=this.oj.bind(this),this.mj.onremovetrack=this.pj.bind(this),this.mj.onchange=this.qj.bind(this),(0,s.l)(this.fg.audioTracks,"change",this.rj.bind(this))}get mj(){return this.Lb.media.audioTracks}oj(t){let i=t.track;if(""===i.label)return;let e={id:i.id+"",label:i.label,language:i.language,kind:i.kind,selected:!1};this.fg.audioTracks[a.L.h](e,t),i.enabled&&(e.selected=!0)}pj(t){let i=this.fg.audioTracks.getById(t.track.id);i&&this.fg.audioTracks[a.L.f](i,t)}qj(t){let i=this.nj();if(!i)return;let e=this.fg.audioTracks.getById(i.id);e&&this.fg.audioTracks[a.L.$](e,!0,t)}nj(){return Array.from(this.mj).find(t=>t.enabled)}rj(t){let{current:i}=t.detail;if(!i)return;let e=this.mj.getTrackById(i.id);if(e){let t=this.nj();t&&(t.enabled=!1),e.enabled=!0}}}class d{constructor(t){this.Ba=t,this.scope=(0,s.d)(),this.qg=null}setup(t){new r(this,t),"audioTracks"in this.media&&new n(this,t),(0,s.o)(()=>{this.Ba.setAttribute("src",""),this.Ba.load()})}get type(){return""}get media(){return this.Ba}get currentSrc(){return this.qg}get paused(){return this.Ba.paused}get muted(){return this.Ba.muted}set muted(t){this.Ba.muted=t}get volume(){return this.Ba.volume}set volume(t){this.Ba.volume=t}get currentTime(){return this.Ba.currentTime}set currentTime(t){this.Ba.currentTime=t}get playsinline(){return this.Ba.hasAttribute("playsinline")}set playsinline(t){(0,s.n)(this.Ba,"playsinline",t)}get playbackRate(){return this.Ba.playbackRate}set playbackRate(t){this.Ba.playbackRate=t}async play(){return this.Ba.play()}async pause(){return this.Ba.pause()}async loadSource({src:t,type:i},e){this.Ba.preload=e||"",(0,a.m)(t)?this.Ba.srcObject=t:(this.Ba.srcObject=null,this.Ba.src=(0,s.a)(t)?t:window.URL.createObjectURL(t)),this.Ba.load(),this.qg={src:t,type:i}}}},4272:function(t,i,e){e.r(i),e.d(i,{VideoProvider:function(){return o}});var s=e(2760),a=e(4224),h=e(3257);e(2265),e(4887);class r{constructor(t,i){this.xa=t,this.fg=i,t.textTracks.onaddtrack=this.Da.bind(this),(0,s.o)(this.Si.bind(this))}Da(t){let i=t.track;if(!i||Array.from(this.xa.children).find(t=>t.track===i))return;let e=new a.T({id:i.id,kind:i.kind,label:i.label,language:i.language,type:"vtt"});e[a.a.Va]={track:i},e[a.a.Na]=2,e[a.a.Ha]=!0;let s=0,h=t=>{if(i.cues)for(let a=s;a<i.cues.length;a++)e.addCue(i.cues[a],t),s++};h(t),i.oncuechange=h,this.fg.textTracks.add(e,t),e.setMode(i.mode,t)}Si(){for(let t of(this.xa.textTracks.onaddtrack=null,this.fg.textTracks)){let i=t[a.a.Va]?.track;i?.oncuechange&&(i.oncuechange=null)}}}class n{constructor(t,i){this.xa=t,this.Ba=i,this.ja=(t,i)=>{this.Ba.delegate.Kb("picture-in-picture-change",t,i)},(0,s.l)(this.xa,"enterpictureinpicture",this.Ti.bind(this)),(0,s.l)(this.xa,"leavepictureinpicture",this.Ui.bind(this))}get active(){return document.pictureInPictureElement===this.xa}get supported(){return(0,a.e)(this.xa)}async enter(){return this.xa.requestPictureInPicture()}exit(){return document.exitPictureInPicture()}Ti(t){this.ja(!0,t)}Ui(t){this.ja(!1,t)}}class d{constructor(t,i){this.xa=t,this.Ba=i,this.Ra="inline",(0,s.l)(this.xa,"webkitpresentationmodechanged",this.$a.bind(this))}get Xi(){return(0,a.f)(this.xa)}async Wi(t){this.Ra!==t&&this.xa.webkitSetPresentationMode(t)}$a(t){let i=this.Ra;this.Ra=this.xa.webkitPresentationMode,this.Ba.player?.dispatch(new s.D("video-presentation-change",{detail:this.Ra,trigger:t})),["fullscreen","picture-in-picture"].forEach(e=>{(this.Ra===e||i===e)&&this.Ba.delegate.Kb(`${e}-change`,this.Ra===e,t)})}}class l{constructor(t){this.Vi=t}get active(){return"fullscreen"===this.Vi.Ra}get supported(){return this.Vi.Xi}async enter(){this.Vi.Wi("fullscreen")}async exit(){this.Vi.Wi("inline")}}class c{constructor(t){this.Vi=t}get active(){return"picture-in-picture"===this.Vi.Ra}get supported(){return this.Vi.Xi}async enter(){this.Vi.Wi("picture-in-picture")}async exit(){this.Vi.Wi("inline")}}class o extends h.H{constructor(t,i){super(t),this.$$PROVIDER_TYPE="VIDEO",(0,s.k)(()=>{if((0,a.f)(t)){let e=new d(t,i);this.fullscreen=new l(e),this.pictureInPicture=new c(e)}else(0,a.e)(t)&&(this.pictureInPicture=new n(t,i))},this.scope)}get type(){return"video"}setup(t){super.setup(t),(0,a.g)(this.video)&&new r(this.video,t),t.textRenderers.Ga(this.video),(0,s.o)(()=>{t.textRenderers.Ga(null)}),"video"===this.type&&t.delegate.Kb("provider-setup",this)}get video(){return this.Ba}}}}]);