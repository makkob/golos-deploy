"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10],{4224:function(t,e,i){i.d(e,{$:function(){return se},A:function(){return r5},B:function(){return nt},C:function(){return ni},D:function(){return nr},E:function(){return nl},F:function(){return na},G:function(){return p},H:function(){return nu},I:function(){return F},J:function(){return nf},K:function(){return nT},L:function(){return k},M:function(){return rp},N:function(){return nS},O:function(){return nG},P:function(){return rY},Q:function(){return e$},R:function(){return nZ},S:function(){return nd},T:function(){return TextTrack},U:function(){return ar},V:function(){return ah},W:function(){return ao},X:function(){return ac},Y:function(){return ap},Z:function(){return nC},_:function(){return st},a:function(){return tb},a$:function(){return ry},a0:function(){return K},a1:function(){return _},a2:function(){return I},a3:function(){return T},a4:function(){return A},a5:function(){return q},a6:function(){return G},a7:function(){return en},a8:function(){return eq},a9:function(){return ej},aA:function(){return rh},aB:function(){return ro},aC:function(){return rc},aD:function(){return ru},aE:function(){return rd},aF:function(){return iP},aG:function(){return iq},aH:function(){return iC},aI:function(){return iX},aJ:function(){return i3},aK:function(){return i7},aL:function(){return sr},aM:function(){return sn},aN:function(){return sd},aO:function(){return sT},aP:function(){return sE},aQ:function(){return sP},aR:function(){return sB},aS:function(){return sS},aT:function(){return sN},aU:function(){return sI},aV:function(){return sK},aW:function(){return sz},aX:function(){return sZ},aY:function(){return s5},aZ:function(){return rb},a_:function(){return rg},aa:function(){return tt},ab:function(){return J},ac:function(){return X},ad:function(){return eh},ae:function(){return tw},af:function(){return t$},ag:function(){return TextTrackList},ah:function(){return eu},ai:function(){return tm},aj:function(){return ty},ak:function(){return ey},al:function(){return ex},am:function(){return eK},an:function(){return eU},ao:function(){return eQ},ap:function(){return ez},aq:function(){return ek},ar:function(){return eT},as:function(){return eE},at:function(){return eP},au:function(){return eB},av:function(){return eS},aw:function(){return eO},ax:function(){return eA},ay:function(){return iJ},az:function(){return rn},b:function(){return ts},b0:function(){return rv},b1:function(){return rw},b2:function(){return r$},b3:function(){return rx},b4:function(){return rk},b5:function(){return rT},b6:function(){return rE},b7:function(){return rP},b8:function(){return rB},b9:function(){return rS},bA:function(){return aP},bB:function(){return r6},bC:function(){return r7},bD:function(){return r9},bE:function(){return nP},bF:function(){return nv},bG:function(){return nw},bH:function(){return ny},bI:function(){return nx},bJ:function(){return nB},bK:function(){return nL},bL:function(){return nN},bM:function(){return nI},bN:function(){return nW},bO:function(){return nV},bP:function(){return n_},bQ:function(){return ae},bR:function(){return nJ},bS:function(){return nY},bT:function(){return nA},bU:function(){return nq},bV:function(){return n4},bW:function(){return n8},bX:function(){return n9},bY:function(){return r0},bZ:function(){return r2},ba:function(){return rO},bb:function(){return rA},bc:function(){return rq},bd:function(){return rC},be:function(){return rM},bf:function(){return rR},bg:function(){return rL},bh:function(){return rj},bi:function(){return rN},bj:function(){return rF},bk:function(){return rV},bl:function(){return r_},bm:function(){return rI},bn:function(){return rD},bo:function(){return rH},bp:function(){return rW},bq:function(){return rU},br:function(){return rQ},bs:function(){return ab},bt:function(){return n3},bu:function(){return an},bv:function(){return aa},bw:function(){return ag},bx:function(){return ay},by:function(){return aw},bz:function(){return a$},c:function(){return e1},d:function(){return z},e:function(){return H},f:function(){return W},g:function(){return D},h:function(){return V},i:function(){return U},j:function(){return eH},k:function(){return ii},l:function(){return ta},m:function(){return eW},n:function(){return rf},o:function(){return Y},p:function(){return tr},q:function(){return te},r:function(){return rm},s:function(){return rK},t:function(){return tx},u:function(){return n5},v:function(){return tg},w:function(){return i2},x:function(){return R},y:function(){return iK},z:function(){return sa}});var s,r,n,a,h,l=i(2265),o=i(2760),u=i(4887);let c=Symbol(0),d=class t{constructor(t,e,i,r,n){this.logger=t,this.level=e,this.title=i,this.root=r,this.parent=n,this[s]=!0,this.logs=[]}log(...t){return this.logs.push({data:t}),this}labelledLog(t,...e){return this.logs.push({label:t,data:e}),this}groupStart(e){return new t(this.logger,this.level,e,this.root??this,this)}groupEnd(){return this.parent?.logs.push(this),this.parent??this}dispatch(){return this.logger.dispatch(this.level,this.root??this)}};s=c;let p=d,f=Symbol(0),b=Symbol(0),g=Symbol(0),m=Symbol(0),y=Symbol(0),v=Symbol(0),w=Symbol(0),$=Symbol(0),x=Symbol(0),k={h:f,f:b,j:g,$:m,e:y,g:v,k:w,i:$,ca:x};class T extends o.H{constructor(){super(...arguments),this.d=[],this[r]=!1}get length(){return this.d.length}get readonly(){return this[k.e]}toArray(){return[...this.d]}[(r=k.e,Symbol.iterator)](){return this.d.values()}[k.h](t,e){let i=this.d.length;""+i in this||Object.defineProperty(this,i,{get(){return this.d[i]}}),this.d.includes(t)||(this.d.push(t),this.dispatchEvent(new o.D("add",{detail:t,trigger:e})))}[k.f](t,e){let i=this.d.indexOf(t);i>=0&&(this[k.i]?.(t,e),this.d.splice(i,1),this.dispatchEvent(new o.D("remove",{detail:t,trigger:e})))}[k.j](t){for(let e of[...this.d])this[k.f](e,t);this.d=[],this[k.g](!1,t),this[k.k]?.()}[k.g](t,e){this[k.e]!==t&&(this[k.e]=t,this.dispatchEvent(new o.D("readonly-change",{detail:t,trigger:e})))}}var E={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},P="undefined"!=typeof window&&void 0!==window.document?window.document:{},B="fullscreenEnabled"in P&&Object.keys(E)||"webkitFullscreenEnabled"in P&&["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]||"mozFullScreenEnabled"in P&&["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"]||"msFullscreenEnabled"in P&&["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]||[],S={requestFullscreen:function(t){return t[B[E.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[B[E.requestFullscreen]]},get exitFullscreen(){return P[B[E.exitFullscreen]].bind(P)},get fullscreenPseudoClass(){return":"+B[E.fullscreen]},addEventListener:function(t,e,i){return P.addEventListener(B[E[t]],e,i)},removeEventListener:function(t,e,i){return P.removeEventListener(B[E[t]],e,i)},get fullscreenEnabled(){return!!P[B[E.fullscreenEnabled]]},set fullscreenEnabled(val){},get fullscreenElement(){return P[B[E.fullscreenElement]]},set fullscreenElement(val){},get onfullscreenchange(){return P[("on"+B[E.fullscreenchange]).toLowerCase()]},set onfullscreenchange(handler){return P[("on"+B[E.fullscreenchange]).toLowerCase()]=handler},get onfullscreenerror(){return P[("on"+B[E.fullscreenerror]).toLowerCase()]},set onfullscreenerror(handler){return P[("on"+B[E.fullscreenerror]).toLowerCase()]=handler}};let O=S.fullscreenEnabled;class A extends o.V{constructor(){super(...arguments),this.l=!1,this.m=!1}get active(){return this.m}get supported(){return O}onConnect(){(0,o.l)(S,"fullscreenchange",this.n.bind(this)),(0,o.l)(S,"fullscreenerror",this.o.bind(this)),(0,o.o)(this.c.bind(this))}async c(){O&&await this.exit()}n(t){let e=C(this.el);e!==this.m&&(e||(this.l=!1),this.m=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}o(t){this.l&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.l=!1)}async enter(){try{if(this.l=!0,!this.el||C(this.el))return;return M(),S.requestFullscreen(this.el)}catch(t){throw this.l=!1,t}}async exit(){if(this.el&&C(this.el))return M(),S.exitFullscreen()}}function q(){return O}function C(t){if(S.fullscreenElement===t)return!0;try{return t.matches(S.fullscreenPseudoClass)}catch(t){return!1}}function M(){if(!O)throw Error("[vidstack] no fullscreen API")}let R="undefined"==typeof document,L=R?"":navigator?.userAgent.toLowerCase()||"",j=!R&&/iphone|ipad|ipod|ios|crios|fxios/i.test(L),N=!R&&/(iphone|ipod)/gi.test(navigator?.platform||""),F=!R&&!!window.chrome,V=!R&&(!!window.safari||j);function _(){return I()&&(0,o.b)(screen.orientation.unlock)}function I(){return!R&&!(0,o.i)(window.screen.orientation)&&!(0,o.i)(window.screen.orientation.lock)}function D(t){return!R&&(t||(t=document.createElement("video")),t.canPlayType("application/vnd.apple.mpegurl").length>0)}function H(t){return!R&&!!document.pictureInPictureEnabled&&!t.disablePictureInPicture}function W(t){return!R&&(0,o.b)(t?.webkitSupportsPresentationMode)&&(0,o.b)(t?.webkitSetPresentationMode)}async function K(){let t=document.createElement("video");return t.volume=.5,await (0,o.I)(0),.5===t.volume}function U(){if(R)return!1;let MediaSource=R?void 0:window?.MediaSource??window?.WebKitMediaSource;if((0,o.i)(MediaSource))return!1;let t=MediaSource&&(0,o.b)(MediaSource.isTypeSupported)&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),SourceBuffer=R?void 0:window?.SourceBuffer??window?.WebKitSourceBuffer,e=(0,o.i)(SourceBuffer)||!(0,o.i)(SourceBuffer.prototype)&&(0,o.b)(SourceBuffer.prototype.appendBuffer)&&(0,o.b)(SourceBuffer.prototype.remove);return!!t&&!!e}let Q=class t extends o.V{constructor(){super(...arguments),this.q=(0,o.s)(this.s()),this.p=(0,o.s)(!1)}get type(){return this.q()}get locked(){return this.p()}get portrait(){return this.q().startsWith("portrait")}get landscape(){return this.q().startsWith("landscape")}get supported(){return t.supported}onConnect(){if(this.supported)(0,o.l)(screen.orientation,"change",this.t.bind(this));else{let t=window.matchMedia("(orientation: landscape)");t.onchange=this.t.bind(this),(0,o.o)(()=>t.onchange=null)}(0,o.o)(this.c.bind(this))}async c(){this.supported&&this.p()&&await this.unlock()}t(t){this.q.set(this.s()),this.dispatch("orientation-change",{detail:{orientation:(0,o.p)(this.q),lock:this.r},trigger:t})}async lock(t){(0,o.p)(this.p)||this.r===t||(this.u(),await screen.orientation.lock(t),this.p.set(!0),this.r=t)}async unlock(){(0,o.p)(this.p)&&(this.u(),this.r=void 0,await screen.orientation.unlock(),this.p.set(!1))}u(){if(!this.supported)throw Error("[vidstack] no orientation API")}s(){return R?"portrait-primary":this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};Q.supported=_();let G=Q;class z{get length(){return this.da.length}constructor(t,e){(0,o.J)(t)?this.da=t:(0,o.i)(t)||(0,o.i)(e)?this.da=[]:this.da=[[t,e]]}start(t){return this.da[t][0]??1/0}end(t){return this.da[t][1]??1/0}}function J(t){if(!t.length)return null;let e=t.start(0);for(let i=1;i<t.length;i++){let s=t.start(i);s<e&&(e=s)}return e}function X(t){if(!t.length)return null;let e=t.end(0);for(let i=1;i<t.length;i++){let s=t.end(i);s>e&&(e=s)}return e}let Y=new o.S({audioTracks:[],audioTrack:null,autoplay:!1,autoplayError:null,buffered:new z,duration:0,canLoad:!1,canFullscreen:!1,canOrientScreen:_(),canPictureInPicture:!1,canPlay:!1,controls:!1,controlsVisible:!1,crossorigin:null,currentTime:0,ended:!1,error:null,fullscreen:!1,loop:!1,logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new z,playing:!1,playsinline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetVolume:!1,seekable:new z,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,volume:1,waiting:!1,get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return"unknown"!==this.providedViewType?this.providedViewType:this.inferredViewType},get streamType(){return"unknown"!==this.providedStreamType?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){return J(this.buffered)??0},get bufferedEnd(){return X(this.buffered)??0},get seekableStart(){return J(this.seekable)??0},get seekableEnd(){return this.canPlay?X(this.seekable)??1/0:0},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoplaying:!1,providedTitle:"",inferredTitle:"",providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null}),Z=new Set(["autoplay","canFullscreen","canLoad","canPictureInPicture","canSetVolume","controls","crossorigin","fullscreen","height","logLevel","loop","mediaHeight","mediaWidth","mediaType","muted","orientation","pictureInPicture","playsinline","pointer","providedPoster","preload","providedStreamType","inferredViewType","providedViewType","source","sources","textTrack","textTracks","providedTitle","volume","width"]);function tt(t){Y.reset(t,t=>!Z.has(t)),(0,o.K)()}let te=(0,o.L)();function ti(){return(0,o.M)(te)}function ts(t,e){let i=new URLSearchParams;for(let t of Object.keys(e))i.set(t,e[t]+"");return t+"?"+i.toString()}function tr(t,e="preconnect"){if(R)return!1;let i=document.querySelector(`link[href="${t}"]`);if(!(0,o.N)(i))return!0;let s=document.createElement("link");return s.rel=e,s.href=t,s.crossOrigin="true",document.head.append(s),!0}let tn={};function ta(t){if(tn[t])return tn[t].promise;let e=(0,o.f)(),i=document.querySelector(`script[src="${t}"]`);if(!(0,o.N)(i))return e.resolve(),e.promise;let s=document.createElement("script");return s.src=t,s.onload=()=>{e.resolve(),delete tn[t]},s.onerror=()=>{e.reject(),delete tn[t]},setTimeout(()=>document.head.append(s),0),e.promise}function th(t){return"use-credentials"===t?"include":(0,o.a)(t)?"same-origin":void 0}let tl=Symbol(0),to=Symbol(0),tu=Symbol(0),tc=Symbol(0),td=Symbol(0),tp=Symbol(0),tf=Symbol(0),tb={ab:tl,Na:to,Ta:tu,Ua:tc,$a:td,Va:tp,Ha:tf};function tg(t,e){for(let i=0,s=t.length;i<s;i++)if(tm(t[i],e))return t[i];return null}function tm(t,e){return e>=t.startTime&&e<t.endTime}function ty(t,e,i){let s=null;function r(){let r=(0,o.a)(e)?[e]:e,n=t.toArray().find(t=>r.includes(t.kind)&&"showing"===t.mode);if(n!==s){if(!n){i(null),s=null;return}2==n.readyState?i(n):(i(null),n.addEventListener("load",()=>i(n),{once:!0})),s=n}}return r(),(0,o.l)(t,"mode-change",r)}class TextTrack extends o.H{constructor(t){for(let e of(super(),this.id="",this.label="",this.language="",this.default=!1,this.Ua=!1,this.Pa=0,this.Ra="disabled",this.Wa={},this.Sa=[],this.Oa=[],this.Qa=[],this[n]=0,this[a]=null,this[h]=null,Object.keys(t)))this[e]=t[e];this.type||(this.type="vtt"),!R&&t.content?i.e(562).then(i.bind(i,6562)).then(({parseText:e,VTTCue,VTTRegion:i})=>{"json"===t.type?this.Xa(t.content,VTTCue,i):e(t.content,{type:t.type}).then(({cues:t,regions:e})=>{this.Oa=t,this.Sa=e,this.Na()})}):t.src||(this[tb.Na]=2)}static createId(t){return`id::${t.type}-${t.kind}-${t.src??t.label}`}get metadata(){return this.Wa}get regions(){return this.Sa}get cues(){return this.Oa}get activeCues(){return this.Qa}get readyState(){return this[tb.Na]}get mode(){return this.Ra}set mode(t){this.setMode(t)}addCue(t,e){let i=0,s=this.Oa.length;for(i=0;i<s&&!(t.endTime<=this.Oa[i].startTime);i++);i===s?this.Oa.push(t):this.Oa.splice(i,0,t),e?.type!=="cuechange"&&this[tb.Va]?.track.addCue(t),this.dispatchEvent(new o.D("add-cue",{detail:t,trigger:e})),tm(t,this.Pa)&&this[tb.Ta](this.Pa,e)}removeCue(t,e){let i=this.Oa.indexOf(t);if(i>=0){let s=this.Qa.includes(t);this.Oa.splice(i,1),this[tb.Va]?.track.removeCue(t),this.dispatchEvent(new o.D("remove-cue",{detail:t,trigger:e})),s&&this[tb.Ta](this.Pa,e)}}setMode(t,e){this.Ra!==t&&(this.Ra=t,"disabled"===t?(this.Qa=[],this.Ya()):2===this.readyState?this[tb.Ta](this.Pa,e):this.Za(),this.dispatchEvent(new o.D("mode-change",{detail:this,trigger:e})),this[tb.$a]?.())}[(n=tb.Na,a=tb.$a,h=tb.Va,tb.Ta)](t,e){if(this.Pa=t,"disabled"===this.mode||!this.Oa.length)return;let i=[];for(let e=0,s=this.Oa.length;e<s;e++){let s=this.Oa[e];tm(s,t)&&i.push(s)}let s=i.length!==this.Qa.length;if(!s){for(let t=0;t<i.length;t++)if(!this.Qa.includes(i[t])){s=!0;break}}this.Qa=i,s&&this.Ya(e)}[tb.Ua](){this.Ua=!0,"disabled"!==this.Ra&&this.Za()}async Za(){if(this.Ua&&this.src&&!(this[tb.Na]>0)){this[tb.Na]=1,this.dispatchEvent(new o.D("load-start"));try{let{parseResponse:t,VTTCue,VTTRegion:e}=await i.e(562).then(i.bind(i,6562)),s=this[tb.ab]?.(),r=fetch(this.src,{headers:"json"===this.type?{"Content-Type":"application/json"}:void 0,credentials:th(s)});if("json"===this.type)this.Xa(await (await r).text(),VTTCue,e);else{let{errors:e,metadata:i,regions:s,cues:n}=await t(r,{type:this.type,encoding:this.encoding});if(e[0]?.code===0)throw e[0];this.Wa=i,this.Sa=s,this.Oa=n}this.Na()}catch(t){this._a(t)}}}Na(){if(this[tb.Na]=2,!this.src||"vtt"!==this.type){let t=this[tb.Va]?.track;if(t)for(let e of this.Oa)t.addCue(e)}let t=new o.D("load");this[tb.Ta](this.Pa,t),this.dispatchEvent(t)}_a(t){this[tb.Na]=3,this.dispatchEvent(new o.D("error",{detail:t}))}Xa(t,VTTCue,e){try{let{regions:i,cues:s}=t$(t,VTTCue,e);this.Sa=i,this.Oa=s}catch(t){this._a(t)}}Ya(t){this.dispatchEvent(new o.D("cue-change",{trigger:t}))}}let tv=/captions|subtitles/;function tw(t){return tv.test(t.kind)}function t$(t,e,i){let s=JSON.parse(t),r=[],n=[];return s.regions&&i&&(r=s.regions.map(t=>Object.assign(new i,t))),(s.cues||(0,o.J)(s))&&(n=((0,o.J)(s)?s:s.cues).filter(t=>(0,o.h)(t.startTime)&&(0,o.h)(t.endTime)).map(t=>Object.assign(new e(0,0,""),t))),{regions:r,cues:n}}class tx{constructor(t){this.a=t,this.b=null,this.pa=null,this.qa=-1}setTarget(t){this.b=t}getPlayer(t){return this.pa||(t??this.b)?.dispatchEvent(new o.D("find-media-player",{detail:t=>void(this.pa=t),bubbles:!0,composed:!0})),this.pa}setPlayer(t){this.pa=t}startLoading(t){this.oa("media-start-loading",t)}play(t){this.oa("media-play-request",t)}pause(t){this.oa("media-pause-request",t)}mute(t){this.oa("media-mute-request",t)}unmute(t){this.oa("media-unmute-request",t)}enterFullscreen(t,e){this.oa("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.oa("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.oa("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.oa("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.oa("media-enter-pip-request",t)}exitPictureInPicture(t){this.oa("media-exit-pip-request",t)}seeking(t,e){this.oa("media-seeking-request",e,t)}seek(t,e){this.oa("media-seek-request",e,t)}seekToLiveEdge(t){this.oa("media-live-edge-request",t)}changeVolume(t,e){this.oa("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.oa("media-audio-track-change-request",e,t)}changeQuality(t,e){this.oa("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,i){this.oa("media-text-track-change-request",i,{index:t,mode:e})}changePlaybackRate(t,e){this.oa("media-rate-change-request",e,t)}resumeControls(t){this.oa("media-resume-controls-request",t)}pauseControls(t){this.oa("media-pause-controls-request",t)}togglePaused(t){let e=this.getPlayer(t?.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){let e=this.getPlayer(t?.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){let e=this.getPlayer(t?.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){let i=this.getPlayer(e?.target);i&&(i.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){let e=this.getPlayer(t?.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}disableCaptions(t){let e=this.getPlayer(t?.target);if(!e)return;let i=e.state.textTracks,s=e.state.textTrack;if(s){let e=i.indexOf(s);this.changeTextTrackMode(e,"disabled",t)}}toggleCaptions(t){let e=this.getPlayer(t?.target);if(!e)return;let i=e.state.textTracks,s=e.state.textTrack;if(s){let e=i.indexOf(s);this.changeTextTrackMode(e,"disabled",t),this.qa=e}else{let e=this.qa;i[e]&&tw(i[e])||(e=-1),-1===e&&(e=i.findIndex(t=>tw(t)&&t.default)),-1===e&&(e=i.findIndex(t=>tw(t))),e>=0&&this.changeTextTrackMode(e,"showing",t),this.qa=-1}}oa(t,e,i){let s=new o.D(t,{bubbles:!0,composed:!0,detail:i,trigger:e}),r=e?.target||null;r&&r instanceof o.O&&(r=r.el);let n=!r||r===document||r===window||r===document.body||this.pa?.el&&r instanceof Node&&!this.pa.el.contains(r);r=n?this.b??this.getPlayer()?.el:r??this.b,this.pa?this.pa.canPlayQueue.sa(t,()=>r?.dispatchEvent(s)):r?.dispatchEvent(s)}ra(t){}}let tk=Math.min,tT=Math.max,tE=Math.round,tP=Math.floor,tB=t=>({x:t,y:t});function tS(t){return t.split("-")[0]}function tO(t){return["top","bottom"].includes(tS(t))?"y":"x"}function tA(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function tq(t,e,i){let s,{reference:r,floating:n}=t,a=tO(e),h="x"===tO(e)?"y":"x",l="y"===h?"height":"width",o=tS(e),u="y"===a,c=r.x+r.width/2-n.width/2,d=r.y+r.height/2-n.height/2,p=r[l]/2-n[l]/2;switch(o){case"top":s={x:c,y:r.y-n.height};break;case"bottom":s={x:c,y:r.y+r.height};break;case"right":s={x:r.x+r.width,y:d};break;case"left":s={x:r.x-n.width,y:d};break;default:s={x:r.x,y:r.y}}switch(e.split("-")[1]){case"start":s[h]-=p*(i&&u?-1:1);break;case"end":s[h]+=p*(i&&u?-1:1)}return s}let tC=async(t,e,i)=>{let{placement:s="bottom",strategy:r="absolute",middleware:n=[],platform:a}=i,h=n.filter(Boolean),l=await (null==a.isRTL?void 0:a.isRTL(e)),o=await a.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:c}=tq(o,s,l),d=s,p={},f=0;for(let i=0;i<h.length;i++){let{name:n,fn:b}=h[i],{x:g,y:m,data:y,reset:v}=await b({x:u,y:c,initialPlacement:s,placement:d,strategy:r,middlewareData:p,rects:o,platform:a,elements:{reference:t,floating:e}});if(u=null!=g?g:u,c=null!=m?m:c,p={...p,[n]:{...p[n],...y}},v&&f<=50){f++,"object"==typeof v&&(v.placement&&(d=v.placement),v.rects&&(o=!0===v.rects?await a.getElementRects({reference:t,floating:e,strategy:r}):v.rects),{x:u,y:c}=tq(o,d,l)),i=-1;continue}}return{x:u,y:c,placement:d,strategy:r,middlewareData:p}};function tM(t){return tj(t)?(t.nodeName||"").toLowerCase():"#document"}function tR(t){var e;return(null==t?void 0:null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function tL(t){var e;return null==(e=(tj(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function tj(t){return t instanceof Node||t instanceof tR(t).Node}function tN(t){return t instanceof Element||t instanceof tR(t).Element}function tF(t){return t instanceof HTMLElement||t instanceof tR(t).HTMLElement}function tV(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof tR(t).ShadowRoot)}function t_(t){let{overflow:e,overflowX:i,overflowY:s,display:r}=tW(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+i)&&!["inline","contents"].includes(r)}function tI(t){let e=tD(),i=tW(t);return"none"!==i.transform||"none"!==i.perspective||!!i.containerType&&"normal"!==i.containerType||!e&&!!i.backdropFilter&&"none"!==i.backdropFilter||!e&&!!i.filter&&"none"!==i.filter||["transform","perspective","filter"].some(t=>(i.willChange||"").includes(t))||["paint","layout","strict","content"].some(t=>(i.contain||"").includes(t))}function tD(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function tH(t){return["html","body","#document"].includes(tM(t))}function tW(t){return tR(t).getComputedStyle(t)}function tK(t){return tN(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function tU(t){if("html"===tM(t))return t;let e=t.assignedSlot||t.parentNode||tV(t)&&t.host||tL(t);return tV(e)?e.host:e}function tQ(t,e,i){var s;void 0===e&&(e=[]),void 0===i&&(i=!0);let r=function t(e){let i=tU(e);return tH(i)?e.ownerDocument?e.ownerDocument.body:e.body:tF(i)&&t_(i)?i:t(i)}(t),n=r===(null==(s=t.ownerDocument)?void 0:s.body),a=tR(r);return n?e.concat(a,a.visualViewport||[],t_(r)?r:[],a.frameElement&&i?tQ(a.frameElement):[]):e.concat(r,tQ(r,[],i))}function tG(t){let e=tW(t),i=parseFloat(e.width)||0,s=parseFloat(e.height)||0,r=tF(t),n=r?t.offsetWidth:i,a=r?t.offsetHeight:s,h=tE(i)!==n||tE(s)!==a;return h&&(i=n,s=a),{width:i,height:s,$:h}}function tz(t){return tN(t)?t:t.contextElement}function tJ(t){let e=tz(t);if(!tF(e))return tB(1);let i=e.getBoundingClientRect(),{width:s,height:r,$:n}=tG(e),a=(n?tE(i.width):i.width)/s,h=(n?tE(i.height):i.height)/r;return a&&Number.isFinite(a)||(a=1),h&&Number.isFinite(h)||(h=1),{x:a,y:h}}let tX=tB(0);function tY(t){let e=tR(t);return tD()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:tX}function tZ(t,e,i,s){var r;void 0===e&&(e=!1),void 0===i&&(i=!1);let n=t.getBoundingClientRect(),a=tz(t),h=tB(1);e&&(s?tN(s)&&(h=tJ(s)):h=tJ(t));let l=(void 0===(r=i)&&(r=!1),s&&(!r||s===tR(a))&&r)?tY(a):tB(0),o=(n.left+l.x)/h.x,u=(n.top+l.y)/h.y,c=n.width/h.x,d=n.height/h.y;if(a){let t=tR(a),e=s&&tN(s)?tR(s):s,i=t.frameElement;for(;i&&s&&e!==t;){let t=tJ(i),e=i.getBoundingClientRect(),s=tW(i),r=e.left+(i.clientLeft+parseFloat(s.paddingLeft))*t.x,n=e.top+(i.clientTop+parseFloat(s.paddingTop))*t.y;o*=t.x,u*=t.y,c*=t.x,d*=t.y,o+=r,u+=n,i=tR(i).frameElement}}return tA({width:c,height:d,x:o,y:u})}function t0(t){return tZ(tL(t)).left+tK(t).scrollLeft}function t1(t,e,i){let s;if("viewport"===e)s=function(t,e){let i=tR(t),s=tL(t),r=i.visualViewport,n=s.clientWidth,a=s.clientHeight,h=0,l=0;if(r){n=r.width,a=r.height;let t=tD();(!t||t&&"fixed"===e)&&(h=r.offsetLeft,l=r.offsetTop)}return{width:n,height:a,x:h,y:l}}(t,i);else if("document"===e)s=function(t){let e=tL(t),i=tK(t),s=t.ownerDocument.body,r=tT(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),n=tT(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight),a=-i.scrollLeft+t0(t),h=-i.scrollTop;return"rtl"===tW(s).direction&&(a+=tT(e.clientWidth,s.clientWidth)-r),{width:r,height:n,x:a,y:h}}(tL(t));else if(tN(e))s=function(t,e){let i=tZ(t,!0,"fixed"===e),s=i.top+t.clientTop,r=i.left+t.clientLeft,n=tF(t)?tJ(t):tB(1),a=t.clientWidth*n.x,h=t.clientHeight*n.y,l=r*n.x,o=s*n.y;return{width:a,height:h,x:l,y:o}}(e,i);else{let i=tY(t);s={...e,x:e.x-i.x,y:e.y-i.y}}return tA(s)}function t2(t,e){return tF(t)&&"fixed"!==tW(t).position?e?e(t):t.offsetParent:null}function t5(t,e){let i=tR(t);if(!tF(t))return i;let s=t2(t,e);for(;s&&["table","td","th"].includes(tM(s))&&"static"===tW(s).position;)s=t2(s,e);return s&&("html"===tM(s)||"body"===tM(s)&&"static"===tW(s).position&&!tI(s))?i:s||function(t){let e=tU(t);for(;tF(e)&&!tH(e);){if(tI(e))return e;e=tU(e)}return null}(t)||i}let t3=async function(t){let{reference:e,floating:i,strategy:s}=t,r=this.getOffsetParent||t5,n=this.getDimensions;return{reference:function(t,e,i){let s=tF(e),r=tL(e),n="fixed"===i,a=tZ(t,!0,n,e),h={scrollLeft:0,scrollTop:0},l=tB(0);if(s||!s&&!n){if(("body"!==tM(e)||t_(r))&&(h=tK(e)),s){let t=tZ(e,!0,n,e);l.x=t.x+e.clientLeft,l.y=t.y+e.clientTop}else r&&(l.x=t0(r))}return{x:a.left+h.scrollLeft-l.x,y:a.top+h.scrollTop-l.y,width:a.width,height:a.height}}(e,await r(i),s),floating:{x:0,y:0,...await n(i)}}},t6={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:i,strategy:s}=t,r=tF(i),n=tL(i);if(i===n)return e;let a={scrollLeft:0,scrollTop:0},h=tB(1),l=tB(0);if((r||!r&&"fixed"!==s)&&(("body"!==tM(i)||t_(n))&&(a=tK(i)),tF(i))){let t=tZ(i);h=tJ(i),l.x=t.x+i.clientLeft,l.y=t.y+i.clientTop}return{width:e.width*h.x,height:e.height*h.y,x:e.x*h.x-a.scrollLeft*h.x+l.x,y:e.y*h.y-a.scrollTop*h.y+l.y}},getDocumentElement:tL,getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:s,strategy:r}=t,n="clippingAncestors"===i?function(t,e){let i=e.get(t);if(i)return i;let s=tQ(t,[],!1).filter(t=>tN(t)&&"body"!==tM(t)),r=null,n="fixed"===tW(t).position,a=n?tU(t):t;for(;tN(a)&&!tH(a);){let e=tW(a),i=tI(a);i||"fixed"!==e.position||(r=null);let h=n?!i&&!r:!i&&"static"===e.position&&!!r&&["absolute","fixed"].includes(r.position)||t_(a)&&!i&&function t(e,i){let s=tU(e);return!(s===i||!tN(s)||tH(s))&&("fixed"===tW(s).position||t(s,i))}(t,a);h?s=s.filter(t=>t!==a):r=e,a=tU(a)}return e.set(t,s),s}(e,this._i):[].concat(i),a=[...n,s],h=a[0],l=a.reduce((t,i)=>{let s=t1(e,i,r);return t.top=tT(s.top,t.top),t.right=tk(s.right,t.right),t.bottom=tk(s.bottom,t.bottom),t.left=tT(s.left,t.left),t},t1(e,h,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:t5,getElementRects:t3,getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return tG(t)},getScale:tJ,isElement:tN,isRTL:function(t){return"rtl"===tW(t).direction}},t4=(t,e,i)=>{let s=new Map,r={platform:t6,...i},n={...r.platform,_i:s};return tC(t,e,{...r,platform:n})};function t7(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}function t8(t,e){t.hasAttribute("aria-label")||(R?i():(0,o.e)(i));function i(){(0,o.n)(t,"aria-label",e())}}function t9(t,e,i){for(;e;){if(e===t)return!0;if(i?.(e))break;e=e.parentElement}return!1}function et(t,e){(0,o.l)(t,"pointerup",t=>{0===t.button&&e(t)}),(0,o.l)(t,"keydown",t=>{(0,o.F)(t)&&e(t)})}function ee(t){return(0,o.P)(t)&&(t.touches.length>1||t.changedTouches.length>1)}function ei(t){if(R)return t();let e=(0,o.R)(),i=window.requestAnimationFrame(()=>{(0,o.k)(t,e),i=-1});return()=>void window.cancelAnimationFrame(i)}function es(t,e,i,{offsetVarName:s,xOffset:r,yOffset:n,...a}){if(!t)return;let h=i.replace(" ","-").replace("-center","");if((0,o.Q)(t,"visibility",e?null:"hidden"),!e)return;let l=t=>i.includes("top")?`calc(-1 * ${t})`:t;return function(t,e,i,s){let r;void 0===s&&(s={});let{ancestorScroll:n=!0,ancestorResize:a=!0,elementResize:h="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:o=!1}=s,u=tz(t),c=n||a?[...u?tQ(u):[],...tQ(e)]:[];c.forEach(t=>{n&&t.addEventListener("scroll",i,{passive:!0}),a&&t.addEventListener("resize",i)});let d=u&&l?function(t,e){let i,s=null,r=tL(t);function n(){clearTimeout(i),s&&s.disconnect(),s=null}return!function a(h,l){void 0===h&&(h=!1),void 0===l&&(l=1),n();let{left:o,top:u,width:c,height:d}=t.getBoundingClientRect();if(h||e(),!c||!d)return;let p=tP(u),f=tP(r.clientWidth-(o+c)),b=tP(r.clientHeight-(u+d)),g=tP(o),m={rootMargin:-p+"px "+-f+"px "+-b+"px "+-g+"px",threshold:tT(0,tk(1,l))||1},y=!0;function v(t){let e=t[0].intersectionRatio;if(e!==l){if(!y)return a();e?a(!1,e):i=setTimeout(()=>{a(!1,1e-7)},100)}y=!1}try{s=new IntersectionObserver(v,{...m,root:r.ownerDocument})}catch(t){s=new IntersectionObserver(v,m)}s.observe(t)}(!0),n}(u,i):null,p=-1,f=null;h&&(f=new ResizeObserver(t=>{let[s]=t;s&&s.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{f&&f.observe(e)})),i()}),u&&!o&&f.observe(u),f.observe(e));let b=o?tZ(t):null;return o&&function e(){let s=tZ(t);b&&(s.x!==b.x||s.y!==b.y||s.width!==b.width||s.height!==b.height)&&i(),b=s,r=requestAnimationFrame(e)}(),i(),()=>{c.forEach(t=>{n&&t.removeEventListener("scroll",i),a&&t.removeEventListener("resize",i)}),d&&d(),f&&f.disconnect(),f=null,o&&cancelAnimationFrame(r)}}(e,t,()=>{t4(e,t,{placement:h,...a}).then(({x:e,y:i})=>{Object.assign(t.style,{top:`calc(${i+"px"} + ${l(n?n+"px":`var(--${s}-y-offset, 0px)`)})`,left:`calc(${e+"px"} + ${r?r+"px":`var(--${s}-x-offset, 0px)`})`})})})}class er extends o.V{}class en extends er{constructor(){super(...arguments),this.ha=-2,this.ea=!1,this.fa=null,this.defaultDelay=2e3}get showing(){return this.$state.controlsVisible()}show(t=0,e){this.ia(),this.ea||this.ga(!0,t,e)}hide(t=this.defaultDelay,e){this.ia(),this.ea||this.ga(!1,t,e)}pause(t){this.ea=!0,this.ia(),this.ga(!0,0,t)}resume(t){this.ea=!1,this.$state.paused()||this.ga(!1,this.defaultDelay,t)}onConnect(){(0,o.e)(this.ka.bind(this));let t=this.la.bind(this),e=this.ma.bind(this);this.listen("can-play",t=>this.show(0,t)),this.listen("play",t),this.listen("pause",e),this.listen("autoplay-fail",e)}ka(){let{paused:t,started:e,autoplayError:i}=this.$state;if(t()||i()&&!e())return;let s=this.na.bind(this);(0,o.e)(()=>{let t=this.$state.pointer(),e="coarse"===t;for(let t of[e?"touchend":"pointerup","keydown"])(0,o.l)(this.el,t,s,{passive:!1});e||(0,o.l)(this.el,"pointermove",s)})}la(t){this.show(0,t),this.hide(this.defaultDelay,t)}ma(t){this.show(0,t)}ia(){window.clearTimeout(this.ha),this.ha=-1}na(t){t.MEDIA_GESTURE||this.ea||ee(t)||((0,o.G)(t)&&("Escape"===t.key?(this.el?.focus(),this.fa=null):this.fa&&(t.preventDefault(),requestAnimationFrame(()=>{this.fa?.focus(),this.fa=null}))),this.show(0,t),this.hide(this.defaultDelay,t))}ga(t,e,i){if(0===e){this.ja(t,i);return}this.ha=window.setTimeout(()=>{this.scope&&this.ja(t&&!this.ea,i)},e)}ja(t,e){this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.fa=document.activeElement,requestAnimationFrame(()=>this.el?.focus())),this.dispatch("controls-change",{detail:t,trigger:e}))}}class ea{constructor(){this.priority=0,this.ag=!0,this.xa=null,this.Ia=null,this.$f=new Set}canRender(){return!0}attach(t){this.xa=t,t.textTracks.onchange=this.ja.bind(this)}addTrack(t){this.$f.add(t),this.cg(t)}removeTrack(t){t[tb.Va]?.remove?.(),t[tb.Va]=null,this.$f.delete(t)}changeTrack(t){let e=t?.[tb.Va];e&&"showing"!==e.track.mode&&(e.track.mode="showing"),this.Ia=t}setDisplay(t){this.ag=t,this.ja()}detach(){for(let t of(this.xa&&(this.xa.textTracks.onchange=null),this.$f))this.removeTrack(t);this.$f.clear(),this.xa=null,this.Ia=null}cg(t){if(!this.xa)return;let e=t[tb.Va]??=this.dg(t);e instanceof HTMLElement&&(this.xa.append(e),e.track.mode=e.default?"showing":"hidden")}dg(t){let e=document.createElement("track"),i=t.default||"showing"===t.mode,s=t.src&&"vtt"===t.type;return e.id=t.id,e.src=s?t.src:"https://cdn.jsdelivr.net/npm/vidstack@next/empty.vtt",e.label=t.label,e.kind=t.kind,e.default=i,t.language&&(e.srclang=t.language),i&&!s&&this.bg(t,e.track),e}bg(t,e){if(!(t.src&&"vtt"===t.type||e.cues?.length))for(let i of t.cues)e.addCue(i)}ja(t){for(let e of this.$f){let i=e[tb.Va]?.track;if(!i)continue;if(!this.ag){i.mode="disabled";continue}let s="showing"===i.mode;s&&this.bg(e,i),e.setMode(s?"showing":"disabled",t)}}}class eh{constructor(t){this.Ba=t,this.xa=null,this.wa=[],this.ya=!1,this.ta=null,this.ua=null;let e=t.textTracks;this.za=e,(0,o.e)(this.Ca.bind(this)),(0,o.o)(this.P.bind(this)),(0,o.l)(e,"add",this.Da.bind(this)),(0,o.l)(e,"remove",this.Ea.bind(this)),(0,o.l)(e,"mode-change",this.va.bind(this))}Ca(){let{$state:t,$iosControls:e}=this.Ba;this.ya=t.controls()||e(),this.va()}add(t){this.wa.push(t),this.va()}remove(t){t.detach(),this.wa.splice(this.wa.indexOf(t),1),this.va()}Ga(t){requestAnimationFrame(()=>{if(this.xa=t,t)for(let e of(this.ta=new ea,this.ta.attach(t),this.za))this.Aa(e);this.va()})}Aa(t){tw(t)&&this.ta?.addTrack(t)}Fa(t){tw(t)&&this.ta?.removeTrack(t)}Da(t){this.Aa(t.detail)}Ea(t){this.Fa(t.detail)}va(){if(!this.xa){this.P();return}let t=this.za.selected;if(this.ya||t?.[tb.Ha]){this.ua?.changeTrack(null),this.ta?.setDisplay(!0),this.ta?.changeTrack(t);return}if(this.ta?.setDisplay(!1),this.ta?.changeTrack(null),!t){this.ua?.changeTrack(null);return}let e=this.wa.sort((t,e)=>t.priority-e.priority).find(e=>e.canRender(t));this.ua!==e&&(this.ua?.detach(),e?.attach(this.xa),this.ua=e??null),e?.changeTrack(t)}P(){this.ta?.detach(),this.ta=null,this.ua?.detach(),this.ua=null}}class TextTrackList extends T{constructor(){super(...arguments),this.Ua=!1,this.bb={},this.cb=this.db.bind(this)}get selected(){let t=this.d.find(t=>"showing"===t.mode&&tw(t));return t??null}add(t,e){let i=t instanceof TextTrack,s=i?t:new TextTrack(t);return this.bb[t.kind]&&t.default&&delete t.default,s.addEventListener("mode-change",this.cb),this[k.h](s,e),s[tb.ab]=this[tb.ab],this.Ua&&s[tb.Ua](),t.default&&(this.bb[t.kind]=s,s.mode="showing"),this}remove(t,e){if(this.d.includes(t))return t===this.bb[t.kind]&&delete this.bb[t.kind],t.mode="disabled",t[tb.$a]=null,t.removeEventListener("mode-change",this.cb),this[k.f](t,e),this}clear(t){for(let e of[...this.d])this.remove(e,t);return this}getById(t){return this.d.find(e=>e.id===t)??null}getByKind(t){let e=Array.isArray(t)?t:[t];return this.d.filter(t=>e.includes(t.kind))}[tb.Ua](){if(!this.Ua){for(let t of this.d)t[tb.Ua]();this.Ua=!0}}db(t){let e=t.detail;if("showing"===e.mode){let t=tw(e)?["captions","subtitles"]:[e.kind];for(let i of this.d)"showing"===i.mode&&i!=e&&t.includes(i.kind)&&(i.mode="disabled")}this.dispatchEvent(new o.D("mode-change",{detail:t.detail,trigger:t}))}}let el=Symbol(0);class eo extends T{get selected(){return this.d.find(t=>t.selected)??null}get selectedIndex(){return this.d.findIndex(t=>t.selected)}[k.i](t,e){this[k.$](t,!1,e)}[k.h](t,e){t[el]=!1,Object.defineProperty(t,"selected",{get(){return this[el]},set:e=>{this.readonly||(this[k.ca]?.(),this[k.$](t,e))}}),super[k.h](t,e)}[k.$](t,e,i){if(e===t[el])return;let s=this.selected;t[el]=e;let r=e?s!==t:s===t;r&&(s&&(s[el]=!1),this.dispatchEvent(new o.D("change",{detail:{prev:s,current:this.selected},trigger:i})))}}class eu extends eo{getById(t){return""===t?null:this.d.find(e=>e.id===t)??null}}let ec=eval,ed=/:\s+'?"?(.*?)'?"?\)/g,ep=/\s+not\s+/g,ef=/\s+and\s+/g,eb=/\s+or\s+/g,eg=/(\d)px/g,em=class extends o.H{constructor(t,e){super(),this.eb=(0,o.s)("true"),this.fb=new Set,this.gb=(0,o.s)(!0),this.$matches=(0,o.T)(()=>{let t=this.eb();if("never"===t)return!1;for(let e of this.fb){let i=this.hb[e](),s=(0,o.a)(i)?`'${i}'`:i+"";t=t.replace((0,o.c)(e),s)}return ec(`!!(${t})`)&&this.gb()}),this.ib=e,this.hb=t,(0,o.U)(t=>{(0,o.e)(this.jb.bind(this)),(0,o.e)(this.kb.bind(this)),this.lb=t})}get query(){return(0,o.W)(this.ib)}get matches(){return this.$matches()}jb(){let t=this.query;if(""===t)return;if("never"===t){this.eb.set(t);return}let e=t.trim().split(/\s*,\s*/g),i=e.filter(t=>t.startsWith("@media")).join(","),s=e.filter(t=>!t.startsWith("@media"));if(i.length){let t=window.matchMedia(i.replace(/@media\s/g,"")),e=()=>void this.gb.set(t.matches);e(),(0,o.l)(t,"change",e)}if(s.length){let t=this.mb(s),e=Object.keys(Y.record);for(let i of t.matchAll(/\(([-a-zA-Z]+)\s/g)){let t=(0,o.X)(i[1]);e.includes(t)&&this.fb.add(t)}this.eb.set(t)}return()=>{this.fb.clear(),this.eb.set("true"),this.gb.set(!0)}}kb(){this.$matches(),this.dispatchEvent(new Event("change"))}mb(t){return t.map(t=>"("+t.replace(ed,' == "$1")').replace(ep,"!").replace(ef," && ").replace(eb," || ").replace(eg,"$1").trim()+")").join(" || ")}destroy(){this.lb()}};em.create=t=>{let e=ti();return new em(e.$state,t)};let ey=em,ev=Symbol(0),ew=Symbol(0),e$={ob:ev,pb:ew};class ex extends eo{constructor(){super(...arguments),this.nb=!1,this.switch="current"}get auto(){return this.nb||this.readonly}[k.ca](){this[e$.ob](!1)}[k.k](t){this[e$.ob](!1,t)}autoSelect(t){this.readonly||this.nb||!this[e$.pb]||(this[e$.pb]?.(),this[e$.ob](!0,t))}[e$.ob](t,e){this.nb!==t&&(this.nb=t,this.dispatchEvent(new o.D("auto-change",{detail:t,trigger:e})))}}function ek(t){return t?.$$PROVIDER_TYPE==="AUDIO"}function eT(t){return t?.$$PROVIDER_TYPE==="VIDEO"}function eE(t){return t?.$$PROVIDER_TYPE==="HLS"}function eP(t){return t?.$$PROVIDER_TYPE==="YOUTUBE"}function eB(t){return!R&&t instanceof HTMLAudioElement}function eS(t){return!R&&t instanceof HTMLVideoElement}function eO(t){return eB(t)||eS(t)}function eA(t){return!R&&t instanceof HTMLIFrameElement}let eq={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},eC=new Set(["Shift","Alt","Meta","Control"]),eM='input, textarea, select, [contenteditable], [role^="menuitem"]';class eR extends er{constructor(t){super(),this.Ba=t,this.qb=null}onConnect(){(0,o.e)(this.ub.bind(this))}ub(){let{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;let i="player"===e()?this.el:document,s=(0,o.s)(!1);i===this.el?(this.listen("focusin",()=>s.set(!0)),this.listen("focusout",t=>{this.el.contains(t.target)||s.set(!1)})):((0,o.p)(s)||s.set(document.querySelector("[data-media-player]")===this.el),(0,o.l)(document,"focusin",t=>{let e=t.composedPath().find(t=>t instanceof Element&&"media-player"===t.localName);void 0!==e&&s.set(this.el===e)})),(0,o.e)(()=>{s()&&((0,o.l)(i,"keyup",this.vb.bind(this)),(0,o.l)(i,"keydown",this.wb.bind(this)),(0,o.l)(i,"keydown",this.xb.bind(this),{capture:!0}))})}vb(t){let e=document.activeElement;if(!t.key||!this.$state.canSeek()||e?.matches(eM))return;let{method:i,value:s}=this.rb(t);if(!(0,o.a)(s)&&!(0,o.J)(s)){s?.callback(t);return}if(i?.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this.qb?(this.tb(t,"seekForward"===i),this.qb=null):(this.Ba.remote.seek(this.sb,t),this.sb=void 0)),i?.startsWith("volume")){let e=this.el.querySelector("[data-media-volume-slider]");e?.dispatchEvent(new KeyboardEvent("keyup",{key:"volumeUp"===i?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}}wb(t){if(!t.key||eC.has(t.key))return;let e=document.activeElement;if(e?.matches(eM)||(0,o.F)(t)&&e?.matches('button, [role="button"]'))return;let{method:i,value:s}=this.rb(t);if(!(0,o.a)(s)&&!(0,o.J)(s)){s?.callback(t);return}if(!i&&!t.metaKey&&/[0-9]/.test(t.key)){t.preventDefault(),t.stopPropagation(),this.Ba.remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(i)switch(t.preventDefault(),t.stopPropagation(),i){case"seekForward":case"seekBackward":this.yb(t,i,"seekForward"===i);break;case"volumeUp":case"volumeDown":let r=this.el.querySelector("[data-media-volume-slider]");if(r)r.dispatchEvent(new KeyboardEvent("keydown",{key:"volumeUp"===i?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{let e=t.shiftKey?.1:.05;this.Ba.remote.changeVolume(this.$state.volume()+("volumeUp"===i?+e:-e),t)}break;case"toggleFullscreen":this.Ba.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":let n=this.$state.playbackRate();this.Ba.remote.changePlaybackRate(Math.max(.25,Math.min(2,n+("speedUp"===i?.25:-.25))),t);break;default:this.Ba.remote[i]?.(t)}}xb(t){eO(t.target)&&this.rb(t).method&&t.preventDefault()}rb(t){let e={...this.$props.keyShortcuts(),...this.Ba.ariaKeys},i=Object.keys(e).find(i=>{let s=e[i],r=(0,o.J)(s)?s.join(" "):(0,o.a)(s)?s:s?.keys;return(o.J(r)?r:r?.split(" "))?.some(e=>e.replace(/Shift\+(\d)/g,(t,e)=>eL[e-1]).replace(/Control/g,"Ctrl").split("+").every(e=>eC.has(e)?t[e.toLowerCase()+"Key"]:t.key===e.replace("Space"," ")))});return{method:i,value:i?e[i]:null}}zb(t,e){let i=t.shiftKey?10:5;return this.sb=Math.max(0,Math.min((this.sb??this.$state.currentTime())+("seekForward"===e?+i:-i),this.$state.duration()))}tb(t,e){this.qb?.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}yb(t,e,i){this.$state.canSeek()&&(this.qb||(this.qb=this.el.querySelector("[data-media-time-slider]")),this.qb?this.tb(t,i):this.Ba.remote.seeking(this.zb(t,e),t))}}let eL=["!","@","#","$","%","^","&","*","(",")"];class ej extends o.V{constructor(t){super(),this.Ab=t}onAttach(t){let{$props:e,ariaKeys:i}=ti(),s=t.getAttribute("aria-keyshortcuts");if(s){i[this.Ab]=s,R||(0,o.o)(()=>{delete i[this.Ab]});return}let r=e.keyShortcuts()[this.Ab];if(r){let e=(0,o.J)(r)?r.join(" "):(0,o.a)(r)?r:r?.keys;t.setAttribute("aria-keyshortcuts",(0,o.J)(e)?e.join(" "):e)}}}let eN=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,eF=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp4","audio/webm","audio/flac"]),eV=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,e_=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),eI=/\.(m3u8)($|\?)/i,eD=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]);function eH({src:t,type:e}){return(0,o.a)(t)&&eI.test(t)||eD.has(e)}function eW(t){return!R&&void 0!==window.MediaStream&&t instanceof window.MediaStream}class eK{canPlay({src:t,type:e}){return(0,o.a)(t)?eN.test(t)||eF.has(e)||t.startsWith("blob:")&&"audio/object"===e:"audio/object"===e}mediaType(){return"audio"}async load(){if(R)throw Error("[vidstack] can not load audio provider server-side");return new(await i.e(875).then(i.bind(i,5875))).AudioProvider(this.target)}}class eU{canPlay(t){return(0,o.a)(t.src)?eV.test(t.src)||e_.has(t.type)||t.src.startsWith("blob:")&&"video/object"===t.type||eH(t)&&(R||D()):"video/object"===t.type}mediaType(){return"video"}async load(t){if(R)throw Error("[vidstack] can not load video provider server-side");return new(await i.e(36).then(i.bind(i,4272))).VideoProvider(this.target,t)}}class eQ{canPlay(t){return(0,o.a)(t.src)&&"video/youtube"===t.type}mediaType(){return"video"}async load(t){if(R)throw Error("[vidstack] can not load youtube provider server-side");return new(await i.e(147).then(i.bind(i,9147))).YouTubeProvider(this.target)}}let eG=class t extends eU{canPlay(e){return t.supported&&eH(e)}async load(t){if(R)throw Error("[vidstack] can not load hls provider server-side");return new(await i.e(801).then(i.bind(i,4801))).HLSProvider(this.target,t)}};eG.supported=U();let ez=eG,eJ=Symbol(0),eX=["autoplay","canFullscreen","canPictureInPicture","canLoad","canPlay","canSeek","ended","fullscreen","loop","live","liveEdge","mediaType","muted","paused","pictureInPicture","playing","playsinline","seeking","started","streamType","viewType","waiting"];class eY extends er{constructor(t){super(),this.Yg=t}async onAttach(t){if(R)return;let e=this.$props.load();if("eager"===e)requestAnimationFrame(this.Yg);else if("idle"===e)(0,o.Y)(this.Yg);else if("visible"===e){let e=new IntersectionObserver(t=>{this.scope&&t[0].isIntersecting&&(e.disconnect(),this.Yg())});return e.observe(t),e.disconnect.bind(e)}}}class eZ{constructor(t,e){this.gc=t,this.Ba=e,this.Kb=(t,...e)=>{R||this.gc(new o.D(t,{detail:e?.[0],trigger:e?.[1]}))}}async Hg(t,e){if(R)return;let{$state:i,logger:s}=this.Ba;if((0,o.p)(i.canPlay))return;let r={duration:t?.duration??(0,o.p)(i.duration),seekable:t?.seekable??(0,o.p)(i.seekable),buffered:t?.buffered??(0,o.p)(i.buffered),provider:(0,o.p)(this.Ba.$provider)};this.Kb("can-play",r,e),(0,o.K)(),i.canPlay()&&i.autoplay()&&!i.started()&&await this.Zg(e)}async Zg(t){let{player:e,$state:i}=this.Ba;i.autoplaying.set(!0);let s=new o.D("autoplay-attempt",{trigger:t});try{await e.play(s)}catch(t){}}}class e0{constructor(){this.$g=new Map}sa(t,e){this.$g.has(t)||this.$g.set(t,new Set),this.$g.get(t).add(e)}Sh(t,e){let i=this.$g.get(t);if(i)for(let t of i)e(t);this.$g.delete(t)}dh(t){this.$g.delete(t)}ei(t){return this.$g.get(t)?.size??0}j(){this.$g.clear()}}function e1(t){return t instanceof Error?t:Error(JSON.stringify(t))}class e2{constructor(){this.yb=!1,this.eh=!1,this.ah=!1,this.$g=new e0}}class e5 extends er{constructor(t,e,i){super(),this.Nb=t,this._g=e,this.Ba=i,this.bh=!1,this.Lb=i.$provider,this.jc=new en,this.ch=new A,this.$c=new G}onAttach(){this.listen("fullscreen-change",this.n.bind(this))}onConnect(){let t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),e=this.ih.bind(this);for(let i of t)i.startsWith("media-")&&this.listen(i,e);(0,o.e)(this.jh.bind(this)),(0,o.e)(this.kh.bind(this)),(0,o.e)(this.lh.bind(this))}ih(t){t.stopPropagation(),(0,o.p)(this.Lb)&&this[t.type]?.(t)}async ec(t){if(R)return;let{canPlay:e,paused:i,ended:s,autoplaying:r,seekableStart:n}=this.$state;if((0,o.p)(i)){if(t?.type!=="media-play-request"){this.dispatchEvent(this.createEvent("media-play-request",{trigger:t}));return}this._g.$g.sa("play",t);try{let t=(0,o.p)(this.Lb);return e3(t,(0,o.p)(e)),(0,o.p)(s)&&(t.currentTime=n()+.1),await t.play()}catch(i){let e=this.createEvent("play-fail",{detail:e1(i),trigger:t});throw e.autoplay=r(),this.Nb.gc(e),i}}}async dc(t){if(R)return;let{canPlay:e,paused:i}=this.$state;if((0,o.p)(i))return;if(t?.type!=="media-pause-request"){this.dispatchEvent(this.createEvent("media-pause-request",{trigger:t}));return}this._g.$g.sa("pause",t);let s=(0,o.p)(this.Lb);return e3(s,(0,o.p)(e)),s.pause()}oc(t){if(R)return;let{canPlay:e,live:i,liveEdge:s,canSeek:r,liveSyncPosition:n,seekableEnd:a,userBehindLiveEdge:h}=this.$state;if(h.set(!1),(0,o.p)(()=>!i()||s()||!r()))return;let l=(0,o.p)(this.Lb);e3(l,(0,o.p)(e)),l.currentTime=n()??a()-2}async kc(t="prefer-media",e){if(R)return;let i=this.fh(t);if(e6(t,i),!i.active){if((0,o.p)(this.$state.pictureInPicture)&&(this.bh=!0,await this.nc(e)),e?.type!=="media-enter-fullscreen-request"){this.dispatchEvent(this.createEvent("media-enter-fullscreen-request",{detail:t,trigger:e}));return}return this._g.$g.sa("fullscreen",e),i.enter()}}async lc(t="prefer-media",e){if(R)return;let i=this.fh(t);if(e6(t,i),i.active){if(e?.type!=="media-exit-fullscreen-request"){this.dispatchEvent(this.createEvent("media-exit-fullscreen-request",{detail:t,trigger:e}));return}try{this._g.$g.sa("fullscreen",e);let t=await i.exit();return this.bh&&(0,o.p)(this.$state.canPictureInPicture)&&await this.mc(),t}finally{this.bh=!1}}}fh(t){let e=(0,o.p)(this.Lb);return"prefer-media"===t&&this.ch.supported||"media"===t?this.ch:e?.fullscreen}async mc(t){if(!R&&(this.gh(),!this.$state.pictureInPicture())){if(t?.type!=="media-enter-pip-request"){this.dispatchEvent(this.createEvent("media-enter-pip-request",{trigger:t}));return}return this._g.$g.sa("pip",t),await this.Lb().pictureInPicture.enter()}}async nc(t){if(!R&&(this.gh(),this.$state.pictureInPicture())){if(t?.type!=="media-exit-pip-request"){this.dispatchEvent(this.createEvent("media-exit-pip-request",{trigger:t}));return}return this._g.$g.sa("pip",t),await this.Lb().pictureInPicture.exit()}}gh(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}jh(){this.jc.defaultDelay=this.$props.controlsDelay()}kh(){let{canLoad:t,canFullscreen:e}=this.$state,i=this.ch.supported||this.Lb()?.fullscreen?.supported||!1;t()&&(0,o.p)(e)===i||e.set(i)}lh(){let{canLoad:t,canPictureInPicture:e}=this.$state,i=this.Lb()?.pictureInPicture?.supported||!1;t()&&(0,o.p)(e)===i||e.set(i)}"media-audio-track-change-request"(t){if(this.Ba.audioTracks.readonly)return;let e=t.detail,i=this.Ba.audioTracks[e];i&&(this._g.$g.sa("audioTrack",t),i.selected=!0)}async "media-enter-fullscreen-request"(t){try{await this.kc(t.detail,t)}catch(e){this.o(e,t)}}async "media-exit-fullscreen-request"(t){try{await this.lc(t.detail,t)}catch(e){this.o(e,t)}}async n(t){let e=(0,o.p)(this.$props.fullscreenOrientation),i=t.detail;if(!(0,o.i)(e)&&this.$c.supported){if(i){if(this.$c.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.$c.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}}o(t,e){this.Nb.gc(this.createEvent("fullscreen-error",{detail:e1(t)}))}async "media-orientation-lock-request"(t){try{this._g.$g.sa("orientation",t),await this.$c.lock(t.detail)}catch(t){this._g.$g.dh("orientation")}}async "media-orientation-unlock-request"(t){try{this._g.$g.sa("orientation",t),await this.$c.unlock()}catch(t){this._g.$g.dh("orientation")}}async "media-enter-pip-request"(t){try{await this.mc(t)}catch(e){this.hh(e,t)}}async "media-exit-pip-request"(t){try{await this.nc(t)}catch(e){this.hh(e,t)}}hh(t,e){this.Nb.gc(this.createEvent("picture-in-picture-error",{detail:e1(t)}))}"media-live-edge-request"(t){let{live:e,liveEdge:i,canSeek:s}=this.$state;if(!(!e()||i())&&s()){this._g.$g.sa("seeked",t);try{this.oc()}catch(t){}}}"media-loop-request"(t){window.requestAnimationFrame(async()=>{try{this._g.eh=!0,this._g.ah=!0,await this.ec(t)}catch(t){this._g.eh=!1,this._g.ah=!1}})}async "media-pause-request"(t){if(!this.$state.paused())try{await this.dc(t)}catch(t){this._g.$g.dh("pause")}}async "media-play-request"(t){if(this.$state.paused())try{await this.ec(t)}catch(t){}}"media-rate-change-request"(t){this.$state.playbackRate()!==t.detail&&(this._g.$g.sa("rate",t),this.Lb().playbackRate=t.detail)}"media-quality-change-request"(t){if(this.Ba.qualities.readonly)return;this._g.$g.sa("quality",t);let e=t.detail;if(e<0)this.Ba.qualities.autoSelect(t);else{let t=this.Ba.qualities[e];t&&(t.selected=!0)}}"media-pause-controls-request"(t){this._g.$g.sa("controls",t),this.jc.pause(t)}"media-resume-controls-request"(t){this._g.$g.sa("controls",t),this.jc.resume(t)}"media-seek-request"(t){let{seekableStart:e,seekableEnd:i,ended:s,canSeek:r,live:n,userBehindLiveEdge:a}=this.$state;s()&&(this._g.ah=!0),this._g.yb=!1,this._g.$g.dh("seeking");let h=Math.min(Math.max(e()+.1,t.detail),i()-.1);Number.isFinite(h)&&r()&&(this._g.$g.sa("seeked",t),this.Lb().currentTime=h,n()&&t.isOriginTrusted&&Math.abs(i()-h)>=2&&a.set(!0))}"media-seeking-request"(t){this._g.$g.sa("seeking",t),this.$state.seeking.set(!0),this._g.yb=!0}"media-start-loading"(t){this.$state.canLoad()||(this._g.$g.sa("load",t),this.Nb.gc(this.createEvent("can-load")))}"media-text-track-change-request"(t){let{index:e,mode:i}=t.detail,s=this.Ba.textTracks[e];s&&(this._g.$g.sa("textTrack",t),s.setMode(i,t))}"media-mute-request"(t){this.$state.muted()||(this._g.$g.sa("volume",t),this.Lb().muted=!0)}"media-unmute-request"(t){let{muted:e,volume:i}=this.$state;e()&&(this._g.$g.sa("volume",t),this.Ba.$provider().muted=!1,0===i()&&(this._g.$g.sa("volume",t),this.Lb().volume=.25))}"media-volume-change-request"(t){let{muted:e,volume:i}=this.$state,s=t.detail;i()!==s&&(this._g.$g.sa("volume",t),this.Lb().volume=s,s>0&&e()&&(this._g.$g.sa("volume",t),this.Lb().muted=!1))}}function e3(t,e){if(!t||!e)throw Error("[vidstack] media not ready")}function e6(t,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}var e4=function(t,e,i){var s=null,r=null,n=function(){s&&(clearTimeout(s),r=null,s=null)},a=function(){if(!e)return t.apply(this,arguments);var a=this,h=arguments,l=i&&!s;if(n(),r=function(){t.apply(a,h)},s=setTimeout(function(){if(s=null,!l){var t=r;return r=null,t()}},e),l)return r()};return a.cancel=n,a.flush=function(){var t=r;n(),t&&t()},a},e7=function(t,e,i){var s=null,r=null,n=i&&i.leading,a=i&&i.trailing;null==n&&(n=!0),null==a&&(a=!n),!0==n&&(a=!1);var h=function(){s&&(clearTimeout(s),s=null)},l=function(){var i=n&&!s,h=this,l=arguments;if(r=function(){return t.apply(h,l)},s||(s=setTimeout(function(){if(s=null,a)return r()},e)),i)return i=!1,r()};return l.cancel=h,l.flush=function(){var t=r;h(),t&&t()},l};let e8=new Set(["autoplay","autoplay-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class e9 extends er{constructor(t,e){super(),this._g=t,this.Ba=e,this.vh=new Map,this.Ah=!1,this.yh=!1,this.seeking=e7(t=>{let{seeking:e,currentTime:i,paused:s}=this.$state;e.set(!0),i.set(t.detail),this.wh("seeking",t),s()&&(this.zh=t,this.Bh())},150,{leading:!0}),this.Bh=e4(()=>{if(!this.zh)return;this.Ah=!0;let{waiting:t,playing:e}=this.$state;t.set(!0),e.set(!1);let i=this.createEvent("waiting",{trigger:this.zh});this.vh.set("waiting",i),this.dispatch(i),this.zh=void 0,this.Ah=!1},300)}onAttach(t){t.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(t){this.Jh(),this.Kh(),this.Lh(),this.Mh(),(0,o.o)(this.Nh.bind(this))}gc(t){if(!this.scope)return;let e=t.type;this[t.type]?.(t),R||(e8.has(e)&&this.vh.set(e,t),this.dispatch(t))}Mh(){this.yh&&(this.Ba.$provider()?.paused&&requestAnimationFrame(()=>{this.scope&&this.Ba.remote.play(new o.D("dom-connect"))}),this.yh=!1)}Nh(){this.yh||(this.yh=!this.Ba.$state.paused(),this.Ba.$provider()?.pause())}xh(){this.Dh(),this._g.ah=!1,this._g.eh=!1,this.Ah=!1,this.zh=void 0,this.vh.clear()}wh(t,e){this._g.$g.Sh(t,t=>{e.request=t,e.triggers.add(t)})}Jh(){this.Ch(),this.Eh();let t=this.Ba.textTracks;(0,o.l)(t,"add",this.Ch.bind(this)),(0,o.l)(t,"remove",this.Ch.bind(this)),(0,o.l)(t,"mode-change",this.Eh.bind(this))}Kh(){let t=this.Ba.qualities;(0,o.l)(t,"add",this.Fh.bind(this)),(0,o.l)(t,"remove",this.Fh.bind(this)),(0,o.l)(t,"change",this.Oh.bind(this)),(0,o.l)(t,"auto-change",this.Ph.bind(this)),(0,o.l)(t,"readonly-change",this.Qh.bind(this))}Lh(){let t=this.Ba.audioTracks;(0,o.l)(t,"add",this.Gh.bind(this)),(0,o.l)(t,"remove",this.Gh.bind(this)),(0,o.l)(t,"change",this.Rh.bind(this))}Ch(t){let{textTracks:e}=this.$state;e.set(this.Ba.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}Eh(t){t&&this.wh("textTrack",t);let e=this.Ba.textTracks.selected,{textTrack:i}=this.$state;i()!==e&&(i.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}Gh(t){let{audioTracks:e}=this.$state;e.set(this.Ba.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}Rh(t){let{audioTrack:e}=this.$state;e.set(this.Ba.audioTracks.selected),this.wh("audioTrack",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}Fh(t){let{qualities:e}=this.$state;e.set(this.Ba.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}Oh(t){let{quality:e}=this.$state;e.set(this.Ba.qualities.selected),this.wh("quality",t),this.dispatch("quality-change",{detail:e(),trigger:t})}Ph(){this.$state.autoQuality.set(this.Ba.qualities.auto)}Qh(){this.$state.canSetQuality.set(!this.Ba.qualities.readonly)}"provider-change"(t){let e=this.Ba.$provider(),i=t.detail;e?.type!==i?.type&&(e?.destroy?.(),e?.scope?.dispose(),this.Ba.$provider.set(t.detail),e&&null===t.detail&&this.Hh(t))}"provider-loader-change"(t){}autoplay(t){this.$state.autoplayError.set(null)}"autoplay-fail"(t){this.$state.autoplayError.set(t.detail),this.xh()}"can-load"(t){this.$state.canLoad.set(!0),this.vh.set("can-load",t),this.wh("load",t),this.Ba.textTracks[tb.Ua]()}"media-type-change"(t){let e=this.vh.get("source-change");e&&t.triggers.add(e);let i=(0,o.p)(this.$state.viewType);this.$state.mediaType.set(t.detail);let s=(0,o.p)(this.$state.providedViewType),r="unknown"===s?t.detail:s;i!==r&&(R?this.$state.inferredViewType.set(r):setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:r,trigger:t}))})},0))}"stream-type-change"(t){let e=this.vh.get("source-change");e&&t.triggers.add(e);let{streamType:i,inferredStreamType:s}=this.$state;s.set(t.detail),t.detail=i()}"rate-change"(t){this.$state.playbackRate.set(t.detail),this.wh("rate",t)}"sources-change"(t){this.$state.sources.set(t.detail)}"source-change"(t){let e=this.vh.get("sources-change");e&&t.triggers.add(e),this.Hh(t),this.vh.set(t.type,t),this.$state.source.set(t.detail),this.el?.setAttribute("aria-busy","true")}Hh(t){this.Ba.audioTracks[k.j](t),this.Ba.qualities[k.j](t),this.xh(),tt(this.Ba.$state)}abort(t){let e=this.vh.get("source-change");e&&t.triggers.add(e);let i=this.vh.get("can-load");i&&!t.triggers.hasType("can-load")&&t.triggers.add(i)}"load-start"(t){let e=this.vh.get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);let e=this.vh.get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){let e=this.vh.get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){let e=this.vh.get("load-start");e&&t.triggers.add(e)}"can-play"(t){let e=this.vh.get("loaded-metadata");e&&t.triggers.add(e),this.Ih(t.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(t){this.Ih(t.detail);let e=this.vh.get("can-play");e&&t.triggers.add(e)}Ih(t){let{seekable:e,seekableEnd:i,buffered:s,duration:r,canPlay:n}=this.$state;n.set(!0),s.set(t.buffered),e.set(t.seekable),r.set(i())}"duration-change"(t){let{live:e,duration:i}=this.$state,s=t.detail;e()||i.set(Number.isNaN(s)?0:s)}progress(t){let{buffered:e,seekable:i,live:s,duration:r,seekableEnd:n}=this.$state,a=t.detail;e.set(a.buffered),i.set(a.seekable),s()&&(r.set(n),this.dispatch("duration-change",{detail:n(),trigger:t}))}play(t){let{paused:e,autoplayError:i,ended:s,autoplaying:r,playsinline:n,pointer:a,muted:h}=this.$state;if(t.autoplay=r(),this._g.eh||!e()){t.stopImmediatePropagation();return}let l=this.vh.get("waiting");l&&t.triggers.add(l),this.wh("play",t),this.vh.set("play",t),e.set(!1),i.set(null),r()&&(this.gc(this.createEvent("autoplay",{detail:{muted:h()},trigger:t})),r.set(!1)),(s()||this._g.ah)&&(this._g.ah=!1,s.set(!1),this.gc(this.createEvent("replay",{trigger:t}))),n()||"coarse"!==a()||this.Ba.remote.enterFullscreen("prefer-media",t)}"play-fail"(t){let{muted:e,autoplaying:i}=this.$state,s=this.vh.get("play");s&&t.triggers.add(s),this.wh("play",t);let{paused:r,playing:n}=this.$state;r.set(!0),n.set(!1),this.xh(),this.vh.set("play-fail",t),i()&&(this.gc(this.createEvent("autoplay-fail",{detail:{muted:e(),error:t.detail},trigger:t})),i.set(!1))}playing(t){let e=this.vh.get("play"),i=this.vh.get("seeked");e?t.triggers.add(e):i&&t.triggers.add(i),setTimeout(()=>this.xh(),0);let{paused:s,playing:r,live:n,liveSyncPosition:a,seekableEnd:h,started:l,currentTime:o,seeking:u,ended:c}=this.$state;if(s.set(!1),r.set(!0),u.set(!1),c.set(!1),this._g.eh){t.stopImmediatePropagation(),this._g.eh=!1;return}if(n()&&!l()&&0===o()){let t=a()??h()-2;Number.isFinite(t)&&(this.Ba.$provider().currentTime=t)}this.started(t)}started(t){let{started:e}=this.$state;e()||(e.set(!0),this.gc(this.createEvent("started",{trigger:t})))}pause(t){if(this.el?.isConnected||(this.yh=!0),this._g.eh){t.stopImmediatePropagation();return}let e=this.vh.get("seeked");e&&t.triggers.add(e),this.wh("pause",t);let{paused:i,playing:s,seeking:r}=this.$state;i.set(!0),s.set(!1),r.set(!1),this.xh()}"time-update"(t){let{currentTime:e,played:i,waiting:s}=this.$state,r=t.detail;for(let n of(e.set(r.currentTime),i.set(r.played),s.set(!1),this.Ba.textTracks))n[tb.Ta](r.currentTime,t)}"volume-change"(t){let{volume:e,muted:i}=this.$state,s=t.detail;e.set(s.volume),i.set(s.muted||0===s.volume),this.wh("volume",t)}seeked(t){let{seeking:e,currentTime:i,paused:s,duration:r,ended:n}=this.$state;if(this._g.yb)e.set(!0),t.stopImmediatePropagation();else if(e()){let a=this.vh.get("waiting");a&&t.triggers.add(a);let h=this.vh.get("seeking");h&&!t.triggers.hasType("seeking")&&t.triggers.add(h),s()&&this.Dh(),e.set(!1),t.detail!==r()&&n.set(!1),i.set(t.detail),this.wh("seeked",t);let l=h?.originEvent;l?.isTrusted&&!/seek/.test(l.type)&&this.started(t)}}waiting(t){this.Ah||this._g.yb||(t.stopImmediatePropagation(),this.zh=t,this.Bh())}ended(t){if(this._g.eh){t.stopImmediatePropagation();return}let{paused:e,playing:i,seeking:s,ended:r}=this.$state;e.set(!0),i.set(!1),s.set(!1),r.set(!0),this.xh()}Dh(){this.Bh.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){this.$state.fullscreen.set(t.detail),this.wh("fullscreen",t)}"fullscreen-error"(t){this.wh("fullscreen",t)}"orientation-change"(t){this.wh("orientation",t)}"picture-in-picture-change"(t){this.$state.pictureInPicture.set(t.detail),this.wh("pip",t)}"picture-in-picture-error"(t){this.wh("pip",t)}"title-change"(t){t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail)}"poster-change"(t){t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail)}}class it extends er{onSetup(){this.mh(),R||((0,o.e)(this.nh.bind(this)),(0,o.e)(this.Ob.bind(this)),(0,o.e)(this.oh.bind(this)),(0,o.e)(this.xg.bind(this)),(0,o.e)(this.ph.bind(this)),(0,o.e)(this.Ca.bind(this)),(0,o.e)(this.qh.bind(this)),(0,o.e)(this.ac.bind(this)),(0,o.e)(this.rh.bind(this)),(0,o.e)(this.sh.bind(this)),(0,o.e)(this.th.bind(this)))}mh(){let t={poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"};for(let e of Object.keys(this.$props))this.$state[t[e]??e]?.set(this.$props[e]());this.$state.muted.set(this.$props.muted()||0===this.$props.volume())}nh(){let{viewType:t,streamType:e,title:i,poster:s}=this.$props;this.$state.providedPoster.set(s()),this.$state.providedStreamType.set(e()),this.$state.providedViewType.set(t()),this.$state.providedTitle.set(this.el?.getAttribute("data-title")||i())}uh(){}Ob(){let{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}oh(){let t=this.$props.autoplay();this.$state.autoplay.set(t),this.dispatch("autoplay-change",{detail:t})}ph(){let t=this.$props.loop();this.$state.loop.set(t),this.dispatch("loop-change",{detail:t})}Ca(){let t=this.$props.controls();this.$state.controls.set(t)}xg(){let{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}qh(){let t=this.$props.crossorigin();this.$state.crossorigin.set(!0===t?"":t)}ac(){let t=this.$props.playsinline();this.$state.playsinline.set(t),this.dispatch("playsinline-change",{detail:t})}sh(){this.dispatch("live-change",{detail:this.$state.live()})}rh(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}th(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}function ie(t,e=2){return Number(t.toFixed(e))}function ii(t){return String(t).split(".")[1]?.length??0}function is(t,e,i){return Math.max(t,Math.min(i,e))}let ir=(0,o.s)(!1);R||((0,o.l)(document,"pointerdown",()=>{ir.set(!1)}),(0,o.l)(document,"keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||ir.set(!0)}));class ia extends o.V{constructor(){super(...arguments),this.Xh=(0,o.s)(!1)}onConnect(t){(0,o.e)(()=>{if(!ir()){this.Xh.set(!1),ih(t,!1),this.listen("pointerenter",this.Yh.bind(this)),this.listen("pointerleave",this.Zh.bind(this));return}let e=document.activeElement===t;this.Xh.set(e),ih(t,e),this.listen("focus",this._h.bind(this)),this.listen("blur",this.$h.bind(this))})}focused(){return this.Xh()}_h(){this.Xh.set(!0),ih(this.el,!0)}$h(){this.Xh.set(!1),ih(this.el,!1)}Yh(){il(this.el,!0)}Zh(){il(this.el,!1)}}function ih(t,e){(0,o.n)(t,"data-focus",e),(0,o.n)(t,"data-hocus",e)}function il(t,e){(0,o.n)(t,"data-hocus",e),(0,o.n)(t,"data-hover",e)}class io{constructor(){this.ai=!1,this.bi=(0,o.f)(),this.$g=new Map}get ei(){return this.$g.size}get fi(){return this.ai}async gi(){this.ai||await this.bi.promise}sa(t,e){if(this.ai){e();return}this.$g.delete(t),this.$g.set(t,e)}Sh(t){this.$g.get(t)?.(),this.$g.delete(t)}hc(){this.ci(),this.ai=!0,this.$g.size>0&&this.ci()}ic(){this.ai=!1}j(){this.ic(),this.$g.clear(),this.di()}ci(){for(let t of this.$g.keys())this.Sh(t);this.di()}di(){this.bi.resolve(),this.bi=(0,o.f)()}}var iu=Object.defineProperty,ic=Object.getOwnPropertyDescriptor,id=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?ic(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&iu(e,i,n),n};let ip=class t extends o.O{constructor(){super(),this.canPlayQueue=new io,new it;let t={player:this,scope:(0,o.R)(),qualities:new ex,audioTracks:new eu,$provider:(0,o.s)(null),$props:this.$props,$state:this.$state};t.remote=new tx(void 0),t.remote.setPlayer(this),t.$iosControls=(0,o.T)(this.Wb.bind(this)),t.textTracks=new TextTrackList,t.textTracks[tb.ab]=this.$state.crossorigin,t.textRenderers=new eh(t),t.ariaKeys={},this.Ba=t,(0,o.Z)(te,t),this.orientation=new G,new ia,new eR(t);let e=new e2;this.Nb=new e9(e,t),this.Mb=new e5(this.Nb,e,t),t.delegate=new eZ(this.Nb.gc.bind(this.Nb),t),new eY(this.startLoading.bind(this))}get Lb(){return this.Ba.$provider()}onSetup(){this.Xb(),(0,o.e)(this.Yb.bind(this)),(0,o.e)(this.Zb.bind(this)),(0,o.e)(this.ka.bind(this)),(0,o.e)(this._b.bind(this)),(0,o.e)(this.$b.bind(this)),(0,o.e)(this.ac.bind(this)),(0,o.e)(this.bc.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),t7(t,"tabindex","0"),t7(t,"role","region"),R?this.Ob():(0,o.e)(this.Ob.bind(this)),R?this.Pb():(0,o.e)(this.Pb.bind(this)),(0,o.l)(t,"find-media-player",this.cc.bind(this))}onConnect(t){N&&(0,o.n)(t,"data-iphone",""),K().then(this.$state.canSetVolume.set);let e=window.matchMedia("(pointer: coarse)");this.Qb(e),e.onchange=this.Qb.bind(this);let i=new ResizeObserver((0,o._)(this.Fb.bind(this)));i.observe(t),(0,o.e)(this.Fb.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),(0,o.o)(()=>{i.disconnect(),e.onchange=null})}onDestroy(){this.Ba.player=null,this.canPlayQueue.j()}Ob(){let{title:t,providedTitle:e,live:i,viewType:s}=this.$state,r=i(),n=(0,o.$)(s()),a="Unknown"!==n?`${r?"Live ":""}${n}`:r?"Live":"Media";this.el?.setAttribute("data-title",e());let h=t();(0,o.n)(this.el,"aria-label",h?`${a} - ${h}`:a+" Player"),this.el?.removeAttribute("title")}Pb(){let t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),(0,o.n)(this.el,"data-orientation",t),this.Fb()}Yb(){this.$state.canPlay()&&this.Lb?this.canPlayQueue.hc():this.canPlayQueue.ic()}Xb(){if(t[eJ]){this.setAttributes(t[eJ]);return}let e={"data-captions":function(){let t=this.$state.textTrack();return!!t&&tw(t)},"data-ios-controls":function(){return this.Ba.$iosControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canPlay:t,waiting:e}=this.$state;return!t()||e()},"data-error":function(){let{error:t}=this.$state;return!!t()},"data-autoplay-error":function(){let{autoplayError:t}=this.$state;return!!t()}},i={canPictureInPicture:"can-pip",pictureInPicture:"pip"};for(let t of eX){let s="data-"+(i[t]??(0,o.c)(t));e[s]=function(){return this.$state[t]()}}delete e.title,t[eJ]=e,this.setAttributes(e)}cc(t){t.detail(this)}Fb(){if(R||!this.el)return;let t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),(0,o.Q)(this.el,"--player-width",t+"px"),(0,o.Q)(this.el,"--player-height",e+"px")}Qb(t){if(R)return;let e=t.matches?"coarse":"fine";(0,o.n)(this.el,"data-pointer",e),this.$state.pointer.set(e),this.Fb()}Wb(){let{playsinline:t,fullscreen:e}=this.$state;return N&&!O&&"video"===this.$state.mediaType()&&(!t()||e())}get provider(){return this.Lb}get controls(){return this.Mb.jc}get qualities(){return this.Ba.qualities}get audioTracks(){return this.Ba.audioTracks}get textTracks(){return this.Ba.textTracks}get textRenderers(){return this.Ba.textRenderers}get paused(){return this.Lb?.paused??!0}set paused(t){this.Rb(t)}ka(){this.Rb(this.$props.paused())}Rb(t){t?this.canPlayQueue.sa("paused",()=>this.Mb.dc()):this.canPlayQueue.sa("paused",()=>this.Mb.ec())}get muted(){return this.Lb?.muted??!1}set muted(t){this.Sb(t)}Zb(){this.Sb(this.$props.muted())}Sb(t){this.canPlayQueue.sa("muted",()=>this.Lb.muted=t)}get currentTime(){return this.Lb?.currentTime??0}set currentTime(t){this.Tb(t)}$b(){this.Tb(this.$props.currentTime())}Tb(t){this.canPlayQueue.sa("currentTime",()=>{let e=this.Lb;t!==e.currentTime&&(0,o.p)(()=>{let i=Math.min(Math.max(this.$state.seekableStart()+.1,t),this.$state.seekableEnd()-.1);Number.isFinite(i)&&(e.currentTime=i)})})}get volume(){return this.Lb?.volume??1}set volume(t){this.Ub(t)}_b(){this.Ub(this.$props.volume())}Ub(t){let e=is(0,t,1);this.canPlayQueue.sa("volume",()=>this.Lb.volume=e)}get playbackRate(){return this.Lb?.playbackRate??1}set playbackRate(t){this.Vb(t)}bc(){this.Vb(this.$props.playbackRate())}Vb(t){this.canPlayQueue.sa("rate",()=>this.Lb.playbackRate=t)}ac(){this.fc(this.$props.playsinline())}fc(t){this.canPlayQueue.sa("playsinline",()=>this.Lb.playsinline=t)}async play(t){return this.Mb.ec(t)}async pause(t){return this.Mb.dc(t)}async enterFullscreen(t,e){return this.Mb.kc(t,e)}async exitFullscreen(t,e){return this.Mb.lc(t,e)}enterPictureInPicture(t){return this.Mb.mc(t)}exitPictureInPicture(t){return this.Mb.nc(t)}seekToLiveEdge(t){this.Mb.oc(t)}startLoading(t){this.Ba.delegate.Kb("can-load",void 0,t)}matchQuery(t){return(0,o.k)(()=>ey.create(t),this.scope)}destroy(){this.Ba.remote.setPlayer(null),this.dispatch("destroy")}};ip.props={autoplay:!1,controls:!1,currentTime:0,crossorigin:null,fullscreenOrientation:"landscape",load:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",controlsDelay:2e3,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:eq,title:""},ip.state=Y,id([o.a0],ip.prototype,"canPlayQueue",2),id([o.a0],ip.prototype,"provider",1),id([o.a0],ip.prototype,"controls",1),id([o.a0],ip.prototype,"orientation",2),id([o.a0],ip.prototype,"qualities",1),id([o.a0],ip.prototype,"audioTracks",1),id([o.a0],ip.prototype,"textTracks",1),id([o.a0],ip.prototype,"textRenderers",1),id([o.a0],ip.prototype,"paused",1),id([o.a0],ip.prototype,"muted",1),id([o.a0],ip.prototype,"currentTime",1),id([o.a0],ip.prototype,"volume",1),id([o.a0],ip.prototype,"playbackRate",1),id([o.a1],ip.prototype,"play",1),id([o.a1],ip.prototype,"pause",1),id([o.a1],ip.prototype,"enterFullscreen",1),id([o.a1],ip.prototype,"exitFullscreen",1),id([o.a1],ip.prototype,"enterPictureInPicture",1),id([o.a1],ip.prototype,"exitPictureInPicture",1),id([o.a1],ip.prototype,"seekToLiveEdge",1),id([o.a1],ip.prototype,"startLoading",1),id([o.a1],ip.prototype,"matchQuery",1);let ib=ip,ig=Symbol(0),im=new Map;class iy{constructor(t,e,i){this.Db=t,this.Ba=e,this.Bb=i,this.Og=!1;let s=new ez,r=new eU,n=new eK,a=new eQ;this.Pg=(0,o.T)(()=>e.$props.preferNativeHLS()?[r,n,s,a]:[s,r,n,a]);let{$state:h}=e;for(let t of(h.sources.set(iv(e.$props.src())),h.sources())){let e=this.Pg().find(e=>e.canPlay(t));if(!e)continue;let i=e.mediaType(t);this.Ba.$state.source.set(t),this.Ba.$state.mediaType.set(i),this.Ba.$state.inferredViewType.set(i),this.Bb.set(e),this.Og=!0}}get Kb(){return this.Ba.delegate.Kb}connect(){let t=this.Bb();this.Og&&(this.Qg(this.Ba.$state.source(),t),this.Rg(t),this.Og=!1),(0,o.e)(this.Tg.bind(this)),(0,o.e)(this.Ug.bind(this)),(0,o.e)(this.Vg.bind(this)),(0,o.e)(this.Wg.bind(this))}Tg(){this.Kb("sources-change",[...iv(this.Ba.$props.src()),...this.Db()])}Ug(){let{$state:t}=this.Ba,e=t.sources(),i=(0,o.p)(t.source),s=this.Sg(i,e),r=e[0]?.src&&!s.src&&!s.type;if(r){let{crossorigin:i}=t,s=th(i()),r=new AbortController;return Promise.all(e.map(t=>(0,o.a)(t.src)&&"?"===t.type?fetch(t.src,{method:"HEAD",credentials:s,signal:r.signal}).then(e=>(t.type=e.headers.get("content-type")||"??",im.set(t.src,t.type),t)).catch(()=>t):t)).then(e=>{r.signal.aborted||(this.Sg((0,o.p)(t.source),e),(0,o.K)())}),()=>r.abort()}(0,o.K)()}Sg(t,e){let i={src:"",type:""},s=null;for(let t of e){let e=(0,o.p)(this.Pg).find(e=>e.canPlay(t));e&&(i=t,s=e)}return iw(t,i)||this.Qg(i,s),s!==(0,o.p)(this.Bb)&&this.Rg(s),i}Qg(t,e){this.Kb("source-change",t),this.Kb("media-type-change",e?.mediaType(t)||"unknown")}Rg(t){this.Kb("provider-change",null),t&&(0,o.p)(()=>t.preconnect?.(this.Ba)),this.Bb.set(t),this.Kb("provider-loader-change",t)}Vg(){let t=this.Ba.$provider();if(t&&!t[ig]){if(this.Ba.$state.canLoad()){(0,o.k)(()=>t.setup(this.Ba),t.scope),t[ig]=!0;return}(0,o.p)(()=>t.preconnect?.(this.Ba))}}Wg(){let t=this.Ba.$provider(),e=this.Ba.$state.source(),i=(0,o.p)(this.Ba.$state.crossorigin);if(!iw(t?.currentSrc,e)){if(this.Ba.$state.canLoad()){let s=new AbortController;return eH(e)?U()||(function t(e,i){return fetch(e,i).then(t=>t.text()).then(s=>{let r=function(t){let e=t.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split("\n")[1].trim():null}(s);if(r)return t(/^https?:/.test(r)?r:new URL(r,e).href,i);let n=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(s)?"on-demand":"live";return"live"===n&&function(t){let e=t.split("\n");for(let t of e)if(t.startsWith("#EXT-X-TARGETDURATION")){let e=parseFloat(t.split(":")[1]);if(!isNaN(e))return e}return -1}(s)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(s)||s.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":n})})(e.src,{credentials:th(i),signal:s.signal}).then(t=>{this.Kb("stream-type-change",t)}).catch(o.a2):this.Kb("stream-type-change","on-demand"),(0,o.p)(()=>t?.loadSource(e,o.p(this.Ba.$state.preload))),()=>s.abort()}try{(0,o.a)(e.src)&&tr(new URL(e.src).origin,"preconnect")}catch(t){}}}}function iv(t){return((0,o.J)(t)?t:[!(0,o.a)(t)&&"src"in t?t:{src:t}]).map(({src:t,type:e})=>({src:t,type:e??((0,o.a)(t)?im.get(t):null)??(!(0,o.a)(t)||t.startsWith("blob:")?"video/object":t.includes("youtube")?"video/youtube":t.includes("vimeo")?"video/vimeo":"?")}))}function iw(t,e){return t?.src===e?.src&&t?.type===e?.type}class i${constructor(t,e){this.Eb=t,this.Ba=e,this.Mg=[],(0,o.e)(this.Ng.bind(this))}Ng(){let t=this.Eb();for(let e of this.Mg)if(!t.some(t=>t.id===e.id)){let t=e.id&&this.Ba.textTracks.getById(e.id);t&&this.Ba.textTracks.remove(t)}for(let e of t){let t=e.id||TextTrack.createId(e);this.Ba.textTracks.getById(t)||(e.id=t,this.Ba.textTracks.add(e))}this.Mg=t}}var ix=Object.defineProperty,ik=Object.getOwnPropertyDescriptor;class iT extends o.O{constructor(){super(...arguments),this.Db=(0,o.s)([]),this.Eb=(0,o.s)([]),this.Bb=null,this.Cb=-1}onSetup(){this.Ba=ti(),this.Ib=new iy(this.Db,this.Ba,this.$state.loader)}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.Ib.connect(),new i$(this.Eb,this.Ba);let e=new ResizeObserver((0,o._)(this.Fb.bind(this)));e.observe(t);let i=new MutationObserver(this.Gb.bind(this));i.observe(t,{attributes:!0,childList:!0}),this.Fb(),this.Gb(),(0,o.o)(()=>{e.disconnect(),i.disconnect()})}load(t){window.cancelAnimationFrame(this.Cb),this.Cb=requestAnimationFrame(()=>this.Jb(t)),(0,o.o)(()=>{window.cancelAnimationFrame(this.Cb)})}Jb(t){if(!this.scope)return;let e=this.$state.loader(),{$provider:i}=this.Ba;!(this.Bb===e&&e?.target===t&&(0,o.p)(i))&&(this.Hb(),this.Bb=e,e&&(e.target=t||null),e&&t&&e.load(this.Ba).then(t=>{this.scope&&(0,o.p)(this.$state.loader)===e&&(t&&(0,o.p)(()=>{let{muted:e,volume:i,playsinline:s}=this.Ba.$state;t.muted=e(),t.volume=i(),t.playsinline=s()}),this.Ba.delegate.Kb("provider-change",t))}))}onDestroy(){this.Bb=null,this.Hb()}Hb(){this.Ba.delegate.Kb("provider-change",null)}Fb(){if(!this.el)return;let t=this.Ba.player,e=this.el.offsetWidth,i=this.el.offsetHeight;t&&(t.$state.mediaWidth.set(e),t.$state.mediaHeight.set(i),t.el&&((0,o.Q)(t.el,"--media-width",e+"px"),(0,o.Q)(t.el,"--media-height",i+"px")))}Gb(){let t=[],e=[],i=this.el.children;for(let s of i)s instanceof HTMLSourceElement?t.push({src:s.src,type:s.type}):s instanceof HTMLTrackElement&&e.push({id:s.id,src:s.src,kind:s.track.kind,language:s.srclang,label:s.label,default:s.default,type:s.getAttribute("data-type")});this.Db.set(t),this.Eb.set(e),(0,o.K)()}}iT.state=new o.S({loader:null}),((t,e,i,s)=>{for(var r,n=s>1?void 0:s?ik(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&ix(e,i,n)})([o.a1],iT.prototype,"load",1);class iE extends o.O{onSetup(){this.Ba=ti(),(0,o.e)(this.qc.bind(this))}onAttach(t){let{pictureInPicture:e,fullscreen:i}=this.Ba.$state;(0,o.Q)(t,"pointer-events","none"),t7(t,"role","group"),this.setAttributes({"data-visible":this.pc.bind(this),"data-fullscreen":i,"data-pip":e}),(0,o.e)(()=>{this.dispatch("change",{detail:this.pc()})}),(0,o.e)(this.rc.bind(this)),(0,o.e)(()=>{let e=i();for(let i of["top","right","bottom","left"])(0,o.Q)(t,`padding-${i}`,e&&`env(safe-area-inset-${i})`)})}rc(){if(!this.el)return;let{$iosControls:t}=this.Ba,{controls:e}=this.Ba.$state,i=e()||t();(0,o.n)(this.el,"aria-hidden",i?"true":null),(0,o.Q)(this.el,"display",i?"none":null)}qc(){let{controls:t}=this.Ba.player,{hideDelay:e}=this.$props;t.defaultDelay=2e3===e()?this.Ba.$props.controlsDelay():e()}pc(){let{controlsVisible:t}=this.Ba.$state;return t()}}iE.props={hideDelay:2e3};class iP extends o.O{onAttach(t){(0,o.Q)(t,"pointer-events","auto")}}class iB extends o.V{constructor(t){super(),this.Vc=t,this.ii=-1,this.ji=-1,this.hi=null,(0,o.e)(this.ki.bind(this))}onDestroy(){this.hi?.(),this.hi=null}ki(){let t=this.Vc.sc();if(!t){this.hide();return}let e=this.show.bind(this),i=this.hide.bind(this);this.Vc.Bc(t,e,i)}show(t){window.cancelAnimationFrame(this.ji),this.ji=-1,this.hi?.(),this.hi=null,this.ii=window.setTimeout(()=>{this.ii=-1;let e=this.Vc.tc();e&&e.style.removeProperty("display"),(0,o.p)(()=>this.Vc.ja(!0,t))},this.Vc.Ac?.()??0)}hide(t){window.clearTimeout(this.ii),this.ii=-1,(0,o.p)(()=>this.Vc.ja(!1,t)),this.ji=requestAnimationFrame(()=>{this.ji=-1;let t=this.Vc.tc();if(t){let e=function(t){let e=getComputedStyle(t);return"none"!==e.animationName}(t),i=()=>{t.style.display="none",this.hi=null};if(e){this.hi?.();let e=(0,o.l)(t,"animationend",i,{once:!0});this.hi=e}else i()}})}}let iS=(0,o.L)(),iO=0;class iA extends o.O{constructor(){super(),this.uc=`media-tooltip-${++iO}`,this.sc=(0,o.s)(null),this.tc=(0,o.s)(null),new ia;let{showDelay:t}=this.$props;new iB({sc:this.sc,tc:this.tc,Ac:t,Bc(t,e,i){(0,o.l)(t,"touchstart",t=>t.preventDefault(),{passive:!1}),(0,o.l)(t,"focus",e),(0,o.l)(t,"blur",i),(0,o.l)(t,"mouseenter",e),(0,o.l)(t,"mouseleave",i)},ja:this.zc.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onSetup(){(0,o.Z)(iS,{sc:this.sc,tc:this.tc,vc:this.vc.bind(this),wc:this.wc.bind(this),xc:this.xc.bind(this),yc:this.yc.bind(this)})}vc(t){this.sc.set(t);let e=t.getAttribute("data-media-tooltip");e&&this.el?.setAttribute(`data-media-${e}-tooltip`,""),(0,o.n)(t,"data-describedby",this.uc)}wc(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.sc.set(null)}xc(t){t.setAttribute("id",this.uc),t.style.display="none",t7(t,"role","tooltip"),this.tc.set(t)}yc(t){t.removeAttribute("id"),t.removeAttribute("role"),this.tc.set(null)}zc(t){let e=this.sc(),i=this.tc();for(let s of(e&&(0,o.n)(e,"aria-describedby",t?this.uc:null),[this.el,e,i]))s&&(0,o.n)(s,"data-visible",t)}}iA.props={showDelay:500};class iq extends o.O{constructor(){super(),new ia}onConnect(t){(0,o.o)(ei(()=>{if(!this.connectScope)return;this.O();let t=(0,o.M)(iS);(0,o.o)(()=>{let e=this.Cc();e&&t.wc(e)})}))}O(){let t=this.Cc(),e=(0,o.M)(iS);t&&e.vc(t)}Cc(){let t=this.el.firstElementChild;return t?.localName==="button"||t?.getAttribute("role")==="button"?t:this.el}}class iC extends o.O{constructor(){super(),new ia;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){this.O(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.O(t);let e=(0,o.M)(iS);(0,o.o)(()=>e.yc(t)),(0,o.o)(ei(()=>{this.connectScope&&(0,o.e)(this.Dc.bind(this))}))}O(t){let e=(0,o.M)(iS);e.xc(t)}Dc(){let{placement:t,offset:e,alignOffset:i}=this.$props;return es(this.el,this.Ec(),t(),{offsetVarName:"media-tooltip",xOffset:i(),yOffset:e()})}Ec(){return(0,o.M)(iS).sc()}}iC.props={placement:"top center",offset:0,alignOffset:0};class iM extends o.V{constructor(t){super(),this.Vc=t,new ia,t.Jc&&new ej(t.Jc)}onSetup(){let{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.Vc.Gc,"aria-pressed":this.li.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){t7(t,"tabindex","0"),t7(t,"role","button"),t7(t,"type","button")}onConnect(t){et(t,this.mi.bind(this))}li(){return(0,o.a3)(this.Vc.Gc())}ni(t){(0,o.a4)(this.Vc.Gc)&&this.Vc.Gc.set(t=>!t)}mi(t){let e=this.$props.disabled()||this.el.hasAttribute("data-disabled");if(e){t.stopImmediatePropagation();return}t.preventDefault(),(this.Vc.Hc??this.ni).call(this,t)}}iM.props={disabled:!1};var iR=Object.defineProperty,iL=Object.getOwnPropertyDescriptor;class ij extends o.O{constructor(){super(),this.Fc=(0,o.s)(!1),new iM({Gc:this.Fc})}get pressed(){return this.Fc()}}ij.props={disabled:!1,defaultPressed:!1},((t,e,i,s)=>{for(var r,n=s>1?void 0:s?iL(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&iR(e,i,n)})([o.a0],ij.prototype,"pressed",1);let iN=class extends o.O{constructor(){super(),new iM({Gc:this.Gc.bind(this),Jc:"togglePaused",Hc:this.Hc.bind(this)})}onSetup(){this.Ba=ti();let{paused:t,ended:e}=this.Ba.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),t8(t,this.Ic.bind(this))}Hc(t){let e=this.Ba.remote;this.Gc()?e.pause(t):e.play(t)}Gc(){let{paused:t}=this.Ba.$state;return!t()}Ic(){let{paused:t}=this.Ba.$state;return t()?"Play":"Pause"}};function iF(t){return()=>t()?"true":"false"}iN.props=iM.props;let iV=class extends o.O{constructor(){super(),new iM({Gc:this.Gc.bind(this),Jc:"toggleCaptions",Hc:this.Hc.bind(this)})}onSetup(){this.Ba=ti(),this.setAttributes({"data-active":this.Gc.bind(this),"data-supported":()=>!this.Kc(),"aria-hidden":iF(this.Kc.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),t8(t,this.Ic.bind(this))}Hc(t){this.Ba.remote.toggleCaptions(t)}Gc(){let{textTrack:t}=this.Ba.$state,e=t();return!!e&&tw(e)}Kc(){let{textTracks:t}=this.Ba.$state;return 0==t().filter(tw).length}Ic(){let{textTrack:t}=this.Ba.$state;return t()?"Closed-Captions Off":"Closed-Captions On"}};iV.props=iM.props;let i_=class extends o.O{constructor(){super(),new iM({Gc:this.Gc.bind(this),Jc:"toggleFullscreen",Hc:this.Hc.bind(this)})}onSetup(){this.Ba=ti();let{fullscreen:t}=this.Ba.$state,e=this.Lc.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":iF(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),t8(t,this.Ic.bind(this))}Hc(t){let e=this.Ba.remote,i=this.$props.target();this.Gc()?e.exitFullscreen(i,t):e.enterFullscreen(i,t)}Gc(){let{fullscreen:t}=this.Ba.$state;return t()}Lc(){let{canFullscreen:t}=this.Ba.$state;return t()}Ic(){let{fullscreen:t}=this.Ba.$state;return t()?"Exit Fullscreen":"Enter Fullscreen"}};i_.props={...iM.props,target:"prefer-media"};let iI=class extends o.O{constructor(){super(),new iM({Gc:this.Gc.bind(this),Jc:"toggleMuted",Hc:this.Hc.bind(this)})}onSetup(){this.Ba=ti(),this.setAttributes({"data-muted":this.Gc.bind(this),"data-state":this.Mc.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),t8(t,this.Ic.bind(this))}Hc(t){let e=this.Ba.remote;this.Gc()?e.unmute(t):e.mute(t)}Gc(){let{muted:t,volume:e}=this.Ba.$state;return t()||0===e()}Ic(){return this.Gc()?"Unmute":"Mute"}Mc(){let{muted:t,volume:e}=this.Ba.$state,i=e();return t()||0===i?"muted":i>=.5?"high":i<.5?"low":void 0}};iI.props=iM.props;let iD=class extends o.O{constructor(){super(),new iM({Gc:this.Gc.bind(this),Jc:"togglePictureInPicture",Hc:this.Hc.bind(this)})}onSetup(){this.Ba=ti();let{pictureInPicture:t}=this.Ba.$state,e=this.Lc.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":iF(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),t8(t,this.Ic.bind(this))}Hc(t){let e=this.Ba.remote;this.Gc()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}Gc(){let{pictureInPicture:t}=this.Ba.$state;return t()}Lc(){let{canPictureInPicture:t}=this.Ba.$state;return t()}Ic(){let{pictureInPicture:t}=this.Ba.$state;return t()?"Exit Picture In Picture":"Enter Picture In Picture"}};iD.props=iM.props;let iH=class extends o.O{constructor(){super(),new ia}onSetup(){this.Ba=ti();let{seeking:t}=this.Ba.$state,{seconds:e}=this.$props,i=this.Lc.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":i,"aria-hidden":iF(()=>!i())})}onAttach(t){t7(t,"tabindex","0"),t7(t,"role","button"),t7(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),t8(t,this.Ic.bind(this))}onConnect(t){et(t,this.Hc.bind(this))}Lc(){let{canSeek:t}=this.Ba.$state;return t()}Ic(){let{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}Hc(t){let{seconds:e,disabled:i}=this.$props;if(i())return;let{currentTime:s}=this.Ba.$state,r=s()+e();this.Ba.remote.seek(r,t)}};iH.props={disabled:!1,seconds:30};let iW=class extends o.O{constructor(){super(),new ia}onSetup(){this.Ba=ti();let{disabled:t}=this.$props,{live:e,liveEdge:i}=this.Ba.$state,s=()=>!e();this.setAttributes({"data-edge":i,"data-hidden":s,"aria-disabled":iF(()=>t()||i()),"aria-hidden":iF(s)})}onAttach(t){t7(t,"tabindex","0"),t7(t,"role","button"),t7(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){et(t,this.Hc.bind(this))}Hc(t){let{disabled:e}=this.$props,{liveEdge:i}=this.Ba.$state;e()||i()||this.Ba.remote.seekToLiveEdge(t)}};iW.props={disabled:!1};let iK=new o.S({min:0,max:100,value:0,pointerValue:0,focused:!1,dragging:!1,pointing:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return iU(this.min,this.max,this.value)},get fillPercent(){return 100*this.fillRate},get pointerRate(){return iU(this.min,this.max,this.pointerValue)},get pointerPercent(){return 100*this.pointerRate}});function iU(t,e,i){let s=e-t;return s>0?(i-t)/s:0}let iQ={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class iG extends o.V{constructor(t,e){super(),this.Vc=t,this.Ba=e,this.Lb=null,this.oi=null,this.qi=null,this.xi=e7(t=>{this.pi(this.ri(t),t)},20,{leading:!0})}onConnect(){if((0,o.e)(this.yi.bind(this)),(0,o.e)(this.zi.bind(this)),this.Vc.Id){let t=this.Ba.player.el?.querySelector("media-provider,[data-media-provider]");t&&(this.Lb=t,(0,o.l)(t,"touchstart",this.Ai.bind(this),{passive:!0}),(0,o.l)(t,"touchmove",this.Bi.bind(this),{passive:!1}))}}Ai(t){this.oi=t.touches[0]}Bi(t){if((0,o.N)(this.oi)||ee(t))return;let e=t.touches[0],i=e.clientX-this.oi.clientX,s=e.clientY-this.oi.clientY,r=this.$state.dragging();!(!r&&Math.abs(s)>20)&&!r&&Math.abs(i)>20&&(this.oi=e,this.qi=this.$state.value(),this.si(this.qi,t))}yi(){this.Vc.Uc()||(this.listen("focus",this._h.bind(this)),this.listen("pointerenter",this.Yh.bind(this)),this.listen("pointermove",this.Ci.bind(this)),this.listen("pointerleave",this.Zh.bind(this)),this.listen("pointerdown",this.Di.bind(this)),this.listen("keydown",this.wb.bind(this)),this.listen("keyup",this.vb.bind(this)))}zi(){!this.Vc.Uc()&&this.$state.dragging()&&((0,o.l)(document,"pointerup",this.Ei.bind(this)),(0,o.l)(document,"pointermove",this.xi.bind(this)),V&&(0,o.l)(document,"touchmove",this.Fi.bind(this),{passive:!1}))}_h(){this.pi(this.$state.value())}ti(t,e){let{value:i,min:s,max:r,dragging:n}=this.$state,a=Math.max(s(),Math.min(t,r()));i.set(a);let h=this.createEvent("value-change",{detail:a,trigger:e});if(this.dispatch(h),this.Vc.sd?.(h),n()){let t=this.createEvent("drag-value-change",{detail:a,trigger:e});this.dispatch(t),this.Vc.rd?.(t)}}pi(t,e){let{pointerValue:i,dragging:s}=this.$state;i.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),s()&&this.ti(t,e)}ri(t){let e,i=this.el.getBoundingClientRect(),{min:s,max:r}=this.$state;if("vertical"===this.$props.orientation()){let{bottom:s,height:r}=i;e=(s-t.clientY)/r}else if(this.oi&&(0,o.h)(this.qi)){let{width:i}=this.Lb.getBoundingClientRect(),n=(t.clientX-this.oi.clientX)/i,a=r()-s(),h=a*Math.abs(n);e=(n<0?this.qi-h:this.qi+h)/a}else{let{left:s,width:r}=i;e=(t.clientX-s)/r}return Math.max(s(),Math.min(r(),this.Vc.Tc(function(t,e,i,s){let r=is(0,i,1);return t+s*((e-t)*r/s)}(s(),r(),e,this.Vc.Rc()))))}Yh(t){this.$state.pointing.set(!0)}Ci(t){let{dragging:e}=this.$state;e()||this.pi(this.ri(t),t)}Zh(t){this.$state.pointing.set(!1)}Di(t){if(0!==t.button)return;let e=this.ri(t);this.si(e,t),this.pi(e,t)}si(t,e){let{dragging:i}=this.$state;if(i())return;i.set(!0),this.Ba.remote.pauseControls(e);let s=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(s),this.Vc.yd?.(s)}ui(t,e){let{dragging:i}=this.$state;if(!i())return;i.set(!1),this.Ba.remote.resumeControls(e);let s=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(s),this.Vc.wd?.(s),this.oi=null,this.qi=null}wb(t){let e;let{key:i}=t,{min:s,max:r}=this.$state;if("Home"===i||"PageUp"===i?e=s():"End"===i||"PageDown"===i?e=r():!t.metaKey&&/[0-9]/.test(i)&&(e=(r()-s())/10*Number(i)),!(0,o.i)(e)){this.pi(e,t),this.ti(e,t);return}let n=this.vi(t);if((0,o.i)(n))return;let a=i===this.wi;!this.$state.dragging()&&a&&this.si(n,t),this.pi(n,t),a||this.ti(n,t),this.wi=i}vb(t){this.wi="";let{dragging:e,value:i}=this.$state;if(!e())return;let s=this.vi(t)??i();this.pi(s),this.ui(s,t)}vi(t){let{key:e,shiftKey:i}=t,s=Object.keys(iQ).includes(e);if(!s)return;t.preventDefault(),t.stopPropagation();let{shiftKeyMultiplier:r}=this.$props,{value:n,min:a,max:h}=this.$state,l=this.Vc.Rc(),o=this.Vc.Sc(),u=i?o*r():o,c=Number(iQ[e]),d=(n()+u*c)/l;return Math.max(a(),Math.min(h(),Number((l*d).toFixed(3))))}Ei(t){if(0!==t.button)return;let e=this.ri(t);this.pi(e,t),this.ui(e,t)}Fi(t){t.preventDefault()}}let iz=(0,o.L)(()=>({})),iJ=(0,o.L)();class iX extends o.V{constructor(t){super(),this.Vc=t,this.Xc=(0,o._)((t,e)=>{this.el?.style.setProperty("--slider-fill",t+"%"),this.el?.style.setProperty("--slider-pointer",e+"%")})}onSetup(){this.Ba=ti();let t=new ia;t.attach(this),this.$state.focused=t.focused.bind(t),(0,o.a5)(iz)||(0,o.Z)(iz,{default:"value"}),(0,o.Z)(iJ,{$c:this.$props.orientation,ad:this.Vc.Uc,bd:(0,o.s)(null)}),(0,o.e)(this.Pc.bind(this)),(0,o.e)(this.Yc.bind(this)),this.Zc(),new iG(this.Vc,this.Ba).attach(this)}onAttach(t){t7(t,"role","slider"),t7(t,"tabindex","0"),t7(t,"autocomplete","off"),R?this.Wc():(0,o.e)(this.Wc.bind(this))}Pc(){let{dragging:t,value:e,min:i,max:s}=this.$state;if(!(0,o.p)(t)){var r,n;e.set((r=i(),n=s(),is(r,ie(e(),ii(this.Vc.Rc())),n)))}}Yc(){if(!this.Vc.Uc())return;let{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}_c(){return(0,o.a3)(this.Vc.Uc())}Zc(){let{orientation:t}=this.$props,{dragging:e,active:i,pointing:s}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":s,"data-active":i,"aria-disabled":this._c.bind(this),"aria-valuemin":this.$state.min,"aria-valuemax":this.$state.max,"aria-valuenow":this.Vc.Nc,"aria-valuetext":this.Vc.Oc,"aria-orientation":t})}Wc(){let{fillPercent:t,pointerPercent:e}=this.$state;this.Xc(ie(t(),3),ie(e(),3))}}iX.props={disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};class iY extends o.O{constructor(){super(),new iX({Rc:this.$props.step,Sc:this.$props.keyStep,Tc:Math.round,Uc:this.$props.disabled,Nc:this.Nc.bind(this),Oc:this.Oc.bind(this)})}onSetup(){(0,o.e)(this.Pc.bind(this)),(0,o.e)(this.Qc.bind(this))}Nc(){let{value:t}=this.$state;return Math.round(t())}Oc(){let{value:t,max:e}=this.$state;return ie(t()/e()*100,2)+"%"}Pc(){let{value:t}=this.$props;this.$state.value.set(t())}Qc(){let{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}}iY.props={...iX.props,min:0,max:100,value:0},iY.state=iK;let iZ=new Map,i0=new Set,i1=new Set;class i2{constructor(t,e){this.$src=t,this.Ba=e,this.$cues=(0,o.s)([]),(0,o.e)(this.Yf.bind(this)),i1.add(this),(0,o.o)(()=>i1.delete(this))}static create(t){let e=ti();return new i2(t,e)}Yf(){let{canLoad:t}=this.Ba.$state;if(!t())return;let e=new AbortController,{crossorigin:s}=this.Ba.$state,r=this.$src();if(r){if(iZ.has(r)){let t=iZ.get(r);if(iZ.delete(r),iZ.set(r,t),iZ.size>30){let t=iZ.keys().next().value;iZ.delete(t)}this.$cues.set(iZ.get(r))}else i0.has(r)||(i0.add(r),i.e(562).then(i.bind(i,6562)).then(async({parseResponse:t})=>{try{let i=await fetch(r,{signal:e.signal,credentials:th(s())}),n="application/json"===i.headers.get("content-type");if(n){try{let{cues:t}=t$(await i.text(),window.VTTCue);this.Xf(r,t)}catch(t){}return}let{cues:a}=await t(i);this.Xf(r,a)}catch(t){}}));return()=>{e.abort(),this.$cues.set([])}}}Xf(t,e){for(let i of(this.$cues.set(e),i1))(0,o.p)(i.$src)===t&&i.$cues.set(e);iZ.set(t,e),i0.delete(t)}}let i5=class extends o.O{constructor(){super(...arguments),this.Nf=[],this.Of=(0,o._)(this.Qf.bind(this))}onSetup(){this.Ba=ti(),this.Pf=i2.create(this.$props.src),this.setAttributes({"data-loading":this.gd.bind(this),"data-error":this.ed.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":iF(this.$state.hidden)})}onConnect(t){(0,o.e)(this.Hf.bind(this)),(0,o.e)(this.jd.bind(this)),(0,o.e)(this.If.bind(this)),(0,o.e)(this.Rf.bind(this)),(0,o.e)(this.Sf.bind(this))}Hf(){let t=this.$state.img();t&&((0,o.l)(t,"load",this.Tf.bind(this)),(0,o.l)(t,"error",this.md.bind(this)))}If(){let{src:t,loading:e,error:i}=this.$state;t(),e.set(!0),i.set(null)}Tf(){let{loading:t,error:e}=this.$state;t.set(!1),e.set(null),this.Of()}md(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}gd(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}ed(){let{error:t}=this.$state;return!(0,o.N)(t())}jd(){let{hidden:t}=this.$state,{duration:e}=this.Ba.$state,i=this.Pf.$cues();t.set(this.ed()||!Number.isFinite(e())||0===i.length)}dd(){return this.$props.time()}Rf(){let t=this.dd(),{activeCue:e}=this.$state,{duration:i}=this.Ba.$state,s=this.Pf.$cues();if(!s||!Number.isFinite(i())){e.set(null);return}e.set(tg(s,t))}Sf(){let{activeCue:t}=this.$state,e=t(),i=(0,o.p)(this.$props.src);if(/^https?:/.test(i)||(i=location.href),!i||!e){this.$state.src.set(""),this.Uf();return}let[s,r=""]=(e.text||"").split("#");this.$state.coords.set(this.Vf(r)),this.$state.src.set(this.Wf(s,i)),this.Of()}Wf(t,e){return/^https?:/.test(t)?t:new URL(t,e).href}Vf(t){let[e,i]=t.split("="),s={},r=i?.split(",");if(!e||!i)return null;for(let t=0;t<e.length;t++)s[e[t]]=+r[t];return s}Qf(){if(!this.scope)return;let t=this.$state.img(),e=this.$state.coords();if(!t||!this.el)return;let i=e?.w??t.naturalWidth,s=e?.h??t.naturalHeight,{maxWidth:r,maxHeight:n,minWidth:a,minHeight:h}=getComputedStyle(this.el),l=Math.max(parseInt(a)/i,parseInt(h)/s),o=Math.min(parseInt(r)/i,parseInt(n)/s),u=o<1?o:l>1?l:1;this.Mf(this.el,"--thumbnail-width",`${i*u}px`),this.Mf(this.el,"--thumbnail-height",`${s*u}px`),this.Mf(t,"width",`${t.naturalWidth*u}px`),this.Mf(t,"height",`${t.naturalHeight*u}px`),this.Mf(t,"transform",e?`translate(-${e.x*u}px, -${e.y*u}px)`:""),this.Mf(t,"max-width","none")}Mf(t,e,i){t.style.setProperty(e,i),this.Nf.push(()=>t.style.removeProperty(e))}Uf(){for(let t of this.Nf)t();this.Nf=[]}};i5.props={src:"",time:0},i5.state=new o.S({src:"",img:null,coords:null,activeCue:null,loading:!1,error:null,hidden:!1});class i3 extends i5{onAttach(t){this.cd=(0,o.a6)(iY.state)}dd(){let{duration:t}=this.Ba.$state;return this.cd.pointerRate()*t()}}var i6=Object.defineProperty,i4=Object.getOwnPropertyDescriptor;class i7 extends o.O{get video(){return this.$state.video()}onSetup(){this.Ba=ti(),this.cd=(0,o.a6)(iY.state),this.setAttributes({"data-loading":this.gd.bind(this),"data-hidden":this.$state.hidden,"data-error":this.ed.bind(this),"aria-hidden":iF(this.$state.hidden)})}onAttach(t){(0,o.e)(this.hd.bind(this)),(0,o.e)(this.id.bind(this)),(0,o.e)(this.jd.bind(this)),(0,o.e)(this.kd.bind(this)),(0,o.e)(this.ld.bind(this))}hd(){let t=this.$state.video();t&&(t.readyState>=2&&this.fd(),(0,o.l)(t,"canplay",this.fd.bind(this)),(0,o.l)(t,"error",this.md.bind(this)))}id(){let{src:t}=this.$state,{canLoad:e}=this.Ba.$state;t.set(e()?this.$props.src():null)}gd(){let{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}ed(){let{error:t}=this.$state;return!(0,o.N)(t)}jd(){let{src:t,hidden:e}=this.$state,{canLoad:i,duration:s}=this.Ba.$state;e.set(i()&&(!t()||this.ed()||!Number.isFinite(s())))}kd(){let{src:t,canPlay:e,error:i}=this.$state;t(),e.set(!1),i.set(null)}fd(t){let{canPlay:e,error:i}=this.$state;e.set(!0),i.set(null),this.dispatch("can-play",{trigger:t})}md(t){let{canPlay:e,error:i}=this.$state;e.set(!1),i.set(t),this.dispatch("error",{trigger:t})}ld(){let{video:t,canPlay:e}=this.$state,{duration:i}=this.Ba.$state,{pointerRate:s}=this.cd,r=t(),n=e()&&r&&Number.isFinite(i())&&Number.isFinite(s());n&&(r.currentTime=s()*i())}}function i8(t,e){let i=String(t),s=i.length;if(s<e){let i="0".repeat(e-s);return`${i}${t}`}return i}function i9(t){let e=Number((t-Math.trunc(t)).toPrecision(3));return{hours:Math.trunc(t/3600),minutes:Math.trunc(t%3600/60),seconds:Math.trunc(t%60),fraction:e}}function st(t,e=null,i=null,s=!1){let{hours:r,minutes:n,seconds:a}=i9(t),h=e?i8(r,2):r,l=i||(0,o.N)(i)&&t>=3600?i8(n,2):n,u=i8(a,2);return r>0||s?`${h}:${l}:${u}`:`${l}:${u}`}function se(t){let e=[],{hours:i,minutes:s,seconds:r}=i9(t);return i>0&&e.push(`${i} hour`),s>0&&e.push(`${s} min`),(r>0||0===e.length)&&e.push(`${r} sec`),e.join(" ")}i7.props={src:null},i7.state=new o.S({video:null,src:null,canPlay:!1,error:null,hidden:!1}),((t,e,i,s)=>{for(var r,n=s>1?void 0:s?i4(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&i6(e,i,n)})([o.a0],i7.prototype,"video",1);var si=Object.defineProperty,ss=Object.getOwnPropertyDescriptor;class sr extends o.O{onSetup(){this.cd=(0,o.a6)(iY.state),this.nd=(0,o.M)(iz),this.od=(0,o.T)(this.getValueText.bind(this))}getValueText(){let{type:t,format:e,decimalPlaces:i,padHours:s,padMinutes:r,showHours:n}=this.$props,{value:a,pointerValue:h,min:l,max:o}=this.cd,u=e()??this.nd.default,c="current"===t()?a():h();if("percent"===u){let t=o()-l();return(this.nd.percent??ie)(c/t*100,i())+"﹪"}return"time"===u?(this.nd.time??st)(c,s(),r(),n()):this.nd.value?.(c)??c.toFixed(2)}}sr.props={type:"pointer",format:null,showHours:!1,padHours:null,padMinutes:null,decimalPlaces:2},((t,e,i,s)=>{for(var r,n=s>1?void 0:s?ss(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&si(e,i,n)})([o.a1],sr.prototype,"getValueText",1);class sn extends o.O{onSetup(){this.cd=(0,o.M)(iJ);let{active:t}=(0,o.a6)(iY.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){let{bd:e}=this.cd;e.set(t),(0,o.o)(()=>e.set(null)),(0,o.e)(this.pd.bind(this));let i=new ResizeObserver(this.pd.bind(this));i.observe(t),(0,o.o)(()=>i.disconnect())}pd(){let{ad:t,$c:e}=this.cd;if(t())return;let i=this.el,{offset:s,noClamp:r}=this.$props;sa(i,{clamp:!r(),offset:s(),orientation:e()})}}function sa(t,{clamp:e,offset:i,orientation:s}){let{width:r,height:n}=t.getBoundingClientRect(),a={top:null,right:null,bottom:null,left:null};if(a["horizontal"===s?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${i}px))`,"horizontal"===s){let t=r/2;if(e){let e=`max(0px, calc(var(--slider-pointer) - ${t}px))`,i=`calc(100% - ${r}px)`;a.left=`min(${e}, ${i})`}else a.left=`calc(var(--slider-pointer) - ${t}px)`}else{let t=n/2;if(e){let e=`max(${t}px, calc(var(--slider-pointer) - ${t}px))`,i=`calc(100% - ${n}px)`;a.bottom=`min(${e}, ${i})`}else a.bottom=`calc(var(--slider-pointer) - ${t}px)`}Object.assign(t.style,a)}sn.props={offset:0,noClamp:!1};class sh extends o.O{constructor(){super(...arguments),this.qd=e7(this.td.bind(this),25)}onSetup(){this.Ba=ti(),(0,o.Z)(iz,{default:"percent"}),new iX({Rc:this.$props.step,Sc:this.$props.keyStep,Uc:this.$props.disabled,Tc:Math.round,Nc:this.Nc.bind(this),Oc:this.Oc.bind(this),rd:this.rd.bind(this),sd:this.sd.bind(this)}).attach(this),(0,o.e)(this._b.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),t7(t,"aria-label","Volume");let{canSetVolume:e}=this.Ba.$state;this.setAttributes({"data-supported":e,"aria-hidden":iF(()=>!e())})}Nc(){let{value:t}=this.$state;return Math.round(t())}Oc(){let{value:t,max:e}=this.$state;return ie(t()/e()*100,2)+"%"}_b(){let{muted:t,volume:e}=this.Ba.$state,i=t()?0:100*e();this.$state.value.set(i),this.dispatch("value-change",{detail:i})}td(t){if(!t.trigger)return;let e=ie(t.detail/100,3);this.Ba.remote.changeVolume(e,t)}sd(t){this.qd(t)}rd(t){this.qd(t)}}sh.props={...iX.props,keyStep:5,shiftKeyMultiplier:2},sh.state=iK;class sl extends o.O{constructor(){super(),this.xd=(0,o.s)(null),this.vd=!1,new iX({Id:!0,Rc:this.Rc.bind(this),Sc:this.Sc.bind(this),Uc:this.Uc.bind(this),Tc:this.Tc,Nc:this.Nc.bind(this),Oc:this.Oc.bind(this),yd:this.yd.bind(this),rd:this.rd.bind(this),wd:this.wd.bind(this),sd:this.sd.bind(this)})}onSetup(){this.Ba=ti(),(0,o.Z)(iz,{default:"time",value:this.Ad.bind(this),time:this.Bd.bind(this)}),this.setAttributes({"data-chapters":this.Cd.bind(this)}),this.setStyles({"--slider-progress":this.Dd.bind(this)}),(0,o.e)(this.$b.bind(this)),(0,o.e)(this.Ed.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),t7(t,"aria-label","Seek")}onConnect(t){(0,o.e)(this.Fd.bind(this)),ty(this.Ba.textTracks,"chapters",this.xd.set)}Dd(){let{bufferedEnd:t,duration:e}=this.Ba.$state;return ie(100*Math.min(t()/Math.max(e(),1),1),3)+"%"}Cd(){let{duration:t}=this.Ba.$state;return this.xd()?.cues.length&&Number.isFinite(t())&&t()>0}Ed(){this.zd=e7(this.yb.bind(this),this.$props.seekingRequestThrottle())}$b(){let{currentTime:t}=this.Ba.$state,{value:e,dragging:i}=this.$state,s=this.Gd(t());(0,o.p)(i)||(e.set(s),this.dispatch("value-change",{detail:s}))}Fd(){let t=this.Ba.player.el,{bd:e}=(0,o.M)(iJ);t&&e()&&(0,o.n)(t,"data-preview",this.$state.active())}yb(t,e){this.Ba.remote.seeking(t,e)}Hd(t,e,i){this.zd.cancel();let{live:s}=this.Ba.$state;if(s()&&e>=99){this.Ba.remote.seekToLiveEdge(i);return}this.Ba.remote.seek(t,i)}yd(t){let{pauseWhileDragging:e}=this.$props;if(e()){let{paused:e}=this.Ba.$state;this.vd=!e(),this.Ba.remote.pause(t)}}rd(t){this.zd(this.ud(t.detail),t)}wd(t){let e=t.detail;this.Hd(this.ud(e),e,t);let{pauseWhileDragging:i}=this.$props;i()&&this.vd&&(this.Ba.remote.play(t),this.vd=!1)}sd(t){let{dragging:e}=this.$state;!e()&&t.trigger&&this.wd(t)}Rc(){let t=this.$props.step()/this.Ba.$state.duration()*100;return Number.isFinite(t)?t:1}Sc(){let t=this.$props.keyStep()/this.Ba.$state.duration()*100;return Number.isFinite(t)?t:1}Tc(t){return ie(t,3)}Uc(){let{canSeek:t}=this.Ba.$state;return this.$props.disabled()||!t()}Nc(){let{value:t}=this.$state;return Math.round(t())}Oc(){let t=this.ud(this.$state.value()),{duration:e}=this.Ba.$state;return Number.isFinite(t)?`${se(t)} out of ${se(e())}`:"live"}ud(t){let{duration:e}=this.Ba.$state;return Math.round(t/100*e())}Gd(t){let{liveEdge:e,duration:i}=this.Ba.$state,s=Math.max(0,Math.min(1,e()?1:Math.min(t,i())/i()));return Number.isNaN(s)?0:Number.isFinite(s)?100*s:100}Ad(t){let e=this.ud(t),{live:i,duration:s}=this.Ba.$state;return Number.isFinite(e)?(i()?e-s():e).toFixed(0):"LIVE"}Bd(t,e,i,s){let r=this.ud(t),{live:n,duration:a}=this.Ba.$state,h=n()?r-a():r;return Number.isFinite(r)?`${h<0?"-":""}${st(Math.abs(h),e,i,s)}`:"LIVE"}}sl.props={...iX.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,seekingRequestThrottle:100},sl.state=iK;var so=Object.defineProperty,su=Object.getOwnPropertyDescriptor,sc=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?su(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&so(e,i,n),n};class sd extends o.O{constructor(){super(...arguments),this.Ld=null,this.Jd=[],this.Nd=(0,o.s)(null),this.Kd=(0,o.s)([]),this.Md=(0,o.s)(-1),this.Od=(0,o.s)(-1),this.Pd=0,this.Xd=(0,o._)(t=>{let e,i=this.Kd();for(let s=this.Pd;s<this.Jd.length;s++)if(e=this.Qd(i[s],t),this.Jd[s]?.style.setProperty("--chapter-progress",e+"%"),e<100){this.Pd=s;break}}),this.Yd=(0,o.T)(this.Zd.bind(this)),this._d=e4(()=>{let t=(0,o.p)(this.Nd);this.scope&&t&&t.cues.length&&(this.Kd.set(this.$d(t.cues)),this.Md.set(0))},150,!0)}get cues(){return this.Kd()}get activeCue(){return this.Kd()[this.Md()]||null}get activePointerCue(){return this.Kd()[this.Od()]||null}onSetup(){this.Ba=ti(),this.Sd=(0,o.a6)(sl.state)}onAttach(t){ty(this.Ba.textTracks,"chapters",this.Td.bind(this)),(0,o.e)(this.ae.bind(this))}onConnect(){(0,o.o)(()=>this.j.bind(this))}onDestroy(){this.Td(null)}setRefs(t){if(this.Jd=t,this.Ud?.dispose(),1===this.Jd.length){let t=this.Jd[0];t.style.width="100%",t.style.setProperty("--chapter-fill","var(--slider-fill)"),t.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.Jd.length>0&&(0,o.k)(()=>this.be(),this.Ud=(0,o.d)())}Td(t){(0,o.p)(this.Nd)!==t&&(this.j(),this.Nd.set(t))}j(){this.Jd=[],this.Kd.set([]),this.Md.set(-1),this.Od.set(-1),this.Pd=0,this.Ud?.dispose()}be(){this.Jd.length&&((0,o.e)(this.ce.bind(this)),(0,o.e)(this.de.bind(this)),(0,o.e)(this.ee.bind(this)),(0,o.e)(this.fe.bind(this)))}ce(){let t,e=this.Kd(),i=e[e.length-1].endTime;for(let s=0;s<e.length;s++)t=e[s],this.Jd[s]&&(this.Jd[s].style.width=ie((t.endTime-t.startTime)/i*100,3)+"%")}de(){let{liveEdge:t,ended:e}=this.Ba.$state,{fillPercent:i,value:s}=this.Sd,r=this.Kd(),n=t(),a=(0,o.p)(this.Md),h=r[a],l=n?this.Kd.length-1:this.Vd(h&&h.startTime<=(0,o.p)(s)?a:0,i());n||e()||!h?this.Rd(0,r.length,"100%"):l>a?this.Rd(a,l,"100%"):l<a&&this.Rd(l+1,a+1,"0%");let u=n?"100%":this.Qd(r[l],i())+"%";this.Wd(this.Jd[l],u),this.Md.set(l)}ee(){let{pointing:t,pointerPercent:e}=this.Sd;if(!t()){this.Od.set(-1);return}let i=this.Vd(0,e());this.Od.set(i)}Rd(t,e,i){for(let s=t;s<e;s++)this.Wd(this.Jd[s],i)}Wd(t,e){t&&t.style.setProperty("--chapter-fill",e)}Vd(t,e){let i=0,s=this.Kd();for(let r=t;r<s.length;r++)if((i=this.Qd(s[r],e))>=0&&i<100)return r;return 0}fe(){this.Xd(this.Yd())}Zd(){let{bufferedEnd:t,duration:e}=this.Ba.$state;return 100*ie(Math.min(t()/Math.max(e(),1),1),3)}Qd(t,e){let i=this.Kd();if(0===i.length)return 0;let s=i[i.length-1],r=t.startTime/s.endTime*100,n=t.endTime/s.endTime*100;return Math.max(0,ie(e>=n?100:(e-r)/(n-r)*100,3))}$d(t){let e=[];0!==t[0].startTime&&e.push(new window.VTTCue(0,t[0].startTime,""));for(let i=0;i<t.length-1;i++){let s=t[i],r=t[i+1];if(e.push(s),r){let t=r.startTime-s.endTime;t>0&&e.push(new window.VTTCue(s.endTime,s.endTime+t,""))}}return e.push(t[t.length-1]),e}ae(){if(!this.scope)return;let{disabled:t}=this.$props;if(t())return;let e=this.Nd();if(e){let t=this._d.bind(this);t(),(0,o.o)((0,o.l)(e,"add-cue",t)),(0,o.o)((0,o.l)(e,"remove-cue",t))}return this.Ld=this.ge(),this.Ld&&(0,o.e)(this.he.bind(this)),()=>{this.Ld&&(this.Ld.textContent="",this.Ld=null)}}he(){let t=this.activePointerCue||this.activeCue;this.Ld&&(this.Ld.textContent=t?.text||"")}ie(){let t=this.el;for(;t&&"slider"!==t.getAttribute("role");)t=t.parentElement;return t}ge(){let t=this.ie();return t?t.querySelector('[data-part="chapter-title"]'):null}}sd.props={disabled:!1},sc([o.a0],sd.prototype,"cues",1),sc([o.a0],sd.prototype,"activeCue",1),sc([o.a0],sd.prototype,"activePointerCue",1),sc([o.a1],sd.prototype,"setRefs",1);let sp=(0,o.L)(),sf=["a[href]","[tabindex]","input","select","button"].map(t=>`${t}:not([aria-hidden])`).join(","),sb=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class sg{constructor(t){this.Vc=t,this.gf=0,this.w=null,this.Gi=[]}get d(){return this.Gi}Je(t){return(0,o.l)(t,"focus",this._h.bind(this)),this.w=t,(0,o.o)(()=>{this.w=null}),this}Bc(){this.w&&(this.va(),(0,o.l)(this.w,"keyup",this.vb.bind(this)),(0,o.l)(this.w,"keydown",this.wb.bind(this)),(0,o.o)(()=>{this.gf=0,this.Gi=[]}))}va(){this.gf=0,this.Gi=this.Ki()}Ve(t=this.Ji()){let e=this.Gi[t],i=this.Vc.Pe();e&&i&&requestAnimationFrame(()=>{i.scrollTop=e.offsetTop-i.offsetHeight/2+e.offsetHeight/2})}Hi(t){this.gf=t,this.Gi[t]?.focus(),this.Ve(t)}Ji(){return this.Gi.findIndex(t=>"true"===t.getAttribute("aria-checked"))}_h(){this.va(),setTimeout(()=>{let t=this.Ji();this.Hi(t>=0?t:0)},100)}vb(t){sb.has(t.key)&&(t.stopPropagation(),t.preventDefault())}wb(t){if(sb.has(t.key))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.Vc.Qe(t);break;case"Tab":this.Hi(this.Ii(t.shiftKey?-1:1));break;case"ArrowUp":this.Hi(this.Ii(-1));break;case"ArrowDown":this.Hi(this.Ii(1));break;case"Home":case"PageUp":this.Hi(0);break;case"End":case"PageDown":this.Hi(this.Gi.length-1)}}Ii(t){let e=this.gf;do e=(e+t+this.Gi.length)%this.Gi.length;while(this.Gi[e]?.offsetParent===null);return e}Ki(){if(!this.w)return[];let t=this.w.querySelectorAll(sf),e=[],i=t=>"menu"===t.getAttribute("role");for(let s of t)s instanceof HTMLElement&&null!==s.offsetParent&&t9(this.w,s,i)&&e.push(s);return e}}var sm=Object.defineProperty,sy=Object.getOwnPropertyDescriptor,sv=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sy(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sm(e,i,n),n};let sw=0;class s$ extends o.O{constructor(){super(),this.je=(0,o.s)(!1),this.ad=(0,o.s)(!1),this.sc=(0,o.s)(null),this.tc=(0,o.s)(null),this.pe=(0,o.s)(!1),this.ke=new Set,this.me=null,this.Ae=this.Be.bind(this),this.Ce=this.De.bind(this),this.Ee=this.Fe.bind(this);let{showDelay:t}=this.$props;this.ne=new iB({sc:this.sc,tc:this.tc,Ac:t,Bc:(t,e,i)=>{et(t,t=>{this.je()?i(t):e(t)});let s=this.Ge();s&&et(s,t=>{t.stopPropagation(),i(t)})},ja:this.He.bind(this)})}get triggerElement(){return this.sc()}get contentElement(){return this.tc()}get isSubmenu(){return!!this.qe}onSetup(){this.Ba=ti();let t=++sw;this.re=`media-menu-${t}`,this.se=`media-menu-button-${t}`,this.le=new sg({Pe:this.Ie.bind(this),Qe:this.close.bind(this)}),(0,o.a5)(sp)&&(this.qe=(0,o.M)(sp)),this.setAttributes({"data-open":this.je,"data-submenu":this.isSubmenu,"data-disabled":this.Uc.bind(this)}),(0,o.Z)(sp,{Re:this.sc,je:this.je,Se:(0,o.s)(""),te:this.te.bind(this),ue:this.ue.bind(this),ve:this.ve.bind(this),we:this.we.bind(this),xe:this.xe.bind(this),oe:this.oe.bind(this)})}onAttach(t){t.style.setProperty("display","contents"),this.le.Je(t)}onConnect(t){(0,o.e)(this.Ke.bind(this)),this.isSubmenu&&this.qe?.oe(this),requestAnimationFrame(()=>{this.Fb()})}onDestroy(){this.sc.set(null),this.tc.set(null),this.me=null}Ke(){let t=this.Le();this.Fb(),this.ye(t),t&&((0,o.e)(()=>{let{height:t}=this.Ba.$state,e=this.tc();e&&(0,o.Q)(e,"--player-height",t()+"px")}),this.le.Bc(),this.listen("pointerup",this.Me.bind(this)),(0,o.l)(window,"pointerup",this.Ne.bind(this)))}ue(t){let e=t.el,i=this.isSubmenu,s=iF(this.Uc.bind(this));t7(e,"tabindex",i?"-1":"0"),t7(e,"role",i?"menuitem":"button"),(0,o.n)(e,"id",this.se),(0,o.n)(e,"aria-haspopup","menu"),(0,o.n)(e,"aria-expanded","false"),(0,o.n)(e,"data-submenu",this.isSubmenu),this.isSubmenu||this.ze(e);let r=()=>{(0,o.n)(e,"data-open",this.je()),(0,o.n)(e,"aria-disabled",s())};R?r():(0,o.e)(r),this.sc.set(e),(0,o.o)(()=>{this.sc.set(null)})}ve(t){let e=t.el;e.style.setProperty("display","none"),(0,o.n)(e,"id",this.re),t7(e,"role","menu"),t7(e,"tabindex","-1"),(0,o.n)(e,"data-submenu",this.isSubmenu),this.tc.set(e),(0,o.o)(()=>this.tc.set(null)),this.isSubmenu||this.ze(e);let i=()=>{(0,o.n)(e,"data-open",this.je())};R?i():(0,o.e)(i),this.le.Je(e),this.ye(!1),R||requestAnimationFrame(this.Fb.bind(this))}we(t){this.me=t}ze(t){(0,o.l)(t,"click",t=>t.stopPropagation()),(0,o.l)(t,"pointerup",t=>t.stopPropagation())}ye(t){let e=(0,o.p)(this.tc);e&&(0,o.n)(e,"aria-hidden",(0,o.a3)(!t))}xe(t){this.pe.set(t)}He(t,e){if(e?.stopPropagation(),this.je()===t)return;if(this.Uc()){t&&this.ne.hide(e);return}let i=this.sc(),s=this.tc();if(i&&((0,o.n)(i,"aria-controls",t&&this.re),(0,o.n)(i,"aria-expanded",(0,o.a3)(t))),s&&(0,o.n)(s,"aria-labelledby",t&&this.se),this.je.set(t),this.Oe(e),(0,o.K)(),(0,o.G)(e))for(let e of(t?s?.focus():i?.focus(),[this.el,s]))e&&e.setAttribute("data-keyboard","");else for(let t of[this.el,s])t&&t.removeAttribute("data-keyboard");this.dispatch(t?"open":"close",{trigger:e}),t?(this.isSubmenu||this.Ba.activeMenu===this||(this.Ba.activeMenu?.close(e),this.Ba.activeMenu=this),this.me?.Te?.(e)):(this.isSubmenu?setTimeout(()=>{for(let t of this.ke)t.close(e)},300):this.Ba.activeMenu=null,this.me?.Ue?.(e)),t&&!(0,o.G)(e)&&requestAnimationFrame(()=>{this.le.va(),setTimeout(()=>{this.le.Ve()},100)})}Le(){return!this.Uc()&&this.je()}Uc(){return this.ad()||this.pe()}te(t){this.ad.set(t)}Me(t){t.stopPropagation()}Ne(t){if(this.isSubmenu)return setTimeout(this.close.bind(this,t),800);this.close(t)}Ge(){let t=this.el.querySelector('[data-part="close-target"]');return t9(this.el,t,t=>"menu"===t.getAttribute("role"))?t:null}Ie(){if(this.isSubmenu){let t=this.el;for(;t&&"media-menu"!==t.tagName&&t.hasAttribute("data-submenu");)t=t.parentNode;return t}{let t=(0,o.p)(this.tc);return t||null}}Oe(t){this.isSubmenu||(this.je()?this.Ba.remote.pauseControls(t):this.Ba.remote.resumeControls(t))}oe(t){this.ke.add(t),(0,o.l)(t,"open",this.Ce),(0,o.l)(t,"close",this.Ee),(0,o.o)(this.Ae)}Be(t){this.ke.delete(t)}De(t){for(let e of this.ke)if(e!==t.target)for(let t of[e.el,e.triggerElement])t?.setAttribute("aria-hidden","true");requestAnimationFrame(()=>{this.Fb()})}Fe(){for(let t of this.ke)for(let e of[t.el,t.triggerElement])e?.setAttribute("aria-hidden","false");requestAnimationFrame(()=>{this.Fb()})}Fb(){let t=(0,o.p)(this.tc);if(!t||R)return;let{paddingTop:e,paddingBottom:i,borderTopWidth:s,borderBottomWidth:r}=getComputedStyle(t),n=parseFloat(e)+parseFloat(i)+parseFloat(s)+parseFloat(r),a=[...t.children];for(let t of a)t instanceof HTMLElement&&"contents"===t.style.display?a.push(...t.children):3===t.nodeType?n+=parseInt(window.getComputedStyle(t).fontSize,10):n+=t.offsetHeight||0;requestAnimationFrame(()=>{t&&((0,o.n)(t,"data-resizing",""),setTimeout(()=>{t&&(0,o.n)(t,"data-resizing",!1)},400),(0,o.Q)(t,"--menu-height",n+"px"))})}open(t){(0,o.p)(this.je)||(this.ne.show(t),(0,o.K)())}close(t){(0,o.p)(this.je)&&(this.ne.hide(t),(0,o.K)())}}s$.props={showDelay:0},sv([o.a0],s$.prototype,"triggerElement",1),sv([o.a0],s$.prototype,"contentElement",1),sv([o.a0],s$.prototype,"isSubmenu",1),sv([o.a1],s$.prototype,"open",1),sv([o.a1],s$.prototype,"close",1);var sx=Object.defineProperty,sk=Object.getOwnPropertyDescriptor;class sT extends o.O{constructor(){super(),new ia}get expanded(){return this.We?.je()??!1}onSetup(){this.We=(0,o.M)(sp)}onAttach(t){this.We.ue(this),(0,o.e)(this.Yc.bind(this)),t7(t,"type","button")}onConnect(t){let e=Array.from(t.querySelectorAll('[data-part="hint"]')).pop();e&&(0,o.e)(()=>{let t=this.We.Se();t&&(e.textContent=t)}),et(t,t=>{this.dispatch("select",{trigger:t})})}Yc(){this.We.xe(this.$props.disabled())}}sT.props={disabled:!1},((t,e,i,s)=>{for(var r,n=s>1?void 0:s?sk(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sx(e,i,n)})([o.a0],sT.prototype,"expanded",1);class sE extends sT{}class sP extends o.O{constructor(){super(...arguments),this.b=null}onSetup(){this.Ba=ti(),(0,o.Z)(sB,{O:this.Ye.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){this.b?.remove(),this.b=null}Ye(t){this.Xe(!1),this.b=t,ei(()=>{ei(()=>{this.connectScope&&(0,o.e)(this.Yc.bind(this))})})}Yc(){let{fullscreen:t}=this.Ba.$state,{disabled:e}=this.$props,i=e();this.Xe("fullscreen"===i?!t():!i)}Xe(t){if(!this.b)return;let e=this.Ze(this.$props.container());if(!e)return;let i=this.b.parentElement===e;(0,o.n)(this.b,"data-portal",t),t?i||(this.b.remove(),e.append(this.b)):i&&this.b.parentElement===e&&(this.b.remove(),this.el?.append(this.b))}Ze(t){return t instanceof HTMLElement?t:t?document.querySelector(t):document.body}}sP.props={container:null,disabled:!1};let sB=(0,o.L)();class sS extends o.O{constructor(){super(),new ia;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.We=(0,o.M)(sp),this.We.ve(this),(0,o.a5)(sB)){let e=(0,o.M)(sB);e&&((0,o.Z)(sB,null),e.O(t),(0,o.o)(()=>e.O(null)))}}onConnect(t){(0,o.e)(this.Dc.bind(this))}Dc(){if(!this.el)return;let t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:e,alignOffset:i}=this.$props;return es(this.el,this.Cc(),t,{offsetVarName:"media-menu",xOffset:i(),yOffset:e()})}this.el.removeAttribute("style"),this.el.style.display="none"}Cc(){return this.We.Re()}}sS.props={placement:null,offset:0,alignOffset:0};let sO=(0,o.L)();class sA extends o.V{constructor(){super(...arguments),this.Li=new Set,this.ff=(0,o.s)(""),this._e=null,this.Ni=this.ja.bind(this)}get $e(){return Array.from(this.Li).map(t=>t.ff())}get value(){return this.ff()}set value(t){this.ja(t)}onSetup(){(0,o.Z)(sO,{add:this.Oi.bind(this),remove:this.Pi.bind(this)})}onAttach(t){let e=(0,o.a5)(sp);e||t7(t,"role","radiogroup"),this.setAttributes({value:this.ff})}onDestroy(){this.Li.clear()}Oi(t){this.Li.has(t)||(this.Li.add(t),t.cf=this.Ni,t.bf(t.ff()===this.ff()))}Pi(t){t.cf=null,this.Li.delete(t)}ja(t,e){let i=(0,o.p)(this.ff);if(!t||t===i)return;let s=this.Mi(i),r=this.Mi(t);s?.bf(!1,e),r?.bf(!0,e),this.ff.set(t),this.sd?.(t,e)}Mi(t){for(let e of this.Li)if(t===(0,o.p)(e.ff))return e;return null}}var sq=Object.defineProperty,sC=Object.getOwnPropertyDescriptor,sM=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sC(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sq(e,i,n),n};class sR extends o.O{constructor(){super(),this._e=new sA,this._e.sd=this.sd.bind(this)}get values(){return this._e.$e}get value(){return this._e.value}set value(t){this._e.value=t}onSetup(){R?this.Pc():(0,o.e)(this.Pc.bind(this))}Pc(){this._e.value=this.$props.value()}sd(t,e){let i=this.createEvent("change",{detail:t,trigger:e});this.dispatch(i)}}sR.props={value:""},sM([o.a0],sR.prototype,"values",1),sM([o.a0],sR.prototype,"value",1);var sL=Object.defineProperty,sj=Object.getOwnPropertyDescriptor;class sN extends o.O{constructor(){super(),this.af=(0,o.s)(!1),this._e={ff:this.$props.value,bf:this.bf.bind(this),cf:null},new ia}get checked(){return this.af()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.af,"aria-checked":iF(this.af)})}onAttach(t){let e=(0,o.a5)(sp);t7(t,"tabindex",e?"-1":"0"),t7(t,"role",e?"menuitemradio":"radio"),(0,o.e)(this.Pc.bind(this))}onConnect(t){this.df(),et(t,this.Hc.bind(this)),(0,o.o)(this.c.bind(this))}c(){(0,o.k)(()=>{let t=(0,o.M)(sO);t.remove(this._e)},this.connectScope)}df(){let t=(0,o.M)(sO);t.add(this._e)}Pc(){let{value:t}=this.$props,e=t();(0,o.p)(this.af)&&this._e.cf?.(e)}Hc(t){(0,o.p)(this.af)||(this.ja(!0,t),this.ef(t),this._e.cf?.(o.p(this.$props.value),t))}bf(t,e){(0,o.p)(this.af)!==t&&this.ja(t,e)}ja(t,e){this.af.set(t),this.dispatch("change",{detail:t,trigger:e})}ef(t){this.dispatch("select",{trigger:t})}}sN.props={value:""},((t,e,i,s)=>{for(var r,n=s>1?void 0:s?sj(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sL(e,i,n)})([o.a0],sN.prototype,"checked",1);var sF=Object.defineProperty,sV=Object.getOwnPropertyDescriptor,s_=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sV(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sF(e,i,n),n};class sI extends o.O{constructor(){super(),this.gf=(0,o.s)(0),this.Ia=(0,o.s)(null),this._e=new sA,this._e.sd=this.sd.bind(this)}get value(){return this._e.value}get disabled(){let t=this.Ia();return!t||!t.cues.length}onSetup(){this.Ba=ti(),(0,o.a5)(sp)&&(this.We=(0,o.M)(sp));let{thumbnails:t}=this.$props;this.setAttributes({"data-thumbnails":()=>!!t()})}onAttach(t){this.We?.we({Te:this.Te.bind(this)})}getOptions(){let t=this.Ia();return t?t.cues.map((t,e)=>({cue:t,value:e+"",label:t.text,startTime:st(t.startTime,!1),duration:se(t.endTime-t.startTime)})):[]}Te(){(0,o.p)(()=>this.$b())}onConnect(t){(0,o.e)(this.Pc.bind(this)),(0,o.e)(this.$b.bind(this)),(0,o.e)(this.hf.bind(this)),ty(this.Ba.textTracks,"chapters",this.Ia.set)}Pc(){this._e.value=this.jf()}$b(){if(!this.We?.je())return;let t=this.Ia();if(!t){this.gf.set(-1);return}let{currentTime:e}=this.Ba.$state,i=e(),s=t.cues.findIndex(t=>tm(t,i));if(this.gf.set(s),s>=0){let e=t.cues[s],r=this.el.querySelector("[aria-checked='true']"),n=(i-e.startTime)/(e.endTime-e.startTime)*100;r&&(0,o.Q)(r,"--progress",ie(n,3)+"%")}}hf(){this.We?.te(this.disabled)}jf(){return this.gf()+""}sd(t,e){if(this.disabled||!e)return;let i=+t,s=this.Ia()?.cues;(0,o.h)(i)&&s?.[i]&&(this.gf.set(i),this.Ba.remote.seek(s[i].startTime,e),this.dispatch("change",{detail:s[i],trigger:e}))}}sI.props={thumbnails:""},s_([o.a0],sI.prototype,"value",1),s_([o.a0],sI.prototype,"disabled",1),s_([o.a1],sI.prototype,"getOptions",1);var sD=Object.defineProperty,sH=Object.getOwnPropertyDescriptor,sW=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sH(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sD(e,i,n),n};class sK extends o.O{constructor(){super(),this._e=new sA,this._e.sd=this.sd.bind(this)}get value(){return this._e.value}get disabled(){let{audioTracks:t}=this.Ba.$state;return 0===t().length}onSetup(){this.Ba=ti(),(0,o.a5)(sp)&&(this.We=(0,o.M)(sp))}onConnect(t){(0,o.e)(this.Pc.bind(this)),(0,o.e)(this.hf.bind(this)),(0,o.e)(this.kf.bind(this))}getOptions(){let{audioTracks:t}=this.Ba.$state;return t().map(t=>({track:t,label:t.label,value:t.label.toLowerCase()}))}Pc(){this._e.value=this.jf()}kf(){let{emptyLabel:t}=this.$props,{audioTrack:e}=this.Ba.$state,i=e();this.We?.Se.set(i?.label??t())}hf(){this.We?.te(this.disabled)}jf(){let{audioTrack:t}=this.Ba.$state,e=t();return e?e.label.toLowerCase():""}sd(t,e){if(this.disabled)return;let i=this.Ba.audioTracks.toArray().findIndex(e=>e.label.toLowerCase()===t);if(i>=0){let t=this.Ba.audioTracks[i];this.Ba.remote.changeAudioTrack(i,e),this.dispatch("change",{detail:t,trigger:e})}}}sK.props={emptyLabel:"Default"},sW([o.a0],sK.prototype,"value",1),sW([o.a0],sK.prototype,"disabled",1),sW([o.a1],sK.prototype,"getOptions",1);var sU=Object.defineProperty,sQ=Object.getOwnPropertyDescriptor,sG=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sQ(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sU(e,i,n),n};class sz extends o.O{constructor(){super(),this._e=new sA,this._e.sd=this.sd.bind(this)}get value(){return this._e.value}get disabled(){let{textTracks:t}=this.Ba.$state;return 0===t().filter(tw).length}onSetup(){this.Ba=ti(),(0,o.a5)(sp)&&(this.We=(0,o.M)(sp))}onConnect(t){super.onConnect?.(t),(0,o.e)(this.Pc.bind(this)),(0,o.e)(this.hf.bind(this)),(0,o.e)(this.kf.bind(this))}getOptions(){let{offLabel:t}=this.$props,{textTracks:e}=this.Ba.$state;return[{value:"off",label:t},...e().filter(tw).map(t=>({track:t,label:t.label,value:t.label.toLowerCase()}))]}Pc(){this._e.value=this.jf()}kf(){let{offLabel:t}=this.$props,{textTrack:e}=this.Ba.$state,i=e();this.We?.Se.set(i&&tw(i)&&"showing"===i.mode?i.label:t())}hf(){this.We?.te(this.disabled)}jf(){let{textTrack:t}=this.Ba.$state,e=t();return e&&tw(e)&&"showing"===e.mode?e.label.toLowerCase():"off"}sd(t,e){if(this.disabled)return;if("off"===t){let t=this.Ba.textTracks.selected;if(t){let i=this.Ba.textTracks.toArray().indexOf(t);this.Ba.remote.changeTextTrackMode(i,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}let i=this.Ba.textTracks.toArray().findIndex(e=>e.label.toLowerCase()===t);if(i>=0){let t=this.Ba.textTracks[i];this.Ba.remote.changeTextTrackMode(i,"showing",e),this.dispatch("change",{detail:t,trigger:e})}}}sz.props={offLabel:"Off"},sG([o.a0],sz.prototype,"value",1),sG([o.a0],sz.prototype,"disabled",1),sG([o.a1],sz.prototype,"getOptions",1);var sJ=Object.defineProperty,sX=Object.getOwnPropertyDescriptor,sY=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?sX(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&sJ(e,i,n),n};class sZ extends o.O{constructor(){super(),this._e=new sA,this._e.sd=this.sd.bind(this)}get value(){return this._e.value}onSetup(){this.Ba=ti(),(0,o.a5)(sp)&&(this.We=(0,o.M)(sp))}onConnect(t){(0,o.e)(this.Pc.bind(this)),(0,o.e)(this.kf.bind(this))}getOptions(){let{rates:t,normalLabel:e}=this.$props;return t().map(t=>({label:1===t?e:t+"\xd7",value:t+""}))}Pc(){this._e.value=this.jf()}kf(){let{normalLabel:t}=this.$props,{playbackRate:e}=this.Ba.$state,i=e();this.We?.Se.set(1===i?t():i+"\xd7")}jf(){let{playbackRate:t}=this.Ba.$state;return t()+""}sd(t,e){let i=+t;this.Ba.remote.changePlaybackRate(i,e),this.dispatch("change",{detail:i,trigger:e})}}sZ.props={normalLabel:"Normal",rates:[.25,.5,.75,1,1.25,1.5,1.75,2]},sY([o.a0],sZ.prototype,"value",1),sY([o.a1],sZ.prototype,"getOptions",1);var s0=Object.defineProperty,s1=Object.getOwnPropertyDescriptor,s2=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?s1(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&s0(e,i,n),n};class s5 extends o.O{constructor(){super(),this.mf=(0,o.T)(()=>{let{qualities:t}=this.Ba.$state;return[...t()].sort((t,e)=>e.height===t.height?e.bitrate-t.bitrate:e.height-t.height)}),this._e=new sA,this._e.sd=this.sd.bind(this)}get value(){return this._e.value}get disabled(){let{canSetQuality:t,qualities:e}=this.Ba.$state;return!t()||0===e().length}onSetup(){this.Ba=ti(),(0,o.a5)(sp)&&(this.We=(0,o.M)(sp))}onConnect(t){(0,o.e)(this.Pc.bind(this)),(0,o.e)(this.hf.bind(this)),(0,o.e)(this.kf.bind(this))}getOptions(){let{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.mf().map(t=>{let i=`${ie(t.bitrate/1e6,2)} Mbps`;return{quality:t,label:t.height+"p",value:this.lf(t),bitrate:()=>e()?null:i}})]}Pc(){this._e.value=this.jf()}kf(){let{autoLabel:t}=this.$props,{autoQuality:e,quality:i}=this.Ba.$state,s=i()?i().height+"p":"";this.We?.Se.set(e()?t()+` (${s})`:s)}hf(){let{qualities:t}=this.Ba.$state;this.We?.te(0===t().length)}sd(t,e){if(this.disabled)return;if("auto"===t){this.Ba.remote.changeQuality(-1,e),this.dispatch("change",{detail:"auto",trigger:e});return}let{qualities:i}=this.Ba.$state,s=(0,o.p)(i).findIndex(e=>this.lf(e)===t);if(s>=0){let t=(0,o.p)(i)[s];this.Ba.remote.changeQuality(s,e),this.dispatch("change",{detail:t,trigger:e})}}jf(){let{quality:t,autoQuality:e}=this.Ba.$state;if(e())return"auto";let i=t();return i?this.lf(i):"auto"}lf(t){return t.height+"_"+t.bitrate}}s5.props={autoLabel:"Auto",hideBitrate:!1},s2([o.a0],s5.prototype,"value",1),s2([o.a0],s5.prototype,"disabled",1),s2([o.a1],s5.prototype,"getOptions",1);let s3=class extends o.O{constructor(){super(...arguments),this.Lb=null,this.nf=0,this.of=-1}onSetup(){this.Ba=ti();let{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){this.Lb=this.Ba.player.el?.querySelector("[data-media-provider]"),(0,o.e)(this.qf.bind(this))}qf(){let t=this.$props.event();if(this.Lb&&t){if(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),"pointerup"===t||"pointerdown"===t){let e=this.Ba.$state.pointer();"coarse"===e&&(t="pointerup"===t?"touchend":"touchstart")}(0,o.l)(this.Lb,t,this.rf.bind(this),{passive:!1})}}rf(t){if((0,o.E)(t)&&(0!==t.button||this.Ba.activeMenu)||(0,o.P)(t)&&this.Ba.activeMenu||ee(t)||!this.sf(t))return;t.MEDIA_GESTURE=!0,t.preventDefault();let e=(0,o.p)(this.$props.event),i=e?.startsWith("dbl");if(i){if(1===this.nf){queueMicrotask(()=>this.pf(t)),clearTimeout(this.of),this.nf=0;return}}else 0===this.nf&&setTimeout(()=>{1===this.nf&&this.pf(t)},250);0===this.nf&&(this.of=window.setTimeout(()=>{this.nf=0},275)),this.nf++}pf(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.tf()&&this.uf((0,o.p)(this.$props.action),t),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}sf(t){if(!this.el)return!1;if((0,o.E)(t)||(0,o.a7)(t)||(0,o.P)(t)){let e=(0,o.P)(t)?t.changedTouches[0]??t.touches[0]:void 0,i=e?.clientX??t.clientX,s=e?.clientY??t.clientY,r=this.el.getBoundingClientRect(),n=s>=r.top&&s<=r.bottom&&i>=r.left&&i<=r.right;return t.type.includes("leave")?!n:n}return!0}tf(){let t=this.Ba.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(t).sort((t,e)=>+getComputedStyle(e).zIndex-+getComputedStyle(t).zIndex)[0]===this.el}uf(t,e){if(!t)return;let i=new o.D("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(i),i.defaultPrevented)return;let[s,r]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.Ba.remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?this.Ba.remote.seek((0,o.p)(this.Ba.$state.currentTime)+(+r||0),e):this.Ba.remote[(0,o.X)(s)](e),this.dispatch("trigger",{detail:t,trigger:e})}};s3.props={event:void 0,action:void 0};class s6{constructor(t){this.wf=t,this.priority=10,this.Ia=null,this.Qi=(0,o.a8)()}attach(){}canRender(){return!0}detach(){this.Qi.empty(),this.wf.reset(),this.Ia=null}changeTrack(t){t&&this.Ia!==t&&(this.Qi.empty(),t.readyState<2?(this.wf.reset(),this.Qi.add((0,o.l)(t,"load",()=>this.Ri(t),{once:!0}))):this.Ri(t),this.Qi.add((0,o.l)(t,"add-cue",t=>{this.wf.addCue(t.detail)}),(0,o.l)(t,"remove-cue",t=>{this.wf.removeCue(t.detail)})),this.Ia=t)}Ri(t){this.wf.changeTrack({cues:[...t.cues],regions:[...t.regions]})}}let s4=class extends o.O{onSetup(){this.Ba=ti(),this.setAttributes({"aria-hidden":iF(this.Kc.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){if(this.wf){(0,o.e)(this.yf.bind(this));return}i.e(562).then(i.bind(i,6562)).then(e=>{this.connectScope&&(0,o.k)(()=>{this.xf=e;let{CaptionsRenderer:i}=this.xf;this.wf=new i(t),this.vf=new s6(this.wf),(0,o.e)(this.yf.bind(this))},this.connectScope)})}onDestroy(){this.vf&&(this.vf.detach(),this.Ba.textRenderers.remove(this.vf)),this.wf?.destroy()}Kc(){let{textTrack:t}=this.Ba.$state,e=t();return this.Ba.$iosControls()||!e||!tw(e)}yf(){let{viewType:t}=this.Ba.$state;return"audio"===t()?this.Af():this.Bf()}Af(){return(0,o.e)(this.ae.bind(this)),()=>{this.el.textContent=""}}ae(){if(this.Kc())return;let{textTrack:t}=this.Ba.$state;this.zf(),(0,o.l)(t(),"cue-change",this.zf.bind(this)),(0,o.e)(this.Cf.bind(this))}zf(){this.el.textContent="";let{currentTime:t,textTrack:e}=this.Ba.$state,i=(0,o.p)(t),s=(0,o.p)(e).activeCues,{renderVTTCueString:r}=this.xf;for(let t of s){let e=document.createElement("div");e.setAttribute("data-part","cue"),e.innerHTML=r(t,i),this.el.append(e)}}Cf(){let{currentTime:t}=this.Ba.$state,{updateTimedVTTCueNodes:e}=this.xf;e(this.el,t())}Bf(){return(0,o.e)(this.Df.bind(this)),(0,o.e)(this.Ef.bind(this)),this.Ba.textRenderers.add(this.vf),()=>{this.el.textContent="",this.vf.detach(),this.Ba.textRenderers.remove(this.vf)}}Df(){this.wf.dir=this.$props.textDir()}Ef(){if(this.Kc())return;let{currentTime:t}=this.Ba.$state;this.wf.currentTime=t()}};s4.props={textDir:"ltr"};class s7 extends o.O{onSetup(){this.Ba=ti(),this.Ff(),this.Gf(),this.jd()}onAttach(t){t.style.setProperty("pointer-events","none"),(0,o.e)(this.Hf.bind(this)),(0,o.e)(this.Ff.bind(this)),(0,o.e)(this.Gf.bind(this)),(0,o.e)(this.jd.bind(this));let{started:e}=this.Ba.$state;this.setAttributes({"data-visible":()=>!e(),"data-loading":this.gd.bind(this),"data-error":this.ed.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){let{canLoad:e,poster:i}=this.Ba.$state;window.requestAnimationFrame(()=>{e()||tr(i())}),(0,o.e)(this.If.bind(this))}ed(){let{error:t}=this.$state;return!(0,o.N)(t())}jd(){let{src:t}=this.$props,{$iosControls:e}=this.Ba,{poster:i}=this.Ba.$state;this.el&&(0,o.n)(this.el,"display",e()?"none":null),this.$state.hidden.set(this.ed()||!(t()||i())||e())}gd(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}Hf(){let t=this.$state.img();t&&((0,o.l)(t,"load",this.Jf.bind(this)),(0,o.l)(t,"error",this.md.bind(this)))}Ff(){let{canLoad:t,poster:e}=this.Ba.$state,i=this.$props.src(),s=i||e();i&&e()!==i&&this.Ba.$state.providedPoster.set(i),this.$state.src.set(t()&&s.length?s:null)}Gf(){let{src:t,alt:e}=this.$state;e.set(t()?this.$props.alt():null)}If(){let{loading:t,error:e}=this.$state,{canLoad:i,poster:s}=this.Ba.$state;t.set(i()&&!!s()),e.set(null)}Jf(){let{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}md(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}}s7.props={src:void 0,alt:void 0},s7.state=new o.S({img:null,src:null,alt:null,loading:!0,error:null,hidden:!1});let s8=class extends o.O{onSetup(){this.Ba=ti(),this.Kf();let{type:t,remainder:e}=this.$props;this.setAttributes({"data-type":t,"data-remainder":e})}onAttach(t){(0,o.e)(this.Kf.bind(this))}Kf(){let{type:t,remainder:e,padHours:i,padMinutes:s,showHours:r}=this.$props,n=this.Lf(t()),a=this.Ba.$state.duration();if(!Number.isFinite(n+a)){this.$state.timeText.set("LIVE");return}let h=e()?Math.max(0,a-n):n,l=st(h,i(),s(),r());this.$state.timeText.set(l)}Lf(t){let{bufferedEnd:e,duration:i,currentTime:s}=this.Ba.$state;switch(t){case"buffered":return e();case"duration":return i();default:return s()}}};s8.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1},s8.state=new o.S({timeText:""});var s9=Object.defineProperty,rt=Object.getOwnPropertyDescriptor,re=Object.getPrototypeOf,ri=Reflect.get,rs=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?rt(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&s9(e,i,n),n},rr=(t,e,i)=>ri(re(t),i,e);class rn extends o.O{constructor(){super(...arguments),this.menuContainer=null}get isMatch(){return this._f.matches}get isSmallLayout(){return this.Zf.matches}onSetup(){let{when:t,smallWhen:e,thumbnails:i,translations:s,menuGroup:r,noModal:n}=this.$props;this._f=ey.create(t),this.Zf=ey.create(e),this.setAttributes({"data-match":this._f.$matches,"data-size":()=>this.Zf.matches?"sm":null});let a=this;(0,o.Z)(rc,{smQueryList:this.Zf,thumbnails:i,translations:s,menuGroup:r,noModal:n,get menuContainer(){return a.menuContainer}})}}rn.props={when:"",smallWhen:"",thumbnails:"",customIcons:!1,translations:null,menuGroup:"bottom",noModal:!1},rs([o.a0],rn.prototype,"menuContainer",2),rs([o.a0],rn.prototype,"isMatch",1),rs([o.a0],rn.prototype,"isSmallLayout",1);let ra=class extends rn{};ra.props={...rr(ra,ra,"props"),when:"(view-type: audio)",smallWhen:"(width < 576)"};let rh=ra,rl=class extends rn{};rl.props={...rr(rl,rl,"props"),when:"(view-type: video)",smallWhen:"(width < 576) or (height < 380)"};let ro=rl;function ru(t,e){return t()?.[e]??e}let rc=(0,o.L)();function rd(){return(0,o.M)(rc)}class rp extends ib{}class rf extends iT{}class rb extends iE{}class rg extends iP{}class rm extends ij{}class ry extends iV{}class rv extends i_{}class rw extends iW{}class r$ extends iI{}class rx extends iD{}class rk extends iN{}class rT extends iH{}class rE extends iA{}class rP extends iq{}class rB extends iC{}class rS extends iY{}class rO extends sl{}class rA extends sh{}class rq extends i3{}class rC extends sr{}class rM extends i7{}class rR extends sn{}class rL extends sd{}class rj extends s${}class rN extends sT{}class rF extends sS{}class rV extends sE{}class r_ extends sP{}class rI extends sR{}class rD extends sN{}class rH extends s4{}class rW extends s3{}class rK extends s7{}class rU extends i5{}class rQ extends s8{}let rG=l.forwardRef((t,e)=>{let{children:i,...s}=t,r=l.Children.toArray(i),n=r.find(rX);if(n){let t=n.props.children,i=r.map(e=>e!==n?e:l.Children.count(t)>1?l.Children.only(null):l.isValidElement(t)?t.props.children:null);return l.createElement(rz,{...s,ref:e},l.isValidElement(t)?l.cloneElement(t,void 0,i):null)}return l.createElement(rz,{...s,ref:e},i)});rG.displayName="Slot";let rz=l.forwardRef((t,e)=>{let{children:i,...s}=t;return l.isValidElement(i)?l.cloneElement(i,{...function(t,e){let i={...e};for(let s in e){let r=t[s],n=e[s],a=/^on[A-Z]/.test(s);a?r&&n?i[s]=(...t)=>{n(...t),r(...t)}:r&&(i[s]=r):"style"===s?i[s]={...r,...n}:"className"===s&&(i[s]=[r,n].filter(Boolean).join(" "))}return{...t,...i}}(s,i.props),ref:e?(0,o.w)(e,i.ref):i.ref}):l.Children.count(i)>1?l.Children.only(null):null});rz.displayName="SlotClone";let rJ=({children:t})=>l.createElement(l.Fragment,null,t);function rX(t){return l.isValidElement(t)&&t.type===rJ}let rY=["button","div","span","img","video","audio"].reduce((t,e)=>{let Node=l.forwardRef((t,i)=>{let{asChild:s,...r}=t,n=s?rG:e;return l.createElement(n,{...r,ref:i})});return Node.displayName=`Primitive.${e}`,{...t,[e]:Node}},{}),rZ=(0,o.q)(rb),r0=l.forwardRef(({children:t,...e},i)=>l.createElement(rZ,{...e},e=>l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},t)));r0.displayName="Controls";let r1=(0,o.q)(rg),r2=l.forwardRef(({children:t,...e},i)=>l.createElement(r1,{...e},e=>l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},t)));r2.displayName="ControlsGroup";var r5=Object.freeze({__proto__:null,Group:r2,Root:r0});let r3=(0,o.q)(rE);function r6({children:t,...e}){return l.createElement(r3,{...e},t)}r6.displayName="Tooltip";let r4=(0,o.q)(rP),r7=l.forwardRef(({children:t,...e},i)=>l.createElement(r4,{...e},e=>l.createElement(rY.button,{...e,ref:(0,o.w)(e.ref,i)},t)));r7.displayName="TooltipTrigger";let r8=(0,o.q)(rB),r9=l.forwardRef(({children:t,...e},i)=>l.createElement(r8,{...e},e=>l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},t)));r9.displayName="TooltipContent";var nt=Object.freeze({__proto__:null,Content:r9,Root:r6,Trigger:r7});let ne=(0,o.q)(rk),ni=l.forwardRef(({children:t,...e},i)=>l.createElement(ne,{...e},e=>l.createElement(rY.button,{...e,ref:(0,o.w)(e.ref,i)},t)));ni.displayName="PlayButton";let ns=(0,o.q)(ry),nr=l.forwardRef(({children:t,...e},i)=>l.createElement(ns,{...e},e=>l.createElement(rY.button,{...e,ref:(0,o.w)(e.ref,i)},t)));nr.displayName="CaptionButton";let nn=(0,o.q)(rv),na=l.forwardRef(({children:t,...e},i)=>l.createElement(nn,{...e},e=>l.createElement(rY.button,{...e,ref:(0,o.w)(e.ref,i)},t)));na.displayName="FullscreenButton";let nh=(0,o.q)(r$),nl=l.forwardRef(({children:t,...e},i)=>l.createElement(nh,{...e},e=>l.createElement(rY.button,{...e,ref:(0,o.w)(e.ref,i)},t)));nl.displayName="MuteButton";let no=(0,o.q)(rx),nu=l.forwardRef(({children:t,...e},i)=>l.createElement(no,{...e},e=>l.createElement(rY.button,{...e,ref:(0,o.w)(e.ref,i)},t)));nu.displayName="PIPButton";let nc=(0,o.q)(rT),nd=l.forwardRef(({children:t,...e},i)=>l.createElement(nc,{...e},e=>l.createElement(rY.button,{...e,ref:(0,o.w)(e.ref,i)},t)));nd.displayName="SeekButton";let np=(0,o.q)(rw),nf=l.forwardRef(({children:t,...e},i)=>l.createElement(np,{...e},e=>l.createElement(rY.button,{...e,ref:(0,o.w)(e.ref,i)},t)));nf.displayName="LiveButton";let nb=(0,o.q)(rC),ng=(0,o.q)(rS,{events:["onDragStart","onDragEnd","onDragValueChange","onValueChange","onPointerValueChange"]}),nm=l.forwardRef(({children:t,...e},i)=>l.createElement(ng,{...e,ref:i},e=>l.createElement(rY.div,{...e},t)));nm.displayName="Slider";let ny=l.forwardRef((t,e)=>l.createElement(rY.div,{...t,ref:e}));ny.displayName="SliderThumb";let nv=l.forwardRef((t,e)=>l.createElement(rY.div,{...t,ref:e}));nv.displayName="SliderTrack";let nw=l.forwardRef((t,e)=>l.createElement(rY.div,{...t,ref:e}));nw.displayName="SliderTrackFill";let n$=(0,o.q)(rR),nx=l.forwardRef(({children:t,...e},i)=>l.createElement(n$,{...e},e=>l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},t)));nx.displayName="SliderPreview";let nk=l.forwardRef(({children:t,...e},i)=>l.createElement(nb,{...e},(e,s)=>{let r=(0,o.v)(()=>s.getValueText(),s);return l.createElement(rY.div,{...e,ref:i},r,t)}));nk.displayName="SliderValue";var nT=Object.freeze({__proto__:null,Preview:nx,Root:nm,Thumb:ny,Track:nv,TrackFill:nw,Value:nk});let nE=(0,o.q)(rA),nP=l.forwardRef(({children:t,...e},i)=>l.createElement(nE,{...e,ref:i},e=>l.createElement(rY.div,{...e},t)));nP.displayName="VolumeSlider";let nB=l.forwardRef(({children:t,...e},i)=>l.createElement(nb,{...e},(e,s)=>{let r=(0,o.v)(()=>s.getValueText(),s);return l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},r,t)}));nB.displayName="SliderValue";var nS=Object.freeze({__proto__:null,Preview:nx,Root:nP,Thumb:ny,Track:nv,TrackFill:nw,Value:nB});let nO=(0,o.q)(rU),nA=l.forwardRef(({children:t,...e},i)=>l.createElement(nO,{...e},e=>l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},t)));nA.displayName="Thumbnail";let nq=l.forwardRef(({children:t,...e},i)=>{let{crossorigin:s}=(0,o.r)(Y),{src:r,img:n}=(0,o.r)(rU.state),a=(0,o.v)(r),h=(0,o.v)(s);return l.createElement(rY.img,{crossOrigin:h,...e,src:a,ref:(0,o.w)(n.set,i)},t)});nq.displayName="ThumbnailImg";var nC=Object.freeze({__proto__:null,Img:nq,Root:nA});let nM=l.createContext({$chapters:(0,o.s)(null)});nM.displayName="TimeSliderContext";let nR=(0,o.q)(rO),nL=l.forwardRef(({children:t,...e},i)=>{let s=l.useMemo(()=>(0,o.s)(null),[]);return l.createElement(nM.Provider,{value:{$chapters:s}},l.createElement(nR,{...e,ref:i},e=>l.createElement(rY.div,{...e},t)))});nL.displayName="TimeSlider";let nj=(0,o.q)(rL),nN=l.forwardRef(({children:t,...e},i)=>l.createElement(nj,{...e},(e,s)=>l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},l.createElement(nF,{instance:s},t))));function nF({instance:t,children:e}){let i=(0,o.v)(()=>t.cues,t),s=l.useRef([]),r=l.useRef(),{$chapters:n}=l.useContext(nM);return r.current||(r.current=function(t=0,e=0,i=""){return R?{startTime:t,endTime:e,text:i,addEventListener:o.a2,removeEventListener:o.a2,dispatchEvent:o.a2}:new window.VTTCue(t,e,i)}()),l.useEffect(()=>(n.set(t),()=>void n.set(null)),[t]),l.useEffect(()=>{t.setRefs(s.current)},[i]),e(i.length?i:[r.current],t=>{if(!t){s.current.length=0;return}s.current.push(t)})}nN.displayName="SliderChapters",nF.displayName="SliderChapterTracks";let nV=l.forwardRef(({children:t,...e},i)=>{let{$chapters:s}=l.useContext(nM),[r,n]=l.useState();return l.useEffect(()=>(0,o.e)(()=>{let t=s(),e=t?.activePointerCue||t?.activeCue;n(e?.text||"")}),[]),l.createElement(rY.div,{...e,ref:i},r,t)});nV.displayName="SliderChapterTitle";let n_=l.forwardRef(({children:t,...e},i)=>l.createElement(nb,{...e},(e,s)=>{let r=(0,o.v)(()=>s.getValueText(),s);return l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},r,t)}));n_.displayName="SliderValue";let nI=l.forwardRef((t,e)=>l.createElement(rY.div,{...t,ref:e}));nI.displayName="SliderProgress";let nD=(0,o.q)(rq),nH=l.forwardRef(({children:t,...e},i)=>l.createElement(nD,{...e},e=>l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},t)));nH.displayName="SliderThumbnail";let nW={Root:nH,Img:nq},nK=(0,o.q)(rM,{events:["onCanPlay","onError"]}),nU=l.forwardRef(({children:t,...e},i)=>l.createElement(nK,{...e},(e,s)=>l.createElement(nQ,{...e,instance:s,ref:(0,o.w)(e.ref,i)},t)));nU.displayName="SliderVideo";let nQ=l.forwardRef(({instance:t,children:e,...i},s)=>{let{crossorigin:r,canLoad:n}=(0,o.r)(Y),{src:a,video:h}=t.$state,u=(0,o.v)(a),c=(0,o.v)(n),d=(0,o.v)(r);return l.createElement(rY.video,{style:{maxWidth:"unset"},...i,src:u||void 0,muted:!0,playsInline:!0,preload:c?"auto":"none",crossOrigin:d||void 0,ref:(0,o.w)(h.set,s)},e)});nQ.displayName="SliderVideoProvider";var nG=Object.freeze({__proto__:null,ChapterTitle:nV,Chapters:nN,Preview:nx,Progress:nI,Root:nL,Thumb:ny,Thumbnail:nW,Track:nv,TrackFill:nw,Value:n_,Video:nU});let nz=(0,o.q)(rI,{events:["onChange"]}),nJ=l.forwardRef(({children:t,...e},i)=>l.createElement(nz,{...e,ref:i},e=>l.createElement(rY.div,{...e},t)));nJ.displayName="RadioGroup";let nX=(0,o.q)(rD,{events:["onChange","onSelect"]}),nY=l.forwardRef(({children:t,...e},i)=>l.createElement(nX,{...e},e=>l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},t)));nY.displayName="RadioItem";var nZ=Object.freeze({__proto__:null,Item:nY,Root:nJ});let n0="undefined"==typeof document,n1=rp.state.record,n2=Object.keys(n1).reduce((t,e)=>({...t,[e]:()=>n1[e]}),{});function n5(t,e){let i=(0,o.r)(Y);return(0,o.v)((e?.current?.$state||i||n2)[t])}function n3(t){let e=(0,o.r)(Y);return(0,o.x)(t?.current?t.current.$state:e||n2)}let n6=(0,o.q)(rj,{events:["onOpen","onClose"]}),n4=l.forwardRef(({children:t,...e},i)=>l.createElement(n6,{...e,ref:i},(e,i)=>l.createElement(rY.div,{...e,style:{display:i.isSubmenu?void 0:"contents",...e.style}},t)));n4.displayName="Menu";let n7=(0,o.q)(rN,{events:["onSelect"]}),n8=l.forwardRef(({children:t,...e},i)=>l.createElement(n7,{...e},e=>l.createElement(rY.button,{...e,ref:(0,o.w)(e.ref,i)},t)));n8.displayName="MenuButton";let n9=l.forwardRef(({disabled:t=!1,children:e,...i},s)=>{let r=n5("fullscreen");return n0||!("fullscreen"===t?!r:!t)?e:(0,u.createPortal)(l.createElement(rY.div,{...i,style:{display:"contents",...i.style},ref:s},e),document.body)});n9.displayName="MenuPortal";let at=(0,o.q)(rF),ae=l.forwardRef(({children:t,...e},i)=>l.createElement(at,{...e},e=>l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},t)));ae.displayName="MenuItems";let ai=(0,o.q)(rV),as=l.forwardRef(({children:t,...e},i)=>l.createElement(ai,{...e},e=>l.createElement(rY.div,{...e,ref:(0,o.w)(e.ref,i)},t)));as.displayName="MenuItem";var ar=Object.freeze({__proto__:null,Button:n8,Content:ae,Item:as,Items:ae,Portal:n9,Radio:nY,RadioGroup:nJ,Root:n4});function an(t){let[e,i]=l.useState([]);return l.useEffect(()=>{if(!t){i([]);return}return(0,o.l)(t,"cue-change",()=>{i(t.activeCues)})},[t]),e}function aa(t){let e=(0,o.t)(te),[i,s]=l.useState(null);return l.useEffect(()=>ty(e.textTracks,t,s),[t]),i}let ah=l.forwardRef(({children:t,...e},i)=>{let s=n5("started"),r=n5("title"),n=aa("chapters"),a=an(n),h=a[0]?.text||"";return l.createElement(rY.span,{...e,ref:i},s?h||r:r||h,t)});ah.displayName="ChapterTitle";let al=(0,o.q)(rW,{events:["onWillTrigger","onTrigger"]}),ao=l.forwardRef(({children:t,...e},i)=>l.createElement(al,{...e,ref:i},e=>l.createElement(rY.div,{...e},t)));ao.displayName="Gesture";let au=(0,o.q)(rH),ac=l.forwardRef(({children:t,...e},i)=>l.createElement(au,{...e,ref:i},e=>l.createElement(rY.div,{...e},t)));ac.displayName="Captions";let ad=(0,o.q)(rQ),ap=l.forwardRef(({children:t,...e},i)=>l.createElement(ad,{...e},(e,s)=>l.createElement(af,{...e,instance:s,ref:(0,o.w)(e.ref,i)},t)));ap.displayName="Time";let af=l.forwardRef(({instance:t,children:e,...i},s)=>{let{timeText:r}=t.$state,n=(0,o.v)(r);return l.createElement(rY.div,{...i,ref:s},n,e)});function ab(t){let e=(0,o.y)(),i=l.useMemo(()=>(0,o.k)(()=>ey.create(t),e),[t]),[s,r]=l.useState(i.matches);return l.useEffect(()=>(r(i.matches),(0,o.l)(i,"change",()=>{r(i.matches)})),[t]),s}function ag(){let t=(0,o.t)(te),{audioTracks:e,audioTrack:i}=t.$state,s=(0,o.v)(e);return(0,o.v)(i),l.useMemo(()=>{let r=s.map(s=>({track:s,label:s.label,value:am(s),get selected(){return i()===s},select(i){let r=e().indexOf(s);r>=0&&t.remote.changeAudioTrack(r,i)}}));return Object.defineProperty(r,"disabled",{get:()=>!r.length}),Object.defineProperty(r,"selectedTrack",{get:()=>i()}),Object.defineProperty(r,"selectedValue",{get(){let t=i();return t?am(t):void 0}}),r},[s])}function am(t){return t.label.toLowerCase()}function ay({off:t=!0}={}){let e=(0,o.t)(te),{textTracks:i,textTrack:s}=e.$state,r=(0,o.v)(i);return(0,o.v)(s),l.useMemo(()=>{let n=r.filter(tw),a=n.map(t=>({track:t,label:t.label,value:av(t),get selected(){return s()===t},select(s){let r=i().indexOf(t);r>=0&&e.remote.changeTextTrackMode(r,"showing",s)}}));return t&&a.unshift({track:null,label:(0,o.a)(t)?t:"Off",value:"off",get selected(){return!s()},select(t){e.remote.toggleCaptions(t)}}),Object.defineProperty(a,"disabled",{get:()=>!n.length}),Object.defineProperty(a,"selectedTrack",{get:()=>s()}),Object.defineProperty(a,"selectedValue",{get(){let t=s();return t?av(t):"off"}}),a},[r])}function av(t){return t.label.toLowerCase()}function aw(){let t=(0,o.t)(te),e=aa("chapters");return an(e),l.useMemo(()=>{let i=e?e.cues.map((i,s)=>{let r=null,n;return{cue:i,label:i.text,value:s+"",startTimeText:st(i.startTime,!1),durationText:se(i.endTime-i.startTime),get selected(){return i===e.activeCues[0]},setProgressVar(s){if(!s||i!==e.activeCues[0]){n?.(),n=void 0,s?.style.setProperty("--progress","0%"),r=null;return}r!==s&&(r=s,n?.(),n=(0,o.e)(()=>{let{currentTime:e}=t.$state,r=e(),n=100*Math.min((r-i.startTime)/(i.endTime-i.startTime),1);s.style.setProperty("--progress",n.toFixed(3)+"%")}))},select(e){t.remote.seek(i.startTime,e)}}}):[];return Object.defineProperty(i,"selectedValue",{get(){let t=i.findIndex(t=>t.selected);return(t>=0?t:0)+""}}),i},[e])}function a$({auto:t=!0,sort:e="descending"}={}){let i=(0,o.t)(te),{qualities:s,quality:r,autoQuality:n}=i.$state,a=(0,o.v)(s);return(0,o.v)(r),(0,o.v)(n),l.useMemo(()=>{let h=[...a].sort("descending"===e?ak:ax).map(t=>({quality:t,label:t.height+"p",value:aT(t),bitrateText:`${(t.bitrate/1e6).toFixed(2)} Mbps`,get selected(){return t===r()},get autoSelected(){return n()},select(e){let r=s().indexOf(t);r>=0&&i.remote.changeQuality(r,e)}}));return t&&h.unshift({quality:null,label:(0,o.a)(t)?t:"Auto",value:"auto",bitrateText:null,get selected(){return n()},get autoSelected(){return n()},select(t){i.remote.requestAutoQuality(t)}}),Object.defineProperty(h,"disabled",{get:()=>!a.length}),Object.defineProperty(h,"selectedQuality",{get:()=>r()}),Object.defineProperty(h,"selectedValue",{get(){let t=r();return!n()&&t?aT(t):"auto"}}),h},[a,e])}function ax(t,e){return t.height===e.height?t.bitrate-e.bitrate:t.height-e.height}function ak(t,e){return e.height===t.height?e.bitrate-t.bitrate:e.height-t.height}function aT(t){return t.height+"_"+t.bitrate}af.displayName="TimeText";let aE=[.25,.5,.75,{label:"Normal",rate:1},1.25,1.5,1.75,2];function aP({rates:t=aE}={}){let e=(0,o.t)(te),{playbackRate:i}=e.$state;return(0,o.v)(i),l.useMemo(()=>{let s=t.map(t=>{let s="number"==typeof t?t+"":t.label,r="number"==typeof t?t:t.rate;return{label:s,value:r+"",rate:r,get selected(){return i()===r},select(t){e.remote.changePlaybackRate(r,t)}}});return Object.defineProperty(s,"disabled",{get:()=>!s.length}),Object.defineProperty(s,"selectedValue",{get:()=>i()+""}),s},[t])}}}]);